(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-518f102d"],{"10d2":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"device-channel-selector"},[a("a-cascader",{staticStyle:{width:"100%"},attrs:{options:e.processedOptions,placeholder:"请选择设备与通道","field-names":{label:"name",value:"id",children:"children"},disabled:e.disabled,allowClear:!1},on:{change:e.handleChange},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}})],1)},i=[],s=a("3835"),o=a("b85c"),l=a("2909"),r=a("5530"),c=(a("25eb"),a("a9e3"),a("d81d"),a("99af"),a("b0c0"),a("d7b0")),d={name:"DeviceChannelSelector",props:{showAllChannels:{type:Boolean,default:!1},clearOnInit:{type:Boolean,default:!1},flag:{type:Boolean,default:!1},activeKeyFlag:{type:String,default:""}},data:function(){var e=localStorage.getItem("dmsType"),t=3;return"1"!==e&&"2"!==e||(t=Number.parseInt(e,10)),{selectedValue:[],dmsType:t,disabled:!1,loading:!1,options:[]}},created:function(){var e=this;this.loading=!0,Object(c["d"])(this.activeKeyFlag).then((function(t){var a=t.data;e.options=a||[],e.loading=!1})).catch((function(){e.options=[],e.loading=!1}))},computed:{processedOptions:function(){return this.showAllChannels&&0!==this.options.length?this.options.map((function(e){var t={id:"",name:"全部通道"};return Object(r["a"])(Object(r["a"])({},e),{},{children:e.children?[t].concat(Object(l["a"])(e.children)):[]})})):this.options}},watch:{options:{immediate:!0,handler:function(e){e&&e.length>0?this.setDefaultSelection():this.selectedValue=[]}},dmsType:function(){this.setDefaultSelection()}},methods:{findNodeById:function(e,t){var a,n=Object(o["a"])(e);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(i.id===t)return i;if(i.children&&i.children.length>0){var s=this.findNodeById(i.children,t);if(s)return s}}}catch(l){n.e(l)}finally{n.f()}return null},getChannelInfoByValue:function(e){if(!e||e.length<2)return null;var t=Object(s["a"])(e,2),a=t[0],n=t[1],i=this.findNodeById(this.options,a);if(!i||!i.children)return null;var o=this.findNodeById(i.children,n);return o?{sn:o.sn||"",channelName:o.name||"",channelType:o.channelType||"",deviceNodeName:o.deviceNodeName||"",deviceType:o.deviceType||"",deviceId:a,channelInfoId:n}:null},setDefaultSelection:function(){var e=this;this.loading=!0,this.$nextTick((function(){if(e.clearOnInit)return e.selectedValue=[],void(e.loading=!1);if(0===e.processedOptions.length)return e.selectedValue=[],void(e.loading=!1);var t=e.processedOptions[0];switch(e.dmsType){case 1:e.disabled=!0,t.children&&t.children.length>0&&(e.selectedValue=[t.id,t.children[0].id]);break;case 2:t.children&&t.children.length>0&&(e.selectedValue=[t.id,t.children[0].id]);break;case 3:t.children&&t.children.length>0&&(e.selectedValue=[t.id,t.children[0].id]);break;default:e.selectedValue=[]}if(e.loading=!1,e.selectedValue.length>0){var a=e.getChannelInfoByValue(e.selectedValue);e.$emit("change",e.selectedValue,a)}}))},resetSelection:function(){this.selectedValue=[],this.setDefaultSelection()},clearSelection:function(){this.selectedValue=[]},handleChange:function(e){this.selectedValue=e;var t=this.getChannelInfoByValue(e);this.$emit("change",e,t)},getSelectedValue:function(){return this.selectedValue},getSelectedChannelInfo:function(){return this.getChannelInfoByValue(this.selectedValue)}}},u=d,p=(a("296d"),a("2877")),h=Object(p["a"])(u,n,i,!1,null,"5ab0cc82",null);t["a"]=h.exports},1734:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"page-menu"},[a("a-radio-group",{attrs:{value:e.menu},on:{change:e.handleMenuChange}},e._l(e.menuLists,(function(t,n){return a("a-radio-button",{key:n,attrs:{value:t.value}},[e._v(e._s(t.menuName))])})),1)],1),a("a-card",{staticStyle:{clear:"both"}},[a("a-spin",{attrs:{tip:"加载数据中",spinning:e.loading}},[a("div",{staticClass:"search"},[a("div",{staticClass:"title"},[e._v("查询条件")]),a("div",{staticClass:"content"},[1!=e.dmsType?[a("span",[e._v("设备名称:")]),a("span",{staticClass:"outer",staticStyle:{width:"200px"}},[a("b-cascader",{ref:"cascaderRef",attrs:{"show-all-channels":!0,"clear-on-init":!0},on:{change:e.cascaderHandler}})],1)]:e._e(),a("span",{staticClass:"outer"},[e._v("告警类型:")]),a("span",{staticClass:"inner"},[a("a-select",{staticStyle:{width:"200px"},on:{change:e.typeChange},model:{value:e.search.types,callback:function(t){e.$set(e.search,"types",t)},expression:"search.types"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),e._l(e.typeList,(function(t){return a("a-select-option",{key:t.numValue,attrs:{value:t.numValue}},[e._v(e._s(t.name))])}))],2)],1),a("span",{staticClass:"outer"},[e._v("告警级别:")]),a("span",{staticClass:"inner"},[a("a-select",{staticStyle:{width:"200px"},on:{change:e.typeChange},model:{value:e.search.noticeRank,callback:function(t){e.$set(e.search,"noticeRank",t)},expression:"search.noticeRank"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[e._v("信息级")]),a("a-select-option",{attrs:{value:"2"}},[e._v("低危级")]),a("a-select-option",{attrs:{value:"3"}},[e._v("中危级")]),a("a-select-option",{attrs:{value:"4"}},[e._v("高危级")]),a("a-select-option",{attrs:{value:"5"}},[e._v("严重级")])],1)],1),2==e.menu?[a("span",{staticClass:"outer"},[e._v("处理人:")]),a("span",{staticClass:"inner"},[a("a-select",{staticStyle:{width:"200px"},on:{change:e.typeChange},model:{value:e.search.handleUser,callback:function(t){e.$set(e.search,"handleUser",t)},expression:"search.handleUser"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),e._l(e.handleUserList,(function(t){return a("a-select-option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],2)],1)]:e._e(),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){return e.clickSearch(1)}}},[e._v("查询")])],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",on:{click:e.resetSearch1}},[e._v("重置")])],1)],2)]),a("div",{staticClass:"body"},[a("div",{staticClass:"buttons"},[a("b-date-range",{attrs:{value:e.dateValue},on:{change:e.dateRangeChange1}}),1==e.menu?a("a-button",{attrs:{type:"primary",icon:"database"},on:{click:e.oneclickHandling}},[e._v("一键处理")]):e._e(),1==e.menu?a("a-button",{attrs:{type:"primary",icon:"api"},on:{click:e.batchHandling}},[e._v("批量处理")]):e._e()],1),a("div",{staticClass:"title"},[e._v("查询结果")]),a("a-row",{staticClass:"table"},[a("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("span",{staticStyle:{position:"absolute",top:"-25px",left:"12px",color:"#c8c8c8"}},[e.operations.selectedRowKeys.length>0?[e._v(e._s("已选中 "+e.operations.selectedRowKeys.length+" 项"))]:e._e()],2),a("b-fixed-table",{attrs:{columns:e.columns,rowKey:"id",data:e.table.data,total:e.table.total,"row-selection":e.rowSelection,"init-page":e.page},on:{change:e.tableParamChanged},scopedSlots:e._u([{key:"noticeRank",fn:function(t){var n=t.record;return[a("span",[e._v(e._s(e._f("convertSecurityRank")(n.noticeRank)))])]}},{key:"result",fn:function(t){var n=t.record;return["Allow"==n.result?a("span",[e._v("允许")]):e._e(),"Deny"==n.result?a("span",[e._v("拒绝")]):e._e()]}},{key:"actualCapacity",fn:function(t){var n=t.record;return[null!=n.actualCapacity?a("span",{attrs:{title:n.actualCapacity}},[e._v(e._s(n.actualCapacity))]):a("span",[e._v("-")])]}},{key:"operations",fn:function(t){var n=t.record;return[a("span",{staticClass:"oper"},[a("span",{staticClass:"oper-margin",on:{click:function(t){return e.handleInfo(n.id)}}},[e._v("处理")])]),2==e.menu?a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper red",on:{click:function(t){return e.handleInfoDetails(n.id)}}},[e._v("处理详情")])]):e._e()]}}])})],1)],1)],1)])],1)],1)},i=[],s=a("1da1"),o=a("2909"),l=(a("96cf"),a("ac1f"),a("841c"),a("c740"),a("a434"),a("99af"),a("4de4"),a("d3b7"),a("e9c4"),a("c1df")),r=a.n(l),c=a("c2f2"),d=a("e6e5"),u=a("8cff"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.form.init.show?a("div",[a("a-modal",{attrs:{title:e.form.init.title,closable:!0,width:e.form.init.width,"mask-closable":!1,footer:"details"===e.form.name?null:void 0},model:{value:e.form.init.show,callback:function(t){e.$set(e.form.init,"show",t)},expression:"form.init.show"}},["details"===e.form.name?a("div",[a("a-table",{attrs:{pagination:{pageSize:10,size:"small"},rowKey:"number",columns:e.handleColumns,"data-source":e.form.init.data.rows}})],1):a("a-form-model",{ref:"form",attrs:{model:e.form.init.data,rules:e.form.init.rules,"label-col":{span:e.form.init.labelSpan||7},"wrapper-col":{span:e.form.init.wrapperSpan||16}}},[void 0!==e.form.init.data.handleMsg?a("a-form-model-item",{attrs:{label:"处理意见",prop:"handleMsg"}},[a("a-textarea",{staticClass:"dialog-input-height",attrs:{placeholder:"请输入处理意见",maxLength:50,rows:4},model:{value:e.form.init.data.handleMsg,callback:function(t){e.$set(e.form.init.data,"handleMsg",t)},expression:"form.init.data.handleMsg"}})],1):e._e()],1),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary",loading:e.form.init.confirmLoading},on:{click:function(t){return e.clickSave()}}},[e._v(e._s("create"===e.form.name||"modify"===e.form.name?"保存":"确定"))]),a("a-button",{on:{click:function(t){return e.clickCancel()}}},[e._v("取消")])],1)],2)],1):e._e()},h=[],m=(a("b0c0"),a("6185")),f=a("a00a"),v=[{title:"处理人",width:"20%",dataIndex:"handleUser"},{title:"处理时间",width:"20%",dataIndex:"handleTime"},{title:"处理意见",width:"60%",dataIndex:"handleMsg"}],y={name:"AlarmInfoDialog",components:{},mixins:[c["a"]],filters:{},props:{},data:function(){return{handleColumns:v,state:"",params:"",parent:"",form:{handle:{title:"告警信息处理",width:450,request:m["d"],show:!0,data:{id:"",handleMsg:""},rules:{handleMsg:f["a"].input}},oneclick:{title:"一键处理",width:450,request:m["g"],show:!0,data:{type:"",handleMsg:""},rules:{handleMsg:f["a"].input}},batch:{title:"批量处理",width:450,request:m["c"],show:!0,data:{ids:[],handleMsg:""},rules:{handleMsg:f["a"].input}},details:{title:"告警信息处理详情",width:700,show:!0,data:{rows:[]},rules:{}}}}},created:function(){this.showDialog(this.state,this.params)},methods:{getOKText:function(){var e="确定";switch(this.form.init.name){case"delete":e="确定";break;case"create":e="保存";break}return e},close:function(){this.form.init.show=!1},update:function(){var e=this;e.parent.update()}}},g=y,I=a("2877"),x=Object(I["a"])(g,p,h,!1,null,"3b7e6dbb",null),b=x.exports,R=new u["a"](b),S=a("0618"),w=a("d9f9"),k=a("b775"),_=a("10d2"),C="alarmInfo:m",N={columns_:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警级别",dataIndex:"noticeRankName"},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_1:[{title:"登录用户",dataIndex:"userName"},{title:"登录ip",dataIndex:"loginIp"},{title:"类型",dataIndex:"typeName"},{title:"结果",ellipsis:!0,scopedSlots:{customRender:"result"}},{title:"告警级别",dataIndex:"noticeRankName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_2:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"告警内容",dataIndex:"content"},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_3:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"告警内容",dataIndex:"content"},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_4:[{title:"设备名称",dataIndex:"deviceName"},{title:"告警配置名称",dataIndex:"ruleName"},{title:"参数",width:600,dataIndex:"sessoinParams"},{title:"结果",width:80,ellipsis:!0,scopedSlots:{customRender:"result"}},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"详情",dataIndex:"content"},{title:"告警时间",dataIndex:"recordTime"},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_5:[{title:"设备名称",dataIndex:"deviceName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_6:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"异常信息",dataIndex:"abnormalType"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_7:[{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_8:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_9:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",width:"30%",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_10:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_11:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_12:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_13:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_14:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_15:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_16:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_17:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_18:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_19:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}],columns_20:[{title:"设备名称",dataIndex:"deviceName"},{title:"类型",dataIndex:"typeName"},{title:"告警时间",dataIndex:"recordTime"},{title:"告警内容",dataIndex:"content"},{title:"告警级别",ellipsis:!0,scopedSlots:{customRender:"noticeRank"}},{title:"操作",scopedSlots:{customRender:"operations"}}]},T=[{title:"处理人",dataIndex:"handleUser"},{title:"处理时间",dataIndex:"handleTime"}],O=[{title:"通道名称",dataIndex:"channelName"}],j={name:"AlarmInfo",components:{BFixedTable:S["a"],BDateRange:d["a"],BCascader:_["a"]},mixins:[c["a"]],filters:{convertSecurityRank:w["x"]},data:function(){return{readOnly:!1,menuLists:[{id:1,value:1,menuName:"未处理"},{id:2,value:2,menuName:"已处理"}],search:{types:"",handleState:1,startDate:"",endDate:"",deviceId:"",channelInfoId:"",handleUser:"",noticeRank:""},menu:1,columns:[],loading:!1,exportUrl:"alarm-info/export-data",dateValue:[],table:{data:[],total:0},typeList:[],handleUserList:[],dialog:R}},created:function(){this.menu=+sessionStorage.getItem(C)||1,this.columns=this.getColumnsByMenuAndType(),this.loadAlarmType()},watch:{$route:function(e,t){var a=this;t.path!==e.path&&this.$nextTick((function(){a.dialog&&a.dialog.close()}))}},methods:{cascaderHandler:function(e){this.search.deviceId=e[0],this.search.channelInfoId=e[1],this.clickSearch()},getColumnsByMenuAndType:function(){var e="columns_".concat(this.search.types||""),t=N[e]||N.columns_;if(2===this.menu){t=Object(o["a"])(t);var a,n=t.findIndex((function(e){var t;return"operations"===(null===(t=e.scopedSlots)||void 0===t?void 0:t.customRender)}));if(-1!==n)(a=t).splice.apply(a,[n,0].concat(T));else t=[].concat(Object(o["a"])(t),T)}if(t=t.filter((function(e){return"channelName"!==e.dataIndex})),(1!=this.dmsType||8==this.productType)&&1!=this.search.types&&7!=this.search.types){var i,s=t.findIndex((function(e){return"deviceName"===e.dataIndex}));if(-1!==s)(i=t).splice.apply(i,[s+1,0].concat(O))}return t},loadAlarmType:function(){var e=this;Object(m["b"])().then((function(t){null!==t&&void 0!==t&&t.data&&(e.typeList=t.data)}))},getAlarmHandleUser:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(k["b"])("tool/alarm-info/handle-users",k["a"].GET);case 3:a=t.sent,e.handleUserList=Array.isArray(a)?a:[],t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.handleUserList=[];case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},handleMenuChange:function(e){this.switchMenu(e.target.value)},switchMenu:function(e){this.menu=e,sessionStorage.setItem(C,this.menu),this.columns=this.getColumnsByMenuAndType(),1==this.menu?(this.search={types:"",handleState:1,startDate:"",endDate:"",deviceId:"",channelInfoId:"",handleUser:"",noticeRank:""},this.dateValue=[]):(this.search={types:"",handleState:2,startDate:r()().startOf("day").format("YYYY-MM-DD HH:mm:ss"),endDate:r()().format("YYYY-MM-DD HH:mm:ss"),deviceId:"",channelInfoId:"",handleUser:"",noticeRank:""},this.dateValue=[r()().startOf("day"),r()()],this.getAlarmHandleUser()),this.update(1)},dateRangeChange1:function(e){this.search.startDate=e.dateStrings[0],this.search.endDate=e.dateStrings[1],this.dateValue=e.dateStrings,this.clickSearch(1)},typeChange:function(){this.table.data=[],this.table.total=0,this.columns=this.getColumnsByMenuAndType(),this.clickSearch(1)},resetSearch1:function(){this.$refs.cascaderRef&&this.$refs.cascaderRef.clearSelection(),1==this.menu?(this.search={types:"",handleState:1,startDate:"",endDate:"",deviceId:"",channelInfoId:"",handleUser:"",noticeRank:""},this.dateValue=[]):(this.search={types:"",handleState:2,startDate:r()().startOf("day").format("YYYY-MM-DD HH:mm:ss"),endDate:r()().format("YYYY-MM-DD HH:mm:ss"),deviceId:"",channelInfoId:"",handleUser:"",noticeRank:""},this.dateValue=[r()().startOf("day"),r()()]),this.columns=this.getColumnsByMenuAndType(),this.clickSearch(1)},oneclickHandling:function(){var e=this;e.$confirm({content:"确认一键处理吗？",okText:"确认",cancelText:"取消",onOk:function(){e.dialog.open({state:"oneclick",parent:e,params:{type:e.search.types}})},onCancel:function(){}})},batchHandling:function(){if(this.operations.selectedRows.length<1)return this.$message.warn("请选择需要处理的项！");this.dialog.open({state:"batch",parent:this,params:{ids:"".concat(this.operations.selectedRowKeys)}})},handleInfo:function(e){this.dialog.open({state:"handle",parent:this,params:{id:e}})},handleInfoDetails:function(e){var t=this,a=this;Object(m["e"])(e).then((function(e){a.dialog.open({state:"details",parent:t,params:{rows:e.data}})}))},update:function(e,t){var a=this;a.operations={selectedRowKeys:[],page:1,selectedRows:[],state:!0,loading:!1},this.table.total=0,this.table.data=[],this.page=e||this.page,this.pageSize=t||this.pageSize,this.loading=!0;var n=encodeURIComponent(JSON.stringify(this.search));Object(m["f"])(this.page,this.pageSize,n).then((function(e){var t,n=e.data;n&&(a.table.total=null!==(t=n.total)&&void 0!==t?t:0,a.table.data=n.rows||[])})).finally((function(){a.loading=!1}))}},destroyed:function(){sessionStorage.removeItem(C)},beforeDestroy:function(){this.dialog&&this.dialog.close()}},V=j,D=(a("6c87"),Object(I["a"])(V,n,i,!1,null,"2d0a1d8b",null));t["default"]=D.exports},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("6b75");function i(e){if(Array.isArray(e))return Object(n["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function s(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=a("06c5");a("d9e2");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e){return i(e)||s(e)||Object(o["a"])(e)||l()}},"296d":function(e,t,a){"use strict";a("e9bd")},"3cc0":function(e,t,a){},6185:function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return h})),a.d(t,"g",(function(){return f})),a.d(t,"c",(function(){return y}));var n=a("1da1"),i=(a("96cf"),a("99af"),a("b775"));function s(e,t,a){return o.apply(this,arguments)}function o(){return o=Object(n["a"])(regeneratorRuntime.mark((function e(t,a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])("alarm-info/infos?offset=".concat((t-1)*a,"&limit=").concat(a,"&search=").concat(n),i["a"].GET));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function l(){return r.apply(this,arguments)}function r(){return r=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])("alarm-config/config/type-names",i["a"].GET));case 1:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])("tool/alarm-config/type-names",i["a"].GET));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])("alarm-info/alarm-handle",i["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return m=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])("alarm-info/alarm-handle/infos/".concat(t),i["a"].GET));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return v=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])("alarm-info/alarm-handle/click",i["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function y(e){return g.apply(this,arguments)}function g(){return g=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])("alarm-info/alarm-handle/batch",i["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}},"6c87":function(e,t,a){"use strict";a("3cc0")},e9bd:function(e,t,a){}}]);