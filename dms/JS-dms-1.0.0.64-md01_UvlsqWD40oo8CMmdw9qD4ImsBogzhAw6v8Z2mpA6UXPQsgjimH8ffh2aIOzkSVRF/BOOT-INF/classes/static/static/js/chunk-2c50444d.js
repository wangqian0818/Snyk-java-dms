(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c50444d"],{2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("6b75");function n(e){if(Array.isArray(e))return Object(r["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=a("06c5");a("d9e2");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return n(e)||i(e)||Object(o["a"])(e)||s()}},"5e0f":function(e,t,a){"use strict";a("6a1a")},"6a1a":function(e,t,a){},e568:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{staticClass:"container",staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"title"},[e._v("查询条件")]),a("div",{ref:"search",staticClass:"content"},[a("span",[e._v("关键字")]),a("span",{staticClass:"inner"},[a("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入关键字"},on:{pressEnter:e.clickSearch},model:{value:e.search.search,callback:function(t){e.$set(e.search,"search",t)},expression:"search.search"}})],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){return e.clickSearch(1)}}},[e._v("查询")])],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",on:{click:e.resetSearch}},[e._v("重置")])],1)])]),a("div",{staticClass:"body"},[a("div",{staticClass:"buttons"},["true"!=e.readOnly?a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.borderDeviceCreate}},[e._v("新建")]):e._e(),a("a-button",{attrs:{type:"primary",icon:"sync"},on:{click:function(t){return e.clickSearch(1)}}},[e._v("刷新")])],1),a("div",{staticClass:"title"},[e._v("查询结果")]),a("a-row",{staticClass:"table"},[a("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("b-fixed-table",{attrs:{columns:e.columns,rowKey:"id","row-selection":3===e.menu?e.rowSelection:null,data:e.table.data,total:e.table.total,"table-height":550,loading:e.loading,"init-page":e.page,size:"default"},scopedSlots:e._u([{key:"deviceName",fn:function(t){var r=t.record;return[a("span",[e._v(e._s(e._f("convertDataType")(r.deviceName)))])]}},{key:"manageIp",fn:function(t){var r=t.record;return[a("span",[e._v(e._s(e._f("convertInsulateChannelDirection")(r.manageIp)))])]}},{key:"operations",fn:function(t){var r=t.record;return[a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.borderDeviceModify(r)}}},[e._v("修改")])]),"true"!=e.readOnly?a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper red",on:{click:function(t){return e.borderDeviceDelete(r.id)}}},[e._v("删除")])]):e._e(),"true"!=e.readOnly?a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.borderDeviceload1(r)}}},[e._v("登录")])]):e._e()]}}])})],1)],1)],1)]),a("a-modal",{attrs:{closable:!0,title:"登录","destroy-on-close":!0,afterClose:e.clickCancel1,"mask-closable":!1},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form-model",{ref:"form",attrs:{model:e.form.data,rules:e.form.rules,"label-col":{span:e.form.init.labelSpan||5},"wrapper-col":{span:e.form.init.wrapperSpan||19}}},[a("a-form-model-item",{attrs:{label:"运维账号",prop:"opsuser"}},[a("a-input",{model:{value:e.form.data.opsuser,callback:function(t){e.$set(e.form.data,"opsuser",t)},expression:"form.data.opsuser"}})],1),a("a-form-model-item",{attrs:{label:"运维密码",prop:"opspass"}},[a("a-input-password",{model:{value:e.form.data.opspass,callback:function(t){e.$set(e.form.data,"opspass",t)},expression:"form.data.opspass"}})],1)],1),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickSave1()}}},[e._v("登录")]),a("a-button",{on:{click:function(t){return e.clickCancel1()}}},[e._v("取消")])],1)],2)],1)},n=[],i=a("2909"),o=(a("99af"),a("a00a")),s=a("1748"),c=a.n(s),l=a("1da1"),d=(a("96cf"),a("b775"));function p(e,t,a){return u.apply(this,arguments)}function u(){return u=Object(l["a"])(regeneratorRuntime.mark((function e(t,a,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])("device/border-device-websshs?offset=".concat((t-1)*a,"&limit=").concat(a).concat(r),d["a"].GET));case 1:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return f=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])("device/border-device-webssh",d["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return b=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,e.abrupt("return",Object(d["f"])("device/border-device-webssh/".concat(a),d["a"].DELETE));case 2:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])("device/border-device-webssh",d["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return y=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])("device/border-device-webssh/send/".concat(t),d["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function k(e){return _.apply(this,arguments)}function _(){return _=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])("device/border-device-webssh/opscheck",d["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}var C=a("c2f2"),S=a("0618"),x=a("8cff"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.form.init.show?a("div",[a("a-modal",e._b({attrs:{closable:!0,title:e.form.init.title,width:e.form.init.width,"mask-closable":!1},on:{cancel:e.onCloseWin},model:{value:e.form.init.show,callback:function(t){e.$set(e.form.init,"show",t)},expression:"form.init.show"}},"a-modal",e._d({},[e.dtprop,null])),["delete"===e.form.name?a("div",[e._v("确定删除？")]):"load"===e.form.name?a("div",[a("iframe",{staticStyle:{width:"100%","min-height":"800px"},attrs:{id:"wsshIframe",src:e.wsshUrl,frameborder:"0"},on:{load:e.resetModalStyle}})]):a("a-form-model",{ref:"form",attrs:{model:e.form.init.data,rules:e.form.init.rules,"label-col":{span:e.form.init.labelSpan||5},"wrapper-col":{span:e.form.init.wrapperSpan||19}}},["create"===e.form.name||"modify"===e.form.name?a("a-form-model-item",{attrs:{label:"设备名称",prop:"deviceName"}},[a("a-select",{attrs:{"show-search":!0,"filter-option":e.filterOption,disabled:"modify"===e.form.name},on:{change:e.deviceChange},model:{value:e.form.init.data.deviceName,callback:function(t){e.$set(e.form.init.data,"deviceName",t)},expression:"form.init.data.deviceName"}},e._l(e.deviceList,(function(t,r){return a("a-select-option",{key:r,attrs:{placeholder:"请选择设备",text:t.name,value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1):e._e(),"create"===e.form.name||"modify"===e.form.name?a("a-form-model-item",{attrs:{label:"管理IP",prop:"manageIp"}},[a("a-input",{attrs:{placeholder:"CIDR地址IP",maxLength:28},model:{value:e.form.init.data.manageIp,callback:function(t){e.$set(e.form.init.data,"manageIp",t)},expression:"form.init.data.manageIp"}})],1):e._e(),"create"===e.form.name||"modify"===e.form.name?a("a-form-model-item",{attrs:{label:"登录用户",prop:"username"}},[a("a-input",{attrs:{placeholder:"请输入用户名",maxLength:28},model:{value:e.form.init.data.username,callback:function(t){e.$set(e.form.init.data,"username",t)},expression:"form.init.data.username"}})],1):e._e(),"create"===e.form.name||"modify"===e.form.name?a("a-form-model-item",{attrs:{label:"证书密码",prop:"passphrase"}},[a("a-input",{attrs:{placeholder:"请输入证书密码",maxLength:64},model:{value:e.form.init.data.passphrase,callback:function(t){e.$set(e.form.init.data,"passphrase",t)},expression:"form.init.data.passphrase"}})],1):e._e(),"create"===e.form.name||"modify"===e.form.name?a("a-form-model-item",{attrs:{label:"SSH端口",prop:"port"}},[a("a-input",{staticClass:"dialog-input-height",staticStyle:{width:"100%"},attrs:{maxLength:10,placeholder:"请输入端口"},model:{value:e.form.init.data.port,callback:function(t){e.$set(e.form.init.data,"port",t)},expression:"form.init.data.port"}})],1):e._e()],1),a("template",{slot:"footer"},["login"===e.form.name?a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickSave1()}}},[e._v("登录")]):a("a-button",{attrs:{type:"primary",loading:e.form.init.confirmLoading},on:{click:function(t){return e.clickSave()}}},[e._v(e._s("create"===e.form.name||"modify"===e.form.name?"保存":"确定"))]),a("a-button",{on:{click:function(t){return e.clickCancel()}}},[e._v("取消")])],1)],2)],1):e._e()},O=[],D=(a("b0c0"),a("d3b7"),a("159b"),a("40a7")),L={name:"LoginDeviceDialog",components:{},mixins:[C["a"]],comments:{},filters:{},props:{},data:function(){return{dtprop:"",wsshUrl:"",locale:D["a"],deviceList:[],deviceType:"",form:{create:{title:"新建",width:450,request:m,show:!0,confirmLoading:!1,data:{channelInfoId:"",id:"",deviceName:"",manageIp:"",port:"",username:"",passphrase:""},rules:{deviceName:o["a"].select,manageIp:o["a"].ip1,username:o["a"].name,port:o["a"].format1}},modify:{title:"修改",width:450,request:v,show:!0,confirmLoading:!1,data:{id:"",channelInfoId:"",deviceName:"",manageIp:"",port:"",username:"",passphrase:""},rules:{deviceName:o["a"].select,manageIp:o["a"].ip1,username:o["a"].name,port:o["a"].format1}},load:{title:"登录",width:1500,request:w,show:!0,data:{},rules:{}},delete:{title:"删除",width:420,request:h,show:!0,confirmLoading:!1,data:{id:""},rules:{}}}}},watch:{},created:function(){"load"==this.state?(this.form.load.title="登录设备："+this.params.deviceName,this.dtprop="footer",this.wsshUrl="/wssh.html?id="+this.params.id):this.dtprop="",this.showDialog(this.state,this.params),"create"==this.state&&(this.deviceList=this.params)},methods:{clickSave1:function(){var e=this;this.form.init.data.opspass=c.a.sm3(this.form.init.data.opspass),k(this.form.init.data).then((function(t){"success"==t.data.msg?alert(1):e.$message.error(t.data.msg)})),this.form.init.show=!1},resetModalStyle:function(){"load"==this.state&&(document.getElementsByClassName("ant-modal-body")[0].style.padding="0px")},deviceChange:function(e){var t=this,a=this.deviceList;a.forEach((function(a){a.name==e&&(t.form.init.data.channelInfoId=a.id)}))},filterOption:function(e,t){var a=t.data,r=a.attrs;return~r.text.indexOf(e)},beforeShowDialog:function(){},close:function(){this.form.init.show=!1},onCloseWin:function(){document.getElementById("wsshIframe").contentWindow.deleteDevicePub()},beforeSave:function(){},update:function(){var e=this;e.parent.update()}}},j=L,$=a("2877"),R=Object($["a"])(j,I,O,!1,null,"7c3ace2c",null),E=R.exports,N=new x["a"](E),T=a("d9f9"),P=a("c8f0"),U=[{title:"设备名称",dataIndex:"deviceName"},{title:"管理IP",dataIndex:"manageIp"},{title:"操作",width:350,scopedSlots:{customRender:"operations"}}],M={name:"LoginDevice",components:{BFixedTable:S["a"]},mixins:[C["a"]],comments:{},props:{},data:function(){return{readOnly:"false",deviceList:[],visible:!1,menu:1,dialog:N,columns:U,tableList:p,loading:!1,table:{data:[],total:0},form:{data:{opsuser:"",opspass:""},rules:{opsuser:o["a"].input,opspass:o["a"].input}}}},filters:{convertDataType:T["j"]},created:function(){this.update(),this.borderDeviceList(),this.readOnly=localStorage.getItem("border-device-webssh")},computed:{},mounted:function(){},methods:{borderDeviceList:function(){var e=this;Object(P["a"])().then((function(t){var a=t.data;e.deviceList=[{id:"",name:"请选择设备"}].concat(Object(i["a"])(a))}))},borderDeviceCreate:function(){this.dialog.open({state:"create",parent:this,params:this.deviceList})},borderDeviceModify:function(e){this.dialog.open({state:"modify",parent:this,params:e})},borderDeviceload1:function(e){this.record=e,this.visible=!0},clickSave1:function(){var e=this,t=this;t.$refs["form"].validate((function(a){if(a){var r={opsuser:t.form.data.opsuser,opspass:c.a.sm3(t.form.data.opspass)};k(r).then((function(a){"SUCCESS"==a.state?(t.visible=!1,t.$refs["form"].resetFields(),t.borderDeviceload(e.record)):t.$message.error(a.msg)})).catch((function(){t.visible=!1}))}}))},clickCancel1:function(){this.visible=!1,this.$refs["form"].resetFields()},borderDeviceload:function(e){this.dialog.open({state:"load",parent:this,params:e})},borderDeviceDelete:function(e){this.dialog.open({state:"delete",parent:this,params:{id:e}})},update:function(e,t){var a=this;this.page=e||this.page,this.pageSize=t||this.pageSize,this.loading=!0,this.tableList(this.page,this.pageSize,this.searchParams).then((function(e){var t=e.data;t?(a.table.total=null==t.total?0:t.total,a.table.data=t.rows,a.loading=!1):(a.table.total=0,a.table.data=[],a.loading=!1)})).catch((function(){a.loading=!1}))},beforeClickSearch:function(){this.table.data=[],this.table.total=0},afterClearSearchParams:function(){this.beforeClickSearch()},loadMoreInterface:function(){this.table.data.length<this.table.total&&(this.page++,this.update(this.page))},interfaceCreate:function(e,t){this.dialog.open({state:t,title:"新建",parent:this,params:{channelInfoId:e}})},interfaceState:function(e){this.dialog.open({state:"state",parent:this,params:{channelInfoId:e}})}},watch:{$route:function(e,t){var a=this;t.path!==e.path&&this.$nextTick((function(){a.dialog&&a.dialog.close()}))}},beforeDestroy:function(){this.dialog&&this.dialog.close()}},q=M,z=(a("5e0f"),Object($["a"])(q,r,n,!1,null,"8c92a3cc",null));t["default"]=z.exports}}]);