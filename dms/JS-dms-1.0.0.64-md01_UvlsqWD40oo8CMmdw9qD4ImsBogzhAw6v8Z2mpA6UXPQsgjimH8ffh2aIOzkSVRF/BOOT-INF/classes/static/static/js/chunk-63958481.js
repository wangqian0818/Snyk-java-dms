(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63958481"],{"030f":function(e,t,n){"use strict";n("7954")},"0618":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-table",{ref:"table",staticClass:"AStockOutDetailTable",attrs:{columns:e.columns,dataSource:e.data,rowKey:e.rowKey,bordered:e.bordered,loading:e.loading,size:e.size,"row-selection":e.rowSelection,pagination:{current:e.page,pageSize:e.pageSize,total:e.total,pageSizeOptions:e.pageSizeOptions,onChange:e.onPageChange,onShowSizeChange:e.onShowSizeChange,showSizeChanger:e.showSizeChanger,showQuickJumper:e.showQuickJumper,hideOnSinglePage:e.hideOnSinglePage,showTotal:e.showTotal,size:e.size,showLessItems:e.showLessItems},scroll:{y:e.tableHeight}},scopedSlots:e._u([{key:"number",fn:function(t,n,a){return e.showIndex?[e._v(" "+e._s(a+1)+" ")]:void 0}},e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(n,a,r){return[e._t(t,null,null,{text:n,record:a,index:r})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,n,a,r){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:n,indent:a,expanded:r})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return n("template",{slot:t},[e._t(t)],2)}))],2)],1)},r=[],i=(n("a9e3"),n("9b10")),o={name:"BFixedTable",mixins:[i["a"]],props:{columns:{type:Array,required:!0},pageSizeOptions:{type:Array,default:function(){return["10","20","50","100","200"]}},showIndex:{type:Boolean,default:!0},rowKey:String,tableHeight:{type:Number,default:550},beautyScroller:{type:Boolean,default:!0},data:{type:Array,default:function(){return[]}},total:{type:Number,default:0},bordered:{type:Boolean,default:!0},initPage:{type:Number,default:1},initPageSize:{type:Number,default:10},showOuterBorder:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showTotal:{type:Function,default:function(e){return"总共".concat(e,"条")}},showQuickJumper:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},hideOnSinglePage:{type:Boolean,default:!1},showLessItems:{type:Boolean,default:!1},size:{type:String,default:"default"},rootData:{type:Object,default:function(){}},rowSelection:{type:Object,default:function(){return null}}},data:function(){return{page:1,pageSize:10}},mounted:function(){this.fixedHeight(),this.updateData(),this.addIndex(),this.beautyScroller&&this.beautyScroll(),this.showOuterBorder&&this.setOutBorder(),this.page=this.initPage,this.pageSize=this.initPageSize},watch:{initPage:function(e){this.page!==e&&(this.page=e,this.updateData())},initPageSize:function(e){this.pageSize!==e&&(this.pageSize=e,this.updateData())},columns:function(){this.addIndex()},total:function(){this.fixedHeight()},tableHeight:function(){this.fixedHeight()}},methods:{addIndex:function(){this.showIndex&&this.columns.length>0&&"序号"!==this.columns[0].title&&this.columns.unshift({title:"序号",scopedSlots:{customRender:"number"},width:80})},fixedHeight:function(){var e=this,t=this.$refs.table.$el;this.total>0?this.modifyStyleByClass(t,"ant-table-body",{"min-height":"".concat(this.tableHeight,"px"),"max-height":"".concat(this.tableHeight,"px")}):(this.modifyStyleByClass(t,"ant-table-body",{"min-height":"0px","max-height":"".concat(this.tableHeight,"px")}),this.$nextTick((function(){e.modifyStyleByClass(t,"ant-table-placeholder",{"min-height":"".concat(e.tableHeight,"px"),"max-height":"".concat(e.tableHeight,"px")})})))},setOutBorder:function(){var e;null===(e=this.$refs.table.$el.classList)||void 0===e||e.add("ant-card-bordered")},beautyScroll:function(){var e=this.$refs.table.$el.querySelector(".ant-table-hide-scrollbar");e&&(e.classList.add("beauty-scroll"),e.style["margin-bottom"]="",e.style["padding-bottom"]="",e.style["min-width"]="");var t=this.$refs.table.$el.querySelector(".ant-table-body");null===t||void 0===t||t.classList.add("beauty-scroll")},onPageChange:function(e,t){this.page=e,this.pageSize=t,this.updateData()},onShowSizeChange:function(e,t){this.page=1,this.pageSize=t,this.updateData()},updateData:function(){this.$emit("change",{page:this.page,pageSize:this.pageSize,rootData:this.rootData})}}},c=o,s=(n("156c"),n("2877")),l=Object(s["a"])(c,a,r,!1,null,"eb2634aa",null);t["a"]=l.exports},"10d2":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"device-channel-selector"},[n("a-cascader",{staticStyle:{width:"100%"},attrs:{options:e.processedOptions,placeholder:"请选择设备与通道","field-names":{label:"name",value:"id",children:"children"},disabled:e.disabled,allowClear:!1},on:{change:e.handleChange},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}})],1)},r=[],i=n("3835"),o=n("b85c"),c=n("2909"),s=n("5530"),l=(n("25eb"),n("a9e3"),n("d81d"),n("99af"),n("b0c0"),n("d7b0")),u={name:"DeviceChannelSelector",props:{showAllChannels:{type:Boolean,default:!1},clearOnInit:{type:Boolean,default:!1},flag:{type:Boolean,default:!1},activeKeyFlag:{type:String,default:""}},data:function(){var e=localStorage.getItem("dmsType"),t=3;return"1"!==e&&"2"!==e||(t=Number.parseInt(e,10)),{selectedValue:[],dmsType:t,disabled:!1,loading:!1,options:[]}},created:function(){var e=this;this.loading=!0,Object(l["d"])(this.activeKeyFlag).then((function(t){var n=t.data;e.options=n||[],e.loading=!1})).catch((function(){e.options=[],e.loading=!1}))},computed:{processedOptions:function(){return this.showAllChannels&&0!==this.options.length?this.options.map((function(e){var t={id:"",name:"全部通道"};return Object(s["a"])(Object(s["a"])({},e),{},{children:e.children?[t].concat(Object(c["a"])(e.children)):[]})})):this.options}},watch:{options:{immediate:!0,handler:function(e){e&&e.length>0?this.setDefaultSelection():this.selectedValue=[]}},dmsType:function(){this.setDefaultSelection()}},methods:{findNodeById:function(e,t){var n,a=Object(o["a"])(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.id===t)return r;if(r.children&&r.children.length>0){var i=this.findNodeById(r.children,t);if(i)return i}}}catch(c){a.e(c)}finally{a.f()}return null},getChannelInfoByValue:function(e){if(!e||e.length<2)return null;var t=Object(i["a"])(e,2),n=t[0],a=t[1],r=this.findNodeById(this.options,n);if(!r||!r.children)return null;var o=this.findNodeById(r.children,a);return o?{sn:o.sn||"",channelName:o.name||"",channelType:o.channelType||"",deviceNodeName:o.deviceNodeName||"",deviceType:o.deviceType||"",deviceId:n,channelInfoId:a}:null},setDefaultSelection:function(){var e=this;this.loading=!0,this.$nextTick((function(){if(e.clearOnInit)return e.selectedValue=[],void(e.loading=!1);if(0===e.processedOptions.length)return e.selectedValue=[],void(e.loading=!1);var t=e.processedOptions[0];switch(e.dmsType){case 1:e.disabled=!0,t.children&&t.children.length>0&&(e.selectedValue=[t.id,t.children[0].id]);break;case 2:t.children&&t.children.length>0&&(e.selectedValue=[t.id,t.children[0].id]);break;case 3:t.children&&t.children.length>0&&(e.selectedValue=[t.id,t.children[0].id]);break;default:e.selectedValue=[]}if(e.loading=!1,e.selectedValue.length>0){var n=e.getChannelInfoByValue(e.selectedValue);e.$emit("change",e.selectedValue,n)}}))},resetSelection:function(){this.selectedValue=[],this.setDefaultSelection()},clearSelection:function(){this.selectedValue=[]},handleChange:function(e){this.selectedValue=e;var t=this.getChannelInfoByValue(e);this.$emit("change",e,t)},getSelectedValue:function(){return this.selectedValue},getSelectedChannelInfo:function(){return this.getChannelInfoByValue(this.selectedValue)}}},d=u,p=(n("296d"),n("2877")),f=Object(p["a"])(d,a,r,!1,null,"5ab0cc82",null);t["a"]=f.exports},"156c":function(e,t,n){"use strict";n("1bbf")},"1bbf":function(e,t,n){},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("6b75");function r(e){if(Array.isArray(e))return Object(a["a"])(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=n("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return r(e)||i(e)||Object(o["a"])(e)||c()}},"296d":function(e,t,n){"use strict";n("e9bd")},7954:function(e,t,n){},a51f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-card",{staticStyle:{"margin-top":"30px"}},[n("div",{staticClass:"search"},[n("div",{staticClass:"title"},[e._v("查询条件")]),n("div",{staticClass:"content"},[n("span",[e._v("关键字:")]),1!=e.dmsType?n("span",{staticClass:"inner"},[n("b-cascader",{ref:"cascaderRef",attrs:{"show-all-channels":!0,"clear-on-init":!0},on:{change:e.cascaderHandler}})],1):e._e(),n("span",{staticClass:"inner"},[n("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入ip"},on:{pressEnter:e.clickSearch},model:{value:e.search.ip,callback:function(t){e.$set(e.search,"ip",t)},expression:"search.ip"}})],1),n("span",{staticClass:"inner"},[n("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入MAC"},on:{pressEnter:e.clickSearch},model:{value:e.search.mac,callback:function(t){e.$set(e.search,"mac",t)},expression:"search.mac"}})],1),n("span",{staticClass:"inner"},[n("a-select",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入状态"},on:{pressEnter:e.clickSearch},model:{value:e.search.state,callback:function(t){e.$set(e.search,"state",t)},expression:"search.state"}},[n("a-select-option",{attrs:{value:"-1"}},[e._v("未下发")]),n("a-select-option",{attrs:{value:"1"}},[e._v("已下发")]),n("a-select-option",{attrs:{value:"2"}},[e._v("未生效")]),n("a-select-option",{attrs:{value:"3"}},[e._v("已生效")])],1)],1),n("span",{staticClass:"outer"},[n("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){return e.clickSearch(1)}}},[e._v("查询")])],1),n("span",{staticClass:"outer"},[n("a-button",{staticClass:"button",on:{click:e.resetSearch1}},[e._v("重置")])],1)])]),n("div",{staticClass:"body"},[n("a-spin",{attrs:{spinning:e.spinning,tip:"正在导入数据，请稍等！"}},[n("div",{staticClass:"buttons"},[e.readOnly?e._e():n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.borderDeviceCreate}},[e._v("新建")]),e.readOnly?e._e():n("a-button",{attrs:{type:"primary",icon:"cloud-download"},on:{click:function(t){return e.importData(e.templateUrl)}}},[e._v("下载模板")]),e.readOnly?e._e():n("a-upload",{attrs:{name:"file",action:""+e.BASE_URL+e.importUrl,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","show-upload-list":!1},on:{change:e.handleImportChange}},[n("a-button",{attrs:{type:"primary",icon:"import"}},[e._v("批量导入")])],1),e.readOnly?e._e():n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:function(t){return e.exportData(e.exportUrl,1)}}},[e._v("批量导出")]),n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:e.batchDispatch}},[e._v("批量下发")]),n("a-button",{attrs:{type:"primary",icon:"delete"},on:{click:e.batchRemove}},[e._v("批量移除")]),n("a-button",{attrs:{type:"primary",icon:"delete"},on:{click:e.batchDelete}},[e._v("批量删除")]),n("a-button",{attrs:{type:"primary",icon:"sync"},on:{click:function(t){return e.clickSearch(1)}}},[e._v("刷新")])],1),n("div",{staticClass:"title"},[e._v("查询结果")]),n("a-row",{staticClass:"table"},[n("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[n("span",{staticStyle:{position:"absolute",top:"-25px",left:"12px",color:"#c8c8c8"}},[e.operations.selectedRowKeys.length>0?[e._v(e._s("已选中 "+e.operations.selectedRowKeys.length+" 项"))]:e._e()],2),n("b-fixed-table",{attrs:{columns:e.columns,rowKey:"id",data:e.table.data,total:e.table.total,"row-selection":e.rowSelection,loading:e.loading,"init-page":e.page},on:{change:e.tableParamChanged},scopedSlots:e._u([{key:"workState",fn:function(t){var a=t.record;return[n("span",{domProps:{innerHTML:e._s(e.convertWorkStateHtml(a.workState))}})]}},{key:"deleting",fn:function(t){var a=t.record;return[0==a.deleting?n("span",{staticStyle:{color:"#47b596"}},[e._v("正常")]):n("span",{staticClass:"oper red"},[e._v("删除中")])]}},{key:"operations",fn:function(t){var a=t.record;return[e.readOnly?e._e():n("span",[n("span",{staticClass:"oper",on:{click:function(t){return e.borderDeviceDispatch(a.id)}}},[e._v("下发")])]),e.readOnly?e._e():n("span",{staticClass:"oper-margin"},[n("span",{staticClass:"oper",on:{click:function(t){return e.borderDeviceRemove(a.id)}}},[e._v("移除")])]),e.readOnly?e._e():n("span",{staticClass:"oper-margin"},[n("span",{staticClass:"oper",on:{click:function(t){return e.borderDeviceModify(a)}}},[e._v("修改")])]),e.readOnly?e._e():n("span",{staticClass:"oper-margin"},[n("span",{staticClass:"oper red",on:{click:function(t){return e.borderDeviceDelete(a.id)}}},[e._v("删除")])])]}}])})],1)],1)],1)],1)])],1)},r=[],i=(n("ac1f"),n("841c"),n("e9c4"),n("c2f2")),o=n("0618"),c=n("8cff"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.form.init.show?n("div",[n("a-modal",{attrs:{closable:!0,title:e.form.init.title,width:e.form.init.width,"mask-closable":!1,footer:"import"===e.form.name||"batchDelete"===e.form.name||"batchDispatch"===e.form.name||"batchRemove"===e.form.name?null:void 0},model:{value:e.form.init.show,callback:function(t){e.$set(e.form.init,"show",t)},expression:"form.init.show"}},["delete"===e.form.name?n("div",[e._v("确定删除？")]):"import"===e.form.name||"batchDelete"===e.form.name||"batchDispatch"===e.form.name||"batchRemove"===e.form.name?n("div",[n("div",{staticStyle:{height:"50px","line-height":"50px","font-size":"16px",color:"#0ab1c5"}},[n("span",[e._v(e._s(e.form.init.data.msg))])]),n("a-table",{attrs:{pagination:{pageSize:20,size:"small"},rowKey:"number",columns:e.importColumns,"data-source":e.form.init.data.rows}})],1):"dispatch"===e.form.name?n("div",[e._v("确定下发？")]):"remove"===e.form.name?n("div",[e._v("确定移除？")]):"detail"===e.form.name?n("div",[n("table",{staticStyle:{width:"100%"}},e._l(e.form.init.data.info,(function(t,a){return n("tr",{key:a},[n("td",[e._v(e._s(a))]),n("td",[e._v(e._s(t))])])})),0)]):n("a-form-model",{ref:"form",attrs:{model:e.form.init.data,rules:e.form.init.rules,"label-col":{span:e.form.init.labelSpan||5},"wrapper-col":{span:e.form.init.wrapperSpan||19}}},[void 0!==e.form.init.data.channelInfoId&&1!=e.dmsType?n("a-form-model-item",{attrs:{label:"设备名称",prop:"channelInfoId"}},[n("a-cascader",{ref:"cascaderRef",staticStyle:{width:"100%"},attrs:{options:e.options,placeholder:"请选择设备与通道","field-names":{label:"name",value:"id",children:"children"},disabled:"create"!=e.form.name,"allow-clear":""},on:{change:e.handleCascaderChange},model:{value:e.cascaderValue,callback:function(t){e.cascaderValue=t},expression:"cascaderValue"}})],1):e._e(),void 0!==e.form.init.data.ip?n("a-form-model-item",{attrs:{label:"IP",prop:"ip"}},[n("a-input",{attrs:{disabled:"modify"===e.form.name,placeholder:"请输入IP地址",maxLength:28},model:{value:e.form.init.data.ip,callback:function(t){e.$set(e.form.init.data,"ip",t)},expression:"form.init.data.ip"}})],1):e._e(),void 0!==e.form.init.data.mac?n("a-form-model-item",{attrs:{label:"MAC",prop:"mac"}},[n("a-input",{attrs:{placeholder:"请输入MAC",maxLength:48},model:{value:e.form.init.data.mac,callback:function(t){e.$set(e.form.init.data,"mac",t)},expression:"form.init.data.mac"}})],1):e._e(),void 0!==e.form.init.data.workArea&&2===e.deviceType?n("a-form-model-item",{attrs:{label:"生效区域",prop:"workArea"}},[n("a-select",{attrs:{disabled:"modify"===e.form.name},model:{value:e.form.init.data.workArea,callback:function(t){e.$set(e.form.init.data,"workArea",t)},expression:"form.init.data.workArea"}},[n("a-select-option",{attrs:{value:""}},[e._v("请选择生效区域")]),n("a-select-option",{attrs:{value:"A"}},[e._v("A机")]),n("a-select-option",{attrs:{value:"B"}},[e._v("B机")])],1)],1):e._e()],1),n("template",{slot:"footer"},[n("a-button",{attrs:{type:"primary",loading:e.form.init.confirmLoading},on:{click:function(t){return e.clickSave()}}},[e._v(e._s("create"===e.form.name||"modify"===e.form.name?"保存及下发":"确定"))]),n("a-button",{on:{click:function(t){return e.clickCancel()}}},[e._v("取消")])],1)],2)],1):e._e()},l=[],u=n("5530"),d=n("a00a"),p=n("1da1"),f=(n("96cf"),n("99af"),n("b775"));function h(e,t,n){return m.apply(this,arguments)}function m(){return m=Object(p["a"])(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("device/border-device-ip-macs?offset=".concat((t-1)*n,"&limit=").concat(n,"&search=").concat(a),f["a"].GET));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return b=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("device/border-device-ip-mac",f["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return y=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,e.abrupt("return",Object(f["f"])("device/border-device-ip-mac/".concat(n),f["a"].DELETE));case 2:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(e){return S.apply(this,arguments)}function S(){return S=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.ids,e.abrupt("return",Object(f["f"])("device/border-device-ip-mac/batch-delete?ids=".concat(n),f["a"].DELETE));case 2:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function x(e){return k.apply(this,arguments)}function k(){return k=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("device/border-device-ip-mac",f["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function C(e){return _.apply(this,arguments)}function _(){return _=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,e.abrupt("return",Object(f["f"])("device/border-device-ip-mac/send/".concat(n),f["a"].PUT));case 2:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function O(e){return D.apply(this,arguments)}function D(){return D=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,e.abrupt("return",Object(f["f"])("device/border-device-ip-mac/remove/".concat(n),f["a"].POST));case 2:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function I(e){return R.apply(this,arguments)}function R(){return R=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.ids,e.abrupt("return",Object(f["f"])("device/border-device-ip-mac/send-more/".concat(n),f["a"].PUT));case 2:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function $(e){return T.apply(this,arguments)}function T(){return T=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.ids,e.abrupt("return",Object(f["f"])("device/border-device-ip-mac/batch-remove/".concat(n),f["a"].POST));case 2:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}var B=n("40a7"),A=(n("d7b0"),{name:"BorderDeviceIpMacDialog",components:{},mixins:[i["a"]],data:function(){return{locale:B["a"],ifaceList:[{id:"",name:"请选择接口"}],deviceList:[{id:"",name:"请选择设备"}],deviceType:"",form:{create:{title:"新建",width:450,request:v,show:!0,confirmLoading:!1,data:{id:"",deviceId:"",channelInfoId:"",ip:"",mac:"",workArea:""},rules:{channelInfoId:d["a"].select,ip:d["a"].ip1,mac:d["a"].mac,workArea:d["a"].select}},modify:{title:"修改",width:450,request:x,show:!0,confirmLoading:!1,data:{id:"",deviceId:"",channelInfoId:"",ip:"",mac:"",workArea:""},rules:{channelInfoId:d["a"].select,ip:d["a"].ip1,mac:d["a"].mac,workArea:d["a"].select}},delete:{title:"删除",width:420,request:g,show:!0,confirmLoading:!1,data:{id:""},rules:{}},batchDelete:{title:"批量删除",width:700,show:!0,data:{msg:"",rows:[]},rules:{}},dispatch:{title:"下发",width:420,request:C,show:!0,confirmLoading:!1,data:{id:""},rules:{}},remove:{title:"移除",width:420,request:O,show:!0,confirmLoading:!1,data:{id:""},rules:{}},batchDispatch:{title:"批量下发",width:700,show:!0,data:{msg:"",rows:[]},rules:{}},batchRemove:{title:"批量移除",width:700,show:!0,data:{msg:"",rows:[]},rules:{}},import:{title:"导入",width:700,show:!0,data:{msg:"",rows:[]},rules:{}}}}},watch:{},created:function(){this.showDialog(this.state,this.params),"create"!=this.state&&"modify"!=this.state||this.loadCascaderData()},methods:{beforeShowDialog:function(e,t){var n=this;"modify"===e?(this.form.init.data=Object(u["a"])({},t.data),this.$nextTick((function(){n.setCascaderEchoValue()}))):"create"===e&&(this.cascaderValue=[])},close:function(){this.form.init.show=!1},update:function(){this.parent.update()}}}),j=A,z=n("2877"),V=Object(z["a"])(j,s,l,!1,null,"4c178db8",null),P=V.exports,L=new c["a"](P),U=n("d9f9"),E=n("10d2"),H="template/border-device-ip-mac1.xlsx",N="template/border-device-ip-mac2.xlsx",K=[{title:"设备名称",dataIndex:"deviceName"},{title:"IP",dataIndex:"ip"},{title:"MAC",dataIndex:"mac"},{title:"状态",ellipsis:!0,scopedSlots:{customRender:"workState"}},{title:"数据状态",ellipsis:!0,scopedSlots:{customRender:"deleting"}},{title:"操作",scopedSlots:{customRender:"operations"}}],M={name:"AreaManage",components:{BFixedTable:o["a"],BCascader:E["a"]},mixins:[i["a"]],filters:{},props:{},data:function(){return{readOnly:!1,templateUrl:"",importUrl:"device/border-device-ip-mac/import-data",exportUrl:"device/border-device-ip-mac/export-data",batchDeleteUrl:w,batchDispatchUrl:I,batchRemoveUrl:$,dialog:L,columns:K,loading:!1,spinning:!1,table:{data:[],total:0},search:{deviceId:"",channelInfoId:"",ip:"",mac:"",state:void 0}}},created:function(){this.readOnly=JSON.parse(localStorage.getItem("device-ip-mac"))||!1},computed:{},mounted:function(){var e=this.detectDeviceType();this.templateUrl=e?H:N},methods:{convertWorkStateHtml:U["J"],cascaderHandler:function(e){this.search.deviceId=e[0],this.search.channelInfoId=e[1]},resetSearch1:function(){this.$refs.cascaderRef&&this.$refs.cascaderRef.resetSelection(),this.search={deviceId:"",channelInfoId:"",ip:"",mac:"",state:void 0},this.clickSearch()},update:function(e,t){var n=this;n.operations={selectedRowKeys:[],page:1,selectedRows:[],state:!0,loading:!1},this.page=e||this.page,this.pageSize=t||this.pageSize,this.loading=!0;var a=encodeURIComponent(JSON.stringify(this.search));h(this.page,this.pageSize,a).then((function(e){var t=e.data;t&&(n.table.total=null==t.total?0:t.total,n.table.data=t.rows,n.loading=!1)})).catch((function(){n.loading=!1}))},borderDeviceCreate:function(){this.dialog.open({state:"create",parent:this})},borderDeviceModify:function(e){this.dialog.open({state:"modify",parent:this,params:e})},borderDeviceDispatch:function(e){this.dialog.open({state:"dispatch",parent:this,params:{id:e}})},borderDeviceRemove:function(e){this.dialog.open({state:"remove",parent:this,params:{id:e}})},borderDeviceDelete:function(e){this.dialog.open({state:"delete",parent:this,params:{id:e}})},batchDispatch:function(){var e=this,t="".concat(e.operations.selectedRowKeys)||"";if(!t)return e.$message.warn("请选择需要批量下发的项！");e.$confirm({content:"确认批量下发吗？",okText:"确认",cancelText:"取消",onOk:function(){e.batchDispatchUrl({ids:t}).then((function(t){var n=t.data,a=t.state,r=t.msg;"SUCCESS"==a?(n.rows.length>0?e.dialog.open({state:"batchDelete",params:n,parent:e}):e.$message.success("批量下发成功！"),e.update(1)):e.$message.error(r)}))},onCancel:function(){}})},batchRemove:function(){var e=this,t="".concat(e.operations.selectedRowKeys)||"";if(!t)return e.$message.warn("请选择需要批量移除的项！");e.$confirm({content:"确认批量移除吗？",okText:"确认",cancelText:"取消",onOk:function(){e.batchRemoveUrl({ids:t}).then((function(t){var n=t.data,a=t.state,r=t.msg;"SUCCESS"==a?(n.rows.length>0?e.dialog.open({state:"batchRemove",params:n,parent:e}):e.$message.success("批量移除成功！"),e.update(1)):e.$message.error(r)}))},onCancel:function(){}})},batchDelete:function(){var e=this,t="".concat(e.operations.selectedRowKeys)||"";if(!t)return e.$message.warn("请选择需要批量删除的项！");e.$confirm({content:"确认批量删除吗？",okText:"确认",cancelText:"取消",onOk:function(){e.batchDeleteUrl({ids:t}).then((function(t){var n=t.data,a=t.state;t.msg;"SUCCESS"==a&&(n.rows.length>0?e.dialog.open({state:"batchDelete",params:n,parent:e}):e.$message.success("批量删除成功！"),e.update(1))}))},onCancel:function(){}})},handleImportChange:function(e){this.spinning=!0,"done"==e.file.status&&e.file.response.state&&("SUCCESS"==e.file.response.state&&(e.file.response.data.rows.length>0?(this.spinning=!1,this.dialog.open({state:"import",params:e.file.response.data,parent:this}),this.clickSearch()):(this.$message.success(e.file.response.data.msg),this.spinning=!1,this.clickSearch())),"FAIL"==e.file.response.state&&(this.$message.error(e.file.response.msg),this.spinning=!1,this.clickSearch()))}},watch:{$route:function(e,t){var n=this;t.path!==e.path&&this.$nextTick((function(){n.dialog&&n.dialog.close()}))}},beforeDestroy:function(){this.dialog&&this.dialog.close()}},q=M,F=(n("030f"),Object(z["a"])(q,a,r,!1,null,"1bb98d22",null));t["default"]=F.exports},d9f9:function(e,t,n){"use strict";n.d(t,"w",(function(){return i})),n.d(t,"H",(function(){return o})),n.d(t,"I",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"B",(function(){return l})),n.d(t,"J",(function(){return u})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"r",(function(){return b})),n.d(t,"G",(function(){return g})),n.d(t,"x",(function(){return y})),n.d(t,"s",(function(){return w})),n.d(t,"o",(function(){return S})),n.d(t,"C",(function(){return x})),n.d(t,"t",(function(){return k})),n.d(t,"F",(function(){return C})),n.d(t,"n",(function(){return _})),n.d(t,"i",(function(){return O})),n.d(t,"q",(function(){return I})),n.d(t,"y",(function(){return R})),n.d(t,"z",(function(){return $})),n.d(t,"D",(function(){return T})),n.d(t,"A",(function(){return B})),n.d(t,"g",(function(){return A})),n.d(t,"p",(function(){return z})),n.d(t,"j",(function(){return V})),n.d(t,"u",(function(){return U})),n.d(t,"E",(function(){return E})),n.d(t,"c",(function(){return N})),n.d(t,"b",(function(){return K})),n.d(t,"d",(function(){return M})),n.d(t,"e",(function(){return q})),n.d(t,"v",(function(){return F})),n.d(t,"k",(function(){return J})),n.d(t,"f",(function(){return W}));n("99af"),n("d81d"),n("ac1f"),n("1276"),n("b680"),n("a9e3");var a=n("c1df"),r=n.n(a);function i(e){var t={1:"正常",2:"异常",3:"离线",4:"异常及离线"};return t[e]||"未知"}function o(e){var t={"-1":"未下发",1:"已下发",2:"未生效",3:"已生效",4:"已移除",5:"下发审批中",6:"下发审批不通过",7:"下发审批通过",8:"移除审批中",9:"移除审批不通过",10:"移除审批通过",11:"下发失败",12:"移除失败",13:"未审批",14:"申请下发撤回",15:"申请移除撤回"};return t[e]||"-"}function c(e){var t={true:"启用",false:"禁用"};return t[e]||"-"}function s(e){var t={1:"BASE64"};return t[e]||""}function l(e){var t={1:"浏览安全策略",2:"文件传输策略",3:"邮件策略",4:"定制应用策略",5:"内容审查策略",6:"流量控制策略",7:"网络安全策略",8:"域间标记策略",9:"SQL审查策略",10:"RTSP过滤",11:"SIP过滤",12:"应用安全标记",13:"文件名称过滤",14:"文件后缀名过滤",15:"文件类型过滤",16:"虚拟桌面协议过滤策略"};return t[e]||"-"}function u(e){var t={1:"#faa351",3:"#47b596",2:"#f05252"};return'<span style="color: '.concat(t[e]||"#000",';">').concat(o(e),"</span>")}function d(e){var t={false:"否",true:"是"};return t[e]||"-"}function p(e){var t={true:"#12a130",false:"#d42d33"};return'<span style="color: '.concat(t[e]||"#000",';cursor: pointer;">').concat(d(e),"</span>")}function f(e){var t={false:"禁用",true:"启用"};return t[e]||"-"}function h(e){var t={true:"#12a130",false:"#d42d33"};return'<span style="color: '.concat(t[e]||"#000",';cursor: pointer;">').concat(f(e),"</span>")}function m(e){var t={false:"未开启",true:"已开启"};return t[e]||"未开启"}function v(e){var t={true:"#12a130",false:"#d42d33"};return'<span style="color: '.concat(t[e]||"#d42d33",';cursor: pointer;">').concat(m(e),"</span>")}function b(e){var t={1:"限速",2:"限容"};return t[e]||"-"}function g(e){var t={2:"独享模式",1:"共享模式"};return t[e]||"-"}function y(e){var t={1:"信息级",2:"低危级",3:"中危级",4:"高危级",5:"严重级"};return t[e]||"-"}function w(e){var t={1:"转换",2:"透传",3:"去标"};return t[e]||"-"}function S(e){var t={1:"正在执行",2:"执行结束",3:"执行错误",4:"取消执行"};return t[e]||"-"}function x(e,t){return t=t||"YYYY-MM-DD HH:mm:ss",e?r()(e).format(t):"-"}function k(e){var t={1:"type1",2:"type2",3:"type3",4:"type4",5:"type5",6:"type6",7:"type7"};return t[e]||"-"}function C(e){var t={1:"机密性",2:"完整性"};return t[e]||"-"}function _(e){var t={1:"允许",2:"阻断"};return t[e]||"-"}function O(e){var t="";return e=e||[],e.map((function(n,a){t+=n+(e[a+1]?"; ":"")})),t}function D(e){var t={1:"UP",2:"DOWN"};return t[e]||"DOWN"}function I(e){var t={1:"#47b596"};return'<span style="color: '.concat(t[e]||"#f05252",';">').concat(D(e),"</span>")}function R(e){var t={true:"启用",false:"禁用"};return t[e]||"-"}function $(e){var t={true:"#12a130",false:"#d42d33"};return'<span style="color: '.concat(t[e]||"#000",';">').concat(R(e),"</span>")}function T(e){var t={1:"时间模式",2:"超时模式",3:"周期模式"};return t[e]||"-"}function B(e){var t={1:"URI",2:"邮件地址",3:"内容关键字",4:"邮件主题关键字"};return t[e]||"-"}function A(e){var t=e?e.split(","):[],n=[];return t&&t[0]&&t.map((function(e){n.push(j(e))})),L(n)}function j(e){var t={main:"主通道",display:"显示通道",inputs:"输入通道",cursor:"光标通道",playback:"播放通道",record:"录音通道",tunnel:"隧道通道",smartcard:"SMARTCARD通道",usbredir:"USB通道",port:"PORT通道",webdav:"WEBDAV通道"};return t[e]||"-"}function z(e){var t={1:"A->B",2:"B->A"};return t[e]||"-"}function V(e){var t={1:"数据业务",2:"管理业务"};return t[e]||"-"}function P(e){var t={1:"忽略大小写",2:"包含换行符",3:"多行锚定",4:"仅匹配模式",5:"逻辑组合"};return t[e]||"-"}function L(e){var t="";return e.map((function(n,a){t+=n+(e[a+1]?";":"")})),t}function U(e){var t=e?e.split(";"):[],n=[];return t&&t[0]&&t.map((function(e){n.push(P(e))})),L(n)}function E(e){var t=e?e.split(","):[],n=[];return t&&t[0]&&t.map((function(e){n.push(H(e))})),L(n)}function H(e){var t={Insert:"插入",Update:"更新",Delete:"删除"};return t[e]||"-"}function N(e){var t={1:"管控登录告警",2:"域间标记告警",3:"网络访问控制告警",4:"应用安全告警",5:"设备离线告警",6:"设备异常告警",7:"日志容量告警",8:"设备状态告警",9:"入侵检测告警",10:"认证告警",11:"基线核查告警",12:"文件过滤告警",13:"IP/MAC绑定告警",14:"DDoS攻击防护告警",15:"病毒防护告警",16:"WAF告警",17:"关键字过滤告警",18:"自定义协议检查告警",19:"虚拟桌面协议过滤告警",20:"数据加解密告警"};return t[e]||"-"}function K(e){var t={1:"全部",2:"邮件"};return t[e]||"-"}function M(e){var t=e?e.split(";"):[],n=[];return t&&t[0]&&t.map((function(e){n.push(y(Number(e)))})),L(n)}function q(e){var t={1:"登录异常",2:"流量异常",3:"标记拒绝",4:"ACL命中",5:"网页访问拒绝",6:"文件传输拒绝",7:"邮件传输拒绝",8:"定制策略拒绝",9:"DDoS攻击防御",10:"CC攻击防御",11:"WAF防御"};return t[e]||"-"}function F(e){var t={1:"已通知",2:"未通知"};return t[e]||"-"}function J(e){var t={1:"已处理",2:"处理中",3:"未处理"};return t[e]||"-"}function W(e){var t={0:"轮询均衡模式",1:"主备模式",2:"HASH均衡模式",3:"广播模式",4:"动态链接模式",5:"发送负载均衡模式",6:"收发负载均衡模式"};return t[e]||"-"}},e9bd:function(e,t,n){}}]);