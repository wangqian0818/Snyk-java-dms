(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57049a4c"],{"08ee":function(e,t,a){},"35cd":function(e,t,a){"use strict";a("08ee")},6706:function(e,t,a){},"6e67":function(e,t,a){},"7a3a":function(e,t,a){"use strict";a("6706")},"8fcb":function(e,t,a){"use strict";a("6e67")},f1ed:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"title"},[e._v("查询条件")]),a("div",{staticClass:"content"},[a("span",[e._v("关键字:")]),a("span",{staticClass:"inner"},[a("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入用户名"},on:{pressEnter:e.clickSearch},model:{value:e.search.search,callback:function(t){e.$set(e.search,"search",t)},expression:"search.search"}})],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){return e.clickSearch(1)}}},[e._v("查询")])],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",on:{click:e.resetSearch}},[e._v("重置")])],1)])]),a("div",{staticClass:"body"},[a("div",{staticClass:"buttons"},[e.readOnly?e._e():a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.createUser}},[e._v("新建")])],1),a("a-row",{staticClass:"table"},[a("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("b-fixed-expand-table",{attrs:{columns:e.columns,data:e.users.data,total:e.users.total,resetExpanded:e.resetExpanded,rowKey:"userId",loading:e.loading,expandRowByClick:!1},on:{change:e.tableParamChanged,expand:e.tableExpand},scopedSlots:e._u([{key:"name",fn:function(t){var n=t.record;return[n.name?a("span",{attrs:{title:n.name}},[e._v(e._s(n.name))]):a("span",[e._v("-")])]}},{key:"responsibility",fn:function(t){var n=t.record;return["approver"==n.name?a("span",[e._v("降密脱敏文件审核")]):n.responsibility?a("span",{attrs:{title:n.responsibility}},[e._v(e._s(n.responsibility))]):a("span",[e._v("-")])]}},{key:"operations",fn:function(t){var n=t.record;return[e.readOnly||"approver"==n.name?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.associateClient(n)}}},[e._v("绑定信息交换设备")])]),e.readOnly?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.modifyUser(n)}}},[e._v("修改")])]),e.readOnly||"approver"==n.name?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper red",on:{click:function(t){return e.deleteUser(n.userId)}}},[e._v("删除")])])]}},{key:"expandedRowRender",fn:function(t){var n=t.record;return[a("a-table",{attrs:{columns:e.expandedColumns,dataSource:e.expandedData[n.userId],rowKey:"entityId",pagination:!1,bordered:""},scopedSlots:e._u([{key:"logined",fn:function(t){return[a("a-tag",{attrs:{color:t.logined?"green":"red"}},[e._v(e._s(e._f("loginedFilter")(t.logined)))])]}},{key:"loginTimestamp",fn:function(t){return[t.gmtLogin?a("span",[e._v(e._s(e._f("time")(t.gmtLogin,"YYYY-MM-DD HH:mm:ss")))]):a("span",[e._v("-")])]}},{key:"operations",fn:function(t){return[e.readOnly||"approver"==n.name?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper red",on:{click:function(a){return e.unbindDevice(t)}}},[e._v("解绑信息交换设备")])])]}}],null,!0)})]}}])})],1)],1)],1)])],1)},r=[],i=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-table",{ref:"table",staticClass:"AStockOutDetailTable",attrs:{columns:e.columns,dataSource:e.data,rowKey:e.rowKey,bordered:e.bordered,loading:e.loading,size:e.size,"row-selection":e.rowSelection,expandRowByClick:e.expandRowByClick,expandedRowKeys:e.expandedRowKeys,pagination:{current:e.page,pageSize:e.pageSize,total:e.total,pageSizeOptions:e.pageSizeOptions,onChange:e.onPageChange,onShowSizeChange:e.onShowSizeChange,showSizeChanger:e.showSizeChanger,showQuickJumper:e.showQuickJumper,hideOnSinglePage:e.hideOnSinglePage,showTotal:e.showTotal,size:e.size,showLessItems:e.showLessItems}},on:{expand:e.tableExpand,"update:expandedRowKeys":function(t){e.expandedRowKeys=t},"update:expanded-row-keys":function(t){e.expandedRowKeys=t}},scopedSlots:e._u([{key:"number",fn:function(t,a,n){return e.showIndex?[e._v(" "+e._s(n+1)+" ")]:void 0}},e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(a,n,r){return[e._t(t,null,null,{text:a,record:n,index:r})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,a,n,r){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:a,indent:n,expanded:r})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return a("template",{slot:t},[e._t(t)],2)}))],2)],1)}),s=[],o=(a("a9e3"),a("9b10")),d={name:"BFixedTable",mixins:[o["a"]],props:{columns:{type:Array,required:!0},pageSizeOptions:{type:Array,default:function(){return["10","20","50","100","200"]}},showIndex:{type:Boolean,default:!0},expandRowByClick:{type:Boolean,default:!1},rowKey:String,tableHeight:{type:Number,default:550},beautyScroller:{type:Boolean,default:!0},data:{type:Array,default:function(){return[]}},total:{type:Number,default:0},bordered:{type:Boolean,default:!0},initPage:{type:Number,default:1},initPageSize:{type:Number,default:10},showOuterBorder:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showTotal:{type:Function,default:function(e){return"总共".concat(e,"条")}},showQuickJumper:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},hideOnSinglePage:{type:Boolean,default:!1},showLessItems:{type:Boolean,default:!1},size:{type:String,default:"default"},rootData:{type:Object,default:function(){}},rowSelection:{type:Object,default:function(){return null}},resetExpanded:{type:Boolean,default:!1}},data:function(){return{page:1,pageSize:10,expandedRowKeys:[]}},mounted:function(){this.fixedHeight(),this.updateData(),this.addIndex(),this.beautyScroller&&this.beautyScroll(),this.showOuterBorder&&this.setOutBorder(),this.page=this.initPage,this.pageSize=this.initPageSize},watch:{initPage:function(e){this.page!==e&&(this.page=e,this.updateData())},initPageSize:function(e){this.pageSize!==e&&(this.pageSize=e,this.updateData())},columns:function(){this.addIndex()},total:function(){this.fixedHeight()},tableHeight:function(){this.fixedHeight()},resetExpanded:function(e){1==this.resetExpanded&&(this.expandedRowKeys=[])}},methods:{addIndex:function(){this.showIndex&&this.columns.length>0&&"序号"!==this.columns[0].title&&this.columns.unshift({title:"序号",scopedSlots:{customRender:"number"},width:80})},fixedHeight:function(){var e=this,t=this.$refs.table.$el;this.total>0?this.modifyStyleByClass(t,"ant-table-body",{"min-height":"".concat(this.tableHeight,"px"),"max-height":"".concat(this.tableHeight,"px")}):(this.modifyStyleByClass(t,"ant-table-body",{"min-height":"0px","max-height":"".concat(this.tableHeight,"px")}),this.$nextTick((function(){e.modifyStyleByClass(t,"ant-table-placeholder",{"min-height":"".concat(e.tableHeight,"px"),"max-height":"".concat(e.tableHeight,"px")})})))},setOutBorder:function(){var e;null===(e=this.$refs.table.$el.classList)||void 0===e||e.add("ant-card-bordered")},beautyScroll:function(){var e=this.$refs.table.$el.querySelector(".ant-table-hide-scrollbar");e&&(e.classList.add("beauty-scroll"),e.style["margin-bottom"]="",e.style["padding-bottom"]="",e.style["min-width"]="");var t=this.$refs.table.$el.querySelector(".ant-table-body");null===t||void 0===t||t.classList.add("beauty-scroll")},onPageChange:function(e,t){this.expandedRowKeys=[],this.page=e,this.pageSize=t,this.updateData()},onShowSizeChange:function(e,t){this.page=1,this.pageSize=t,this.updateData()},updateData:function(){this.expandedRowKeys=[],this.$emit("change",{page:this.page,pageSize:this.pageSize,rootData:this.rootData})},tableExpand:function(e,t){this.expandedRowKeys=e?[t.id]:[],this.$emit("expand",{expanded:e,record:t,expandedRowKeys:this.expandedRowKeys})}}},c=d,l=(a("8fcb"),a("2877")),u=Object(l["a"])(c,i,s,!1,null,"04522cc0",null),p=u.exports,m=a("1da1"),f=(a("96cf"),a("99af"),a("b775"));function h(e,t,a){return g.apply(this,arguments)}function g(){return g=Object(m["a"])(regeneratorRuntime.mark((function e(t,a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("client/system/users?offset=".concat((t-1)*a,"&limit=").concat(a).concat(n),f["a"].GET));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return y=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("client/system/user",f["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(e){return x.apply(this,arguments)}function x(){return x=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("client/bind-user-client",f["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function v(e){return S.apply(this,arguments)}function S(){return S=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("client/xftp/config",f["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function P(e){return k.apply(this,arguments)}function k(){return k=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("client/jsp/config",f["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function I(e,t){return C.apply(this,arguments)}function C(){return C=Object(m["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("client/jsp/config?entityId=".concat(t,"&userId=").concat(a),f["a"].GET));case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function _(e){return O.apply(this,arguments)}function O(){return O=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.userId,e.abrupt("return",Object(f["f"])("client/system/user/".concat(a),f["a"].DELETE));case 2:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function R(e){return T.apply(this,arguments)}function T(){return T=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("client/system/user",f["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function $(e){return j.apply(this,arguments)}function j(){return j=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["f"])("client/system/user/reset",f["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}var D=a("8cff"),L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.form.init.show?a("div",[a("a-modal",{attrs:{closable:!0,title:e.form.init.title,width:650,"mask-closable":!1,footer:"addState"===e.form.name?null:void 0},model:{value:e.form.init.show,callback:function(t){e.$set(e.form.init,"show",t)},expression:"form.init.show"}},["unlogin"===e.form.name||"unlock"===e.form.name||"delete"===e.form.name?a("div",[e._v(e._s(e.form.init.msg)+" ")]):"addState"===e.form.name?a("div",[a("div",{staticStyle:{height:"50px","line-height":"50px","font-size":"16px",color:"#0ab1c5"}},[a("span",[e._v(e._s(e.form.init.data.msg))])]),a("a-table",{attrs:{pagination:{pageSize:20,size:"small"},rowKey:"number",columns:e.addStateColumns,"data-source":e.form.init.data.rows}})],1):a("a-form-model",{ref:"form",attrs:{model:e.form.init.data,rules:e.form.init.rules,"label-col":{span:8},"wrapper-col":{span:16}}},[void 0!==e.form.init.data.name?a("a-form-model-item",{attrs:{label:"用户名称",prop:"name"}},[a("a-input",{staticClass:"dialog-input-height",attrs:{placeholder:"请输入名称",maxLength:20,disabled:"create"!==e.form.name},model:{value:e.form.init.data.name,callback:function(t){e.$set(e.form.init.data,"name",t)},expression:"form.init.data.name"}})],1):e._e(),void 0!==e.form.init.data.password?a("a-form-model-item",{attrs:{label:"密码",prop:"password"}},[a("a-input-password",{staticClass:"dialog-input-height",attrs:{maxLength:50,placeholder:"请输入密码"},model:{value:e.form.init.data.password,callback:function(t){e.$set(e.form.init.data,"password",t)},expression:"form.init.data.password"}})],1):e._e(),void 0!==e.form.init.data.passwordConfirmed?a("a-form-model-item",{attrs:{label:"确认密码",prop:"passwordConfirmed"}},[a("a-input-password",{staticClass:"dialog-input-height",attrs:{maxLength:50,placeholder:"请输入确认密码"},model:{value:e.form.init.data.passwordConfirmed,callback:function(t){e.$set(e.form.init.data,"passwordConfirmed",t)},expression:"form.init.data.passwordConfirmed"}})],1):e._e(),void 0!==e.form.init.data.orgStructureId&&"approver"!=e.form.init.data.name?a("a-form-model-item",{attrs:{label:"归属单位",prop:"orgStructureId"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.orgStructureDate,placeholder:"请选择","tree-default-expand-all":""},model:{value:e.form.init.data.orgStructureId,callback:function(t){e.$set(e.form.init.data,"orgStructureId",t)},expression:"form.init.data.orgStructureId"}})],1):e._e(),void 0!==e.form.init.data.responsibility&&"approver"!=e.form.init.data.name?a("a-form-model-item",{attrs:{label:"职责描述",prop:"responsibility"}},[a("a-input",{staticClass:"dialog-input-height",attrs:{placeholder:"请输入名称",maxLength:50},model:{value:e.form.init.data.responsibility,callback:function(t){e.$set(e.form.init.data,"responsibility",t)},expression:"form.init.data.responsibility"}})],1):e._e(),void 0!==e.form.init.data.entityId?a("a-form-model-item",{attrs:{label:"信息交换设备名称",prop:"entityId"}},[a("a-select",{attrs:{placeholder:"请选择",disabled:"setJSP"===e.form.name,mode:"multiple","max-tag-count":1},on:{change:e.handleEntityIdChange},model:{value:e.form.init.data.entityId,callback:function(t){e.$set(e.form.init.data,"entityId",t)},expression:"form.init.data.entityId"}},e._l(e.clientDate,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1):e._e(),e.hasSenderOrReceiverTypeList.hasSender?[void 0!==e.form.init.data.sendPath?a("a-form-model-item",{attrs:{label:"发送端目录",prop:"sendPath",rules:e.form.init.data.receivePath?e.path1:e.path}},[a("a-input",{staticClass:"dialog-input-height",attrs:{maxLength:50,placeholder:"请输入发送端目录"},model:{value:e.form.init.data.sendPath,callback:function(t){e.$set(e.form.init.data,"sendPath",t)},expression:"form.init.data.sendPath"}})],1):e._e(),void 0!==e.form.init.data.sendPort?a("a-form-model-item",{attrs:{label:"发送端目录端口",prop:"sendPort",rules:e.form.init.data.sendPath?e.port:null}},[a("a-input",{staticClass:"dialog-input-height",attrs:{maxLength:5,placeholder:"端口范围为[1025,65535]"},model:{value:e.form.init.data.sendPort,callback:function(t){e.$set(e.form.init.data,"sendPort",t)},expression:"form.init.data.sendPort"}})],1):e._e()]:e._e(),e.hasSenderOrReceiverTypeList.hasReceiver?[void 0!==e.form.init.data.receivePath?a("a-form-model-item",{attrs:{label:"接收端目录",prop:"receivePath",rules:e.form.init.data.sendPath?e.path1:e.path}},[a("a-input",{staticClass:"dialog-input-height",attrs:{maxLength:50,placeholder:"请输入接收端目录"},model:{value:e.form.init.data.receivePath,callback:function(t){e.$set(e.form.init.data,"receivePath",t)},expression:"form.init.data.receivePath"}})],1):e._e(),void 0!==e.form.init.data.receivePort?a("a-form-model-item",{attrs:{label:"接收端目录端口",prop:"receivePort",rules:e.form.init.data.receivePath?e.port:null}},[a("a-input",{staticClass:"dialog-input-height",attrs:{maxLength:5,placeholder:"端口范围为[1025,65535]"},model:{value:e.form.init.data.receivePort,callback:function(t){e.$set(e.form.init.data,"receivePort",t)},expression:"form.init.data.receivePort"}})],1):e._e()]:e._e()],2),a("template",{slot:"footer"},["associate"===e.form.name?a("a-button",{attrs:{type:"primary",loading:e.form.init.confirmLoading},on:{click:function(t){return e.clickSave1()}}},[e._v(e._s(e.okText||e.form.init.okText))]):a("a-button",{attrs:{type:"primary",loading:e.form.init.confirmLoading},on:{click:function(t){return e.clickSave()}}},[e._v(e._s(e.okText||e.form.init.okText))]),a("a-button",{on:{click:function(t){return e.clickCancel()}}},[e._v(e._s(e.cancelText||e.form.init.cancelText))])],1)],2)],1):e._e()},E=[],z=(a("d3b7"),a("159b"),a("b64b"),a("ac1f"),a("00b4"),a("d9e2"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("fb6a"),a("a00a")),B=a("1748"),K=a.n(B),N=a("c2f2"),J=[{title:"信息交换设备名称",width:200,dataIndex:"number"},{title:"结果",width:100,dataIndex:"result"},{title:"原因",dataIndex:"content"}],H={name:"UserDialog",mixins:[N["a"]],data:function(){var e=this;function t(){var t="密码格式不对，输入必须包含";return Object.keys(e.rule).forEach((function(a){"upper"==a&&1==e.rule[a]?t+="大写字母、":"lower"==a&&1==e.rule[a]?t+="小写字母、":"number"==a&&1==e.rule[a]?t+="数字、":"special"==a&&1==e.rule[a]?t+="特殊字符、":"pwdLength"==a&&(t=t+"长度范围：["+e.rule.pwdLength+"]")})),t}var a=[{message:"请输入密码",trigger:"blur",required:!0},{message:"不能只输入空格",trigger:"blur",whitespace:!0},{message:t,trigger:"blur",validator:function(t,a,n){var r=e.regex;r.test(a)?n():n(new Error(t.message))}}],n=[a,{message:"请输入密码",trigger:"blur",required:!0},{message:"两次密码输入不一致",trigger:"blur",validator:function(t,a,n){e.form.init.data.password!==a?n(!0):n()}}];return{regex:"",rule:{},state:"",params:"",parent:"",okText:"",cancelText:"",clientDate:[],clientIPList:[],orgStructureDate:[],input:z["a"].input,select:z["a"].ip1,path:z["a"].Path6,path1:z["a"].Path5,port:z["a"].format23,port1:z["a"].format24,addStateColumns:J,hasSenderOrReceiverTypeList:{},form:{create:{title:"新建信息交换用户",request:b,show:!0,okText:"确定",cancelText:"取消",confirmLoading:!1,msg:"",data:{userId:"",name:"",password:"",passwordConfirmed:"",jspPassword:"",orgStructureId:"",orgStructureName:"",responsibility:""},rules:{name:z["a"].name,password:a,passwordConfirmed:n,orgStructureId:z["a"].select}},modify:{title:"修改",request:R,show:!0,okText:"确定",cancelText:"取消",confirmLoading:!1,msg:"",data:{id:"",userId:"",name:"",password:"",jspPassword:"",passwordConfirmed:"",orgStructureId:"",orgStructureName:"",responsibility:""},rules:{name:z["a"].name,password:a,passwordConfirmed:n,orgStructureId:z["a"].select}},resetPassword:{title:"重置密码",request:$,show:!0,okText:"确定",cancelText:"取消",confirmLoading:!1,msg:"",data:{id:"",userId:"",name:"",password:"",jspPassword:"",passwordConfirmed:""},rules:{password:a,passwordConfirmed:n}},associate:{title:"关联信息交换设备",request:w,show:!0,okText:"确定",cancelText:"取消",confirmLoading:!1,msg:"",data:{userId:"",entityId:[]},rules:{entityId:z["a"].select}},addState:{title:"新增状态",width:700,show:!0,data:{msg:"",rows:[]},rules:{}},setJSP:{title:"JSP配置",request:P,show:!0,okText:"确定",cancelText:"取消",confirmLoading:!1,msg:"",data:{entityId:"",userId:"",sendPath:"",receivePath:"",sendPort:"",receivePort:""},rules:{}},setXFTP:{title:"XFTP配置",request:v,show:!0,okText:"确定",cancelText:"取消",confirmLoading:!1,msg:"",data:{userId:"",workPath:"",ip:"",port:""},rules:{workPath:z["a"].Path2,port:z["a"].format23}},delete:{title:"删除用户",isDelete:!0,request:_,show:!0,okText:"确定",cancelText:"取消",msg:"确定删除该用户？",confirmLoading:!1,data:{userId:""},rules:{}}}}},created:function(){var e=this,t=JSON.parse(localStorage.getItem("regex"));e.regex=new RegExp(t),e.rule=JSON.parse(localStorage.getItem("rules")),this.hasSenderOrReceiverTypeList=this.hasSenderOrReceiverType(),this.showDialog(e.state,e.params),"create"!=e.state&&"modify"!=e.state||Object(f["b"])("entity/org-structure/all",f["a"].GET).then((function(t){t&&(e.orgStructureDate=t)})),"associate"==e.state&&Object(f["b"])("entity/access-device/unbind?userId=".concat(e.params.userId),f["a"].GET).then((function(t){e.clientDate=t})),"setJSP"==e.state?Object(f["b"])("entity/access-device/all",f["a"].GET).then((function(t){e.clientDate=t})):"setXFTP"==e.state&&Object(f["b"])("client/sender-ip",f["a"].GET).then((function(t){e.clientIPList=t}))},methods:{beforeShowDialog:function(){},handleEntityIdChange:function(e){var t=10;e.length>t?(this.$message.error("信息交换设备不能超过 10 个"),this.form.init.data.entityId=e.slice(0,t)):this.form.init.data.entityId=e},beforeSave:function(e){if(Object.prototype.hasOwnProperty.call(e,"password")&&(e.jspPassword=e.password,e.passwordConfirmed=K.a.sm3(e.passwordConfirmed),e.password=K.a.sm3(e.password)),"setJSP"==this.form.name){if(e.sendPath&&e.receivePath&&e.sendPath==e.receivePath)return this.$message.error("发送端目录和接收端目录不能相同"),1;if(e.sendPort&&e.receivePort&&e.sendPort==e.receivePort)return this.$message.error("发送端目录端口和接收端目录端口不能相同"),1;if(e.sendPath&&!e.sendPort)return this.$message.error("发送端目录和发送端目录端口必须一起配置"),1;if(e.receivePath&&!e.receivePort)return this.$message.error("接收端目录和接收端目录端口必须一起配置"),1}},clickSave1:function(){var e=this;e.$refs["form"].validate((function(t){t&&(e.form.init.confirmLoading=!0,w(e.form.init.data).then((function(t){t.data.rows.length>0?(e.form.name="addState",e.form.init.title="新增信息交换设备结果",e.form.init.data.msg=t.data.msg,e.form.init.data.rows=t.data.rows,e.form.init.confirmLoading=!1):(e.form.init.confirmLoading=!1,e.form.init.show=!1,e.update())})).catch((function(){e.form.init.confirmLoading=!1})))}))},close:function(){this.form.init.show=!1},update:function(){var e=this;"setJSP"==e.form.name?e.parent.fetchExpandedData(e.form.init.data.userId):e.parent.update()}}},q=H,U=(a("7a3a"),Object(l["a"])(q,L,E,!1,null,"1bd1dffe",null)),F=U.exports,G=new D["a"](F),A=a("d7b0"),Y=a("ca00"),M=[{title:"用户名称",ellipsis:!0,scopedSlots:{customRender:"name"}},{title:"归属单位",dataIndex:"orgStructureName"},{title:"职责描述",scopedSlots:{customRender:"responsibility"}},{title:"操作",scopedSlots:{customRender:"operations"}}],Q=[{title:"接入设备名称",dataIndex:"accessDeviceName"},{title:"信息交换设备IP",dataIndex:"clientIp"},{title:"绑定信息交换设备状态",dataIndex:"bindActiveStatus"},{title:"在线状态",ellipsis:!0,scopedSlots:{customRender:"logined"},width:200},{title:"登录IP",dataIndex:"loginIp"},{title:"登录时间",ellipsis:!0,scopedSlots:{customRender:"loginTimestamp"}},{title:"操作",scopedSlots:{customRender:"operations"}}],X={name:"UserManage",mixins:[N["a"]],components:{BFixedExpandTable:p},data:function(){return{columns:M,expandedColumns:Q,expandedData:[],expandedRowKeys:[],resetExpanded:!1,readOnly:!1,dialog:G,loading:!1,doubleClickData:{userName:"",visble:!1},clientDate:[],search:{},showIcon:!1,users:{data:[],total:0}}},filters:{time:Y["n"],loginedFilter:function(e){return e?"在线":"离线"}},mounted:function(){},created:function(){this.readOnly=JSON.parse(localStorage.getItem("client-user"))||!1},methods:{tableExpand:function(e){e?(this.$set(this,"expandedRowKeys",[e.record.userId]),this.fetchExpandedData(e.record.userId)):this.$set(this,"expandedRowKeys",[])},fetchExpandedData:function(e){var t=this;this.expandedData=[],Object(f["b"])("client/bindClients/".concat(e),f["a"].GET).then((function(a){t.$set(t.expandedData,e,a)}))},createUser:function(){var e=this;e.dialog.open({state:"create",parent:e})},permissionCheck:function(e,t){return Object(A["g"])(e,t)},deleteUser:function(e){var t=this;t.dialog.open({state:"delete",parent:t,params:{userId:e}})},modifyUser:function(e){var t=this;t.dialog.open({state:"modify",parent:t,params:{id:e.id,name:e.name,userId:e.userId,orgStructureId:e.orgStructureId,orgStructureName:e.orgStructureName,responsibility:e.responsibility}})},associateClient:function(e){var t=this;t.dialog.open({state:"associate",parent:t,params:{userId:e.id}})},setJSP:function(e){var t=this;I(e.entityId,e.userId).then((function(a){var n=a.data;t.dialog.open({state:"setJSP",parent:t,params:{entityId:e.entityId,userId:e.userId,sendPath:n.sendPath||"",receivePath:n.receivePath||"",sendPort:n.sendPort||"",receivePort:n.receivePort||""}})}))},unbindDevice:function(e){var t=this;this.$confirm({content:"确认解绑设备吗？",okText:"确认",cancelText:"取消",onOk:function(){var a={entityId:e.entityId,userId:e.userId};Object(f["b"])("client/cancel-bind",f["a"].POST,a).then((function(a){a&&(t.$message.success("解绑成功"),t.fetchExpandedData(e.userId))}))},onCancel:function(){}})},update:function(e,t){var a=this,n=this;this.page=e||this.page,this.pageSize=t||this.pageSize,this.loading=!0,this.resetExpanded=!0,h(this.page,this.pageSize,this.searchParams).then((function(e){var t=e.data;t&&(n.users.total=null==t.total?0:t.total,n.users.data=t.rows,n.loading=!1,a.resetExpanded=!1)})).catch((function(){n.loading=!1}))},confirmRecord:function(e){var t=this;if(""==e.workPath||null==e.workPath||""==e.workPort||null==e.workPort)this.$message.warn("工作目录和端口必填");else{var a={};a.path=e.workPath,a.userName=e.name,a.port=e.workPort,Object(f["b"])("/client/setWorkPath",f["a"].POST,a).then((function(e){t.$message.success(e),t.doubleClickData={userName:"",visble:!1},t.update()})).catch((function(){t.doubleClickData={userName:"",visble:!1},t.update()}))}}},destroyed:function(){},watch:{$route:function(e,t){var a=this;t.path!==e.path&&this.$nextTick((function(){a.dialog&&a.dialog.close()}))}},beforeDestroy:function(){this.dialog&&this.dialog.close()}},W=X,V=(a("35cd"),Object(l["a"])(W,n,r,!1,null,"76e984a6",null));t["default"]=V.exports}}]);