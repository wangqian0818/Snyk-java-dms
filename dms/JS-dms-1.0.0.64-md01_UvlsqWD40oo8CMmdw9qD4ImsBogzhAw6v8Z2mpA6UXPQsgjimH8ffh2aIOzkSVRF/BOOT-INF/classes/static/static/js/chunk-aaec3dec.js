(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aaec3dec"],{1545:function(e,t,a){"use strict";a("fd52")},"20a8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("bdata-show",{attrs:{columns:e.columns,rowKey:"id",data:e.table.data,total:e.table.total,"init-page":e.page,"init-pageSize":e.pageSize,readOnly:e.readOnly,loading:e.loading,depatch:!0,importAndExport:!0,importDataUrl:e.importDataUrl,exportDataUrl:e.exportDataUrl,templateUrl:e.templateUrl,searchs:e.search,linkState:!0,approver:!0,needDeviece:!0},on:{change:e.tableParamChanged,handleImportChange:e.handleImportChange,batchDispatchApproval:e.batchDispatchApproval,batchRemoveApproval:e.batchRemoveApproval,batchDispatch:e.batchDispatch,batchDelete:e.batchDelete,batchRemove:e.batchRemove,create:e.openDialog,linkDetection:e.linkDetection},scopedSlots:e._u([{key:"search",fn:function(){return[a("div",[1!=e.dmsType?a("span",{staticClass:"inner"},[a("b-cascader",{ref:"cascaderRef",attrs:{"show-all-channels":!0,"clear-on-init":!0},on:{change:e.cascaderHandler}})],1):e._e(),a("span",{staticClass:"inner"},[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择位置"},model:{value:e.search.type,callback:function(t){e.$set(e.search,"type",t)},expression:"search.type"}},[a("a-select-option",{attrs:{value:"sender"}},[e._v("发送端")]),a("a-select-option",{attrs:{value:"receiver"}},[e._v("接收端")])],1)],1),a("span",{staticClass:"inner"},[a("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入服务名称"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),a("span",{staticClass:"inner"},[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择同步方式"},model:{value:e.search.transmitModel,callback:function(t){e.$set(e.search,"transmitModel",t)},expression:"search.transmitModel"}},[a("a-select-option",{attrs:{value:"JSP"}},[e._v("JSP")])],1)],1),a("span",{staticClass:"inner"},[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择下发状态"},model:{value:e.search.workState,callback:function(t){e.$set(e.search,"workState",t)},expression:"search.workState"}},[a("a-select-option",{attrs:{value:"-1"}},[e._v("未下发")]),a("a-select-option",{attrs:{value:"1"}},[e._v("已下发")]),a("a-select-option",{attrs:{value:"2"}},[e._v("未生效")]),a("a-select-option",{attrs:{value:"3"}},[e._v("已生效")]),a("a-select-option",{attrs:{value:"4"}},[e._v("已移除")]),a("a-select-option",{attrs:{value:"11"}},[e._v("下发失败")]),a("a-select-option",{attrs:{value:"12"}},[e._v("移除失败")])],1)],1),a("span",{staticClass:"inner"},[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择审批状态"},model:{value:e.search.approvalState,callback:function(t){e.$set(e.search,"approvalState",t)},expression:"search.approvalState"}},[a("a-select-option",{attrs:{value:"5"}},[e._v("下发审批中")]),a("a-select-option",{attrs:{value:"6"}},[e._v("下发审批不通过")]),a("a-select-option",{attrs:{value:"7"}},[e._v("下发审批通过")]),a("a-select-option",{attrs:{value:"8"}},[e._v("移除审批中")]),a("a-select-option",{attrs:{value:"9"}},[e._v("移除审批不通过")]),a("a-select-option",{attrs:{value:"10"}},[e._v("移除审批通过")]),a("a-select-option",{attrs:{value:"13"}},[e._v("未审批")]),a("a-select-option",{attrs:{value:"14"}},[e._v("申请下发撤回")]),a("a-select-option",{attrs:{value:"15"}},[e._v("申请移除撤回")])],1)],1),a("span",{staticClass:"inner"},[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择业务用户"},model:{value:e.search.createUser,callback:function(t){e.$set(e.search,"createUser",t)},expression:"search.createUser"}},e._l(e.createUserList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id,text:t}},[e._v(e._s(t.name))])})),1)],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.update}},[e._v("查询")])],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",on:{click:e.resetUpdate}},[e._v("重置")])],1)])]},proxy:!0},{key:"workState",fn:function(t){var i=t.record;return[a("span",[e._v(e._s(e._f("convertWorkState")(i.workState)))])]}},{key:"type",fn:function(t){var i=t.record;return["sender"==i.type?a("span",[e._v("发送端")]):"receiver"==i.type?a("span",[e._v("接收端")]):e._e()]}},{key:"businessId",fn:function(t){var i=t.record;return["sender"==i.type?a("span",[e._v(e._s(i.id))]):e._e(),"receiver"==i.type?a("span",[e._v(e._s(i.businessId))]):e._e()]}},{key:"approvalState",fn:function(t){var i=t.record;return[a("span",[e._v(e._s(e._f("convertWorkState")(i.approvalState)))])]}},{key:"labelEnable",fn:function(t){var i=t.record;return[1==i.labelEnable?a("span",[e._v("开启")]):a("span",[e._v("不开启")])]}},{key:"completeEnable",fn:function(t){var i=t.record;return[1==i.completeEnable?a("span",[e._v("开启")]):a("span",[e._v("不开启")])]}},{key:"operations",fn:function(t){var i=t.record;return[a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessTransFileView(i.id)}}},[e._v("查看详情")])]),a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.clientStateView(i.id)}}},[e._v("客户端状态")])]),3==e.user.type?[5==i.approvalState||8==i.approvalState?a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessApproval(i)}}},[e._v("审批")])]):e._e(),a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.showApprovalOpinion(i.id)}}},[e._v("审批意见")])])]:[e.readOnly||"sender"!=i.type?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessTransFileState(i.id)}}},[e._v("策略状态")])]),e.readOnly?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessTransFileConnect(i.id)}}},[e._v("服务测试")])]),e.readOnly||0!=i.deleting||"sender"!=i.type?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessTransFileManual(i.id)}}},[e._v("手动同步")])]),e.readOnly||0!=i.deleting||"sender"!=i.type&&("receiver"!=i.type||"JSP"!=i.transmitModel)?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessTransFileTransmit(i.id)}}},[e._v("传输配置")])]),e.readOnly?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.showApprovalOpinion(i.id)}}},[e._v("审批意见")])]),"-1"==i.workState&&(13==i.approvalState||6==i.approvalState||7==i.approvalState||10==i.approvalState||14==i.approvalState)||2==i.workState&&7==i.approvalState?[e.readOnly?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessTransFileModify(i)}}},[e._v("修改")])])]:e._e(),"-1"==i.workState&&(13==i.approvalState||6==i.approvalState||7==i.approvalState||10==i.approvalState||14==i.approvalState)||(1==i.workState||2==i.workState)&&7==i.approvalState?[e.readOnly?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessTransFileDispatch(i.id)}}},[e._v("申请下发")])])]:e._e(),"-1"==i.workState&&(13==i.approvalState||6==i.approvalState||7==i.approvalState||10==i.approvalState||14==i.approvalState)||2==i.workState&&7==i.approvalState?[e.readOnly?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper red",on:{click:function(t){return e.businessTransFileDelete(i)}}},[e._v("删除")])])]:e._e(),"-1"==i.workState&&5==i.approvalState||3==i.workState&&8==i.approvalState?[e.readOnly?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessTransFileRevoke(i.id)}}},[e._v("撤回")])])]:e._e(),3!=i.workState||7!=i.approvalState&&9!=i.approvalState&&10!=i.approvalState&&15!=i.approvalState?e._e():[e.readOnly?e._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(t){return e.businessTransFileMove(i.id)}}},[e._v("申请移除")])])]]]}}])}),a("a-modal",{attrs:{width:e.getWidth(),closable:!0,title:e.title,"mask-closable":!1,"confirm-loading":e.confirmLoading,footer:"view"===e.dialogType||"test"===e.dialogType?null:void 0},on:{cancel:e.clickCancel,ok:e.saveClick},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},["delete"===e.dialogType?a("div",[e._v("确认删除？")]):"dispatch"===e.dialogType?a("div",[e._v("确定申请下发？")]):"retract"===e.dialogType?a("div",[e._v("确定撤回？")]):"config"===e.dialogType?a("div",[e._v("确定传输配置？")]):"remove"===e.dialogType?a("div",[e._v("确定申请移除？")]):"manual"===e.dialogType?a("div",[e._v("确定手动同步？")]):"test"===e.dialogType?a("div",[a("a-table",{attrs:{rowKey:"id",columns:e.testColumns,pagination:!1,"data-source":e.testData},scopedSlots:e._u([{key:"operation",fn:function(t){return[a("span",{staticClass:"oper",on:{click:function(a){return e.transFileConnect(t)}}},[e._v("测试")])]}}])})],1):"create"==e.dialogType||"modify"==e.dialogType||"view"==e.dialogType?a("a-form-model",{ref:"form",attrs:{model:e.form.data,rules:e.form.rules,"label-col":{span:e.form.labelSpan||8},"wrapper-col":{span:e.form.wrapperSpan||16}}},[[a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"位置",prop:"type"}},[a("a-select",{attrs:{placeholder:"请选择",disabled:"create"!=e.dialogType||1==e.form.data.channelType},on:{change:e.choseType},model:{value:e.form.data.type,callback:function(t){e.$set(e.form.data,"type",t)},expression:"form.data.type"}},[a("a-select-option",{attrs:{value:"sender"}},[e._v("发送端")]),a("a-select-option",{attrs:{value:"receiver"}},[e._v("接收端")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"服务名称",prop:"sender"===e.form.data.type?"name":"businessId",rules:"sender"===e.form.data.type?e.nameRule:e.select}},["sender"===e.form.data.type?[a("a-input",{attrs:{placeholder:"请输入",disabled:"create"!=e.dialogType,maxLength:20},model:{value:e.form.data.name,callback:function(t){e.$set(e.form.data,"name",t)},expression:"form.data.name"}})]:[a("a-select",{attrs:{disabled:"create"!=e.dialogType||""==e.form.data.type,"option-label-prop":"label"},on:{change:e.choseFileBusiness},model:{value:e.form.data.businessId,callback:function(t){e.$set(e.form.data,"businessId",t)},expression:"form.data.businessId"}},e._l(e.fileReceiverList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.businessId,text:t.name,label:t.name}},[e._v(" "+e._s(t.name)+" "),""!=t.businessId&&e.form.data.businessId!=t.businessId?a("a-icon",{staticStyle:{position:"absolute",top:"30%",right:"10%"},attrs:{type:"delete"},on:{click:function(a){return a.stopPropagation(),e.deleteFileItem(t.businessId)}}}):e._e()],1)})),1)]],2)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"文件同步模式",prop:"transmitModel"}},[a("a-select",{attrs:{placeholder:"请选择",disabled:"create"!=e.dialogType||"receiver"===e.form.data.type},on:{change:e.changeTransmitModel},model:{value:e.form.data.transmitModel,callback:function(t){e.$set(e.form.data,"transmitModel",t)},expression:"form.data.transmitModel"}},[a("a-select-option",{attrs:{value:""}},[e._v("请选择")]),a("a-select-option",{attrs:{value:"JSP"}},[e._v("JSP")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"用户名",prop:"createUser"}},[a("a-select",{attrs:{disabled:""==e.form.data.transmitModel||"create"!=e.dialogType},on:{change:e.choseUser},model:{value:e.form.data.createUser,callback:function(t){e.$set(e.form.data,"createUser",t)},expression:"form.data.createUser"}},e._l(e.createUserList1,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id,text:t}},[e._v(e._s(t.name))])})),1)],1)],1)],1),a("div",{staticStyle:{"font-size":"16px","font-weight":"bold",margin:"10px 0px"}},[e._v("文件传输服务配置")]),a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{span:24}},[a("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 8px 10px"}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold",margin:"8px 0px"}},[e._v("信息交换设备配置")]),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:24}},[a("a-row",{staticClass:"inner-block",style:{padding:"sender"===e.form.data.type?"8px 10px 8px 10px":"8px 5px 8px 5px",maxHeight:"receiver"===e.form.data.type?"150px":"auto",overflow:"receiver"===e.form.data.type?"auto":"visible"}},[e._l(e.form.data.transFile,(function(t,i){return a("div",{key:i},["receiver"===e.form.data.type?a("a-row",{staticClass:"inner-block",staticStyle:{padding:"5px 5px 5px 0px",margin:"3px 5px 10px 5px"}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"信息交换设备",prop:"transFile."+i+".entityId",rules:e.select}},[a("a-select",{attrs:{disabled:""==e.form.data.createUser||"create"!=e.dialogType},model:{value:t.entityId,callback:function(a){e.$set(t,"entityId",a)},expression:"entityItem.entityId"}},e._l(e.entityList,(function(t,l){return a("a-select-option",{key:l,attrs:{disabled:e.isEntityDisabled(t.id,i),value:t.id,text:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"JSP"==e.form.data.transmitModel?"JSP目录":"路径",prop:"transFile."+i+".path",rules:"JSP"==e.form.data.transmitModel?e.path:e.path2}},[a("a-input",{attrs:{placeholder:"请输入",disabled:"create"!=e.dialogType||""==e.form.data.transmitModel||""==e.form.data.createUser,maxLength:20},model:{value:t.path,callback:function(a){e.$set(t,"path",a)},expression:"entityItem.path"}})],1)],1),e.form.data.labelEnable&&"receiver"===e.form.data.type?a("div",{staticClass:"delete"},[a("a-tooltip",[a("a-popconfirm",{attrs:{title:"确定要删除该行配置?",okText:"确定",disabled:"create"!=e.dialogType,cancelText:"取消"},on:{confirm:function(){return e.deleteValueItem(i)}}},[a("a-icon",{style:"color: #4f9eb2; font-size: 20px;",attrs:{type:"close-circle"}})],1)],1)],1):e._e()],1):[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"信息交换设备",prop:"transFile."+i+".entityId",rules:e.select}},[a("a-select",{attrs:{disabled:""==e.form.data.createUser||"create"!=e.dialogType},model:{value:t.entityId,callback:function(a){e.$set(t,"entityId",a)},expression:"entityItem.entityId"}},e._l(e.entityList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id,text:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"JSP"==e.form.data.transmitModel?"JSP目录":"路径",prop:"transFile."+i+".path",rules:"JSP"==e.form.data.transmitModel?e.path:e.path2}},[a("a-input",{attrs:{placeholder:"请输入",disabled:"create"!=e.dialogType||""==e.form.data.transmitModel||""==e.form.data.createUser,maxLength:248},model:{value:t.path,callback:function(a){e.$set(t,"path",a)},expression:"entityItem.path"}})],1)],1)]],2)})),"receiver"===e.form.data.type&&e.form.data.labelEnable?a("div",{staticStyle:{"text-align":"right"}},[a("a-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",disabled:"create"!=e.dialogType},on:{click:function(t){return e.handleAddValueItem()}}},[e._v("添加数值")])],1):e._e()],2)],1)],1),a("div",{staticStyle:{"font-size":"14px","font-weight":"bold",margin:"8px 0px"}},[e._v("传输服务配置")]),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:24}},[a("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 8px 10px"}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"设备",prop:"deviceId"}},[a("a-select",{attrs:{"show-search":!0,"filter-option":e.filterOption,disabled:""},model:{value:e.form.data.deviceId,callback:function(t){e.$set(e.form.data,"deviceId",t)},expression:"form.data.deviceId"}},e._l(e.deviceList,(function(t,i){return a("a-select-option",{key:i,attrs:{text:t.name,value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1),8==e.form.data.deviceType?a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"通道",prop:"channelInfoId"}},[a("a-select",{attrs:{"show-search":!0,"filter-option":e.filterOption,disabled:"",placeholder:"请选择"},model:{value:e.form.data.channelInfoId,callback:function(t){e.$set(e.form.data,"channelInfoId",t)},expression:"form.data.channelInfoId"}},e._l(e.channelList,(function(t,i){return a("a-select-option",{key:i,attrs:{text:t.name,value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1):e._e(),"sender"===e.form.data.type?[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"延迟同步时间(s)",prop:"delaySync",rules:e.format17}},[a("a-input",{attrs:{placeholder:"请输入",disabled:"view"==e.dialogType,maxLength:4},model:{value:e.form.data.delaySync,callback:function(t){e.$set(e.form.data,"delaySync",t)},expression:"form.data.delaySync"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"调度时间",prop:"businessTimeId"}},[a("a-select",{attrs:{disabled:"view"==e.dialogType,"show-search":!0,"filter-option":e.filterOption},model:{value:e.form.data.businessTimeId,callback:function(t){e.$set(e.form.data,"businessTimeId",t)},expression:"form.data.businessTimeId"}},e._l(e.timeList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.id,text:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)]:e._e()],2)],1)],1),a("div",{staticStyle:{"font-size":"14px","font-weight":"bold",margin:"8px 0px"}},[e._v("数据引接配置")]),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:24}},[a("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 8px 10px"}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"启用",prop:"labelEnable"}},[a("a-checkbox",{attrs:{disabled:"create"!=e.dialogType||"sender"===e.form.data.type&&"JSP"!=e.form.data.transmitModel||"receiver"===e.form.data.type},on:{change:e.choseLabelEnable},model:{value:e.form.data.labelEnable,callback:function(t){e.$set(e.form.data,"labelEnable",t)},expression:"form.data.labelEnable"}},[e._v(" 数据标识 ")])],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"启用",prop:"completeEnable"}},[a("a-checkbox",{attrs:{disabled:"create"!=e.dialogType||"sender"===e.form.data.type&&"JSP"!=e.form.data.transmitModel||"receiver"===e.form.data.type},model:{value:e.form.data.completeEnable,callback:function(t){e.$set(e.form.data,"completeEnable",t)},expression:"form.data.completeEnable"}},[e._v(" 数据完整性和数字签名保护 ")])],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"启用",prop:"confidentialityEnable"}},[a("a-checkbox",{attrs:{disabled:"create"!=e.dialogType||"sender"===e.form.data.type&&"JSP"!=e.form.data.transmitModel||!e.form.data.labelEnable||"receiver"===e.form.data.type},on:{change:e.choseConfidentialityEnable},model:{value:e.form.data.confidentialityEnable,callback:function(t){e.$set(e.form.data,"confidentialityEnable",t)},expression:"form.data.confidentialityEnable"}},[e._v(" 降密脱敏检查 ")])],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"密级限制",prop:"confidentialityLevel",rules:e.form.data.confidentialityEnable?e.select:null}},[a("a-select",{attrs:{disabled:"create"!=e.dialogType||!e.form.data.confidentialityEnable||"sender"!=e.form.data.type,placeholder:"请选择"},model:{value:e.form.data.confidentialityLevel,callback:function(t){e.$set(e.form.data,"confidentialityLevel",t)},expression:"form.data.confidentialityLevel"}},e._l(e.confidentialityList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.value,text:t.name}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1)],1),a("div",{staticStyle:{"font-size":"14px","font-weight":"bold",margin:"8px 0px"}},[e._v("传输策略配置")]),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:24}},[a("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 0 10px"}},["sender"===e.form.data.type?[a("a-col",{attrs:{span:8}},[void 0!==e.form.data.transmitType?a("a-form-model-item",{attrs:{label:"文件同步方式",prop:"transmitType"}},[a("a-select",{attrs:{disabled:"create"!=e.dialogType,placeholder:"请选择"},on:{change:e.changetransmitType},model:{value:e.form.data.transmitType,callback:function(t){e.$set(e.form.data,"transmitType",t)},expression:"form.data.transmitType"}},[a("a-select-option",{attrs:{value:"Total"}},[e._v("全量传输")]),a("a-select-option",{attrs:{value:"Increment"}},[e._v("增量传输")])],1)],1):e._e()],1),a("a-col",{attrs:{span:8}},[void 0!==e.form.data.sourceDeal?a("a-form-model-item",{attrs:{label:"源端处理方式",prop:"sourceDeal"}},[a("a-select",{attrs:{disabled:"Total"==e.form.data.transmitType||"view"===e.dialogType,placeholder:"请选择"},on:{change:e.changeSourceDeal},model:{value:e.form.data.sourceDeal,callback:function(t){e.$set(e.form.data,"sourceDeal",t)},expression:"form.data.sourceDeal"}},[a("a-select-option",{attrs:{value:""}},[e._v("请选择")]),a("a-select-option",{attrs:{value:"Copy"}},[e._v("源端复制")]),a("a-select-option",{attrs:{value:"Delete"}},[e._v("源端删除")]),a("a-select-option",{attrs:{value:"Move"}},[e._v("源端移动")])],1)],1):e._e()],1),a("a-col",{attrs:{span:8}},[void 0!==e.form.data.backupPath?a("a-form-model-item",{attrs:{label:"备份目录",prop:"backupPath",rules:"Move"==e.form.data.sourceDeal?e.path4:null}},[a("a-input",{attrs:{disabled:"Move"!=e.form.data.sourceDeal||"view"===e.dialogType,placeholder:"请输入已存在路径",maxLength:248},model:{value:e.form.data.backupPath,callback:function(t){e.$set(e.form.data,"backupPath",t)},expression:"form.data.backupPath"}})],1):e._e()],1),a("a-col",{attrs:{span:8}},[void 0!==e.form.data.syncDelete?a("a-form-model-item",{attrs:{label:"同步删除",prop:"syncDelete"}},[a("a-select",{attrs:{placeholder:"请选择",disabled:"Copy"!=e.form.data.sourceDeal||"Total"==e.form.data.transmitType||"view"===e.dialogType},model:{value:e.form.data.syncDelete,callback:function(t){e.$set(e.form.data,"syncDelete",t)},expression:"form.data.syncDelete"}},[a("a-select-option",{attrs:{value:0}},[e._v("不删除")]),a("a-select-option",{attrs:{value:1}},[e._v("删除")])],1)],1):e._e()],1),a("a-col",{attrs:{span:8}},[void 0!==e.form.data.level?a("a-form-model-item",{attrs:{label:"优先级别",prop:"level"}},[a("a-select",{attrs:{disabled:"view"===e.dialogType,placeholder:"请选择"},model:{value:e.form.data.level,callback:function(t){e.$set(e.form.data,"level",t)},expression:"form.data.level"}},[a("a-select-option",{attrs:{value:1}},[e._v("1")]),a("a-select-option",{attrs:{value:2}},[e._v("2")]),a("a-select-option",{attrs:{value:3}},[e._v("3")]),a("a-select-option",{attrs:{value:4}},[e._v("4")]),a("a-select-option",{attrs:{value:5}},[e._v("5")])],1)],1):e._e()],1),a("a-col",{attrs:{span:8}},[void 0!==e.form.data.emptyPathDealType?a("a-form-model-item",{attrs:{label:"空文件夹处理方式",prop:"emptyPathDealType"}},[a("a-select",{attrs:{disabled:"view"===e.dialogType,placeholder:"请选择"},model:{value:e.form.data.emptyPathDealType,callback:function(t){e.$set(e.form.data,"emptyPathDealType",t)},expression:"form.data.emptyPathDealType"}},[a("a-select-option",{attrs:{value:1}},[e._v("跳过")]),a("a-select-option",{attrs:{value:0}},[e._v("传输")])],1)],1):e._e()],1),a("a-col",{attrs:{span:8}},[void 0!==e.form.data.emptyFileDealType?a("a-form-model-item",{attrs:{label:"空文件处理方式",prop:"emptyFileDealType"}},[a("a-select",{attrs:{disabled:"view"===e.dialogType,placeholder:"请选择"},model:{value:e.form.data.emptyFileDealType,callback:function(t){e.$set(e.form.data,"emptyFileDealType",t)},expression:"form.data.emptyFileDealType"}},[a("a-select-option",{attrs:{value:1}},[e._v("跳过")]),a("a-select-option",{attrs:{value:0}},[e._v("传输")])],1)],1):e._e()],1),a("a-col",{attrs:{span:8}},[void 0!==e.form.data.smallFileFirst?a("a-form-model-item",{attrs:{label:"小文件优先传输",prop:"smallFileFirst"}},[a("a-select",{attrs:{disabled:"view"===e.dialogType,placeholder:"请选择"},on:{change:e.changeSmallFileFirst},model:{value:e.form.data.smallFileFirst,callback:function(t){e.$set(e.form.data,"smallFileFirst",t)},expression:"form.data.smallFileFirst"}},[a("a-select-option",{attrs:{value:1}},[e._v("是")]),a("a-select-option",{attrs:{value:0}},[e._v("否")])],1)],1):e._e()],1),a("a-col",{attrs:{span:8}},[void 0!==e.form.data.smallFileLimit?a("a-form-model-item",{attrs:{label:"小文件上限(KB)",prop:"smallFileLimit",rules:1==e.form.data.smallFileFirst?e.format:null}},[a("a-input",{staticStyle:{width:"100%"},attrs:{maxLength:10,disabled:1!=e.form.data.smallFileFirst||"view"===e.dialogType,placeholder:"请输入"},model:{value:e.form.data.smallFileLimit,callback:function(t){e.$set(e.form.data,"smallFileLimit",t)},expression:"form.data.smallFileLimit"}})],1):e._e()],1),a("a-col",{attrs:{span:8}},[void 0!==e.form.data.contentCheck?a("a-form-model-item",{attrs:{label:"内容完整性检查",prop:"contentCheck"}},[a("a-select",{attrs:{disabled:"view"===e.dialogType,placeholder:"请选择"},model:{value:e.form.data.contentCheck,callback:function(t){e.$set(e.form.data,"contentCheck",t)},expression:"form.data.contentCheck"}},[a("a-select-option",{attrs:{value:1}},[e._v("检查")]),a("a-select-option",{attrs:{value:0}},[e._v("不检查")])],1)],1):e._e()],1)]:[a("a-col",{attrs:{span:12}},[void 0!==e.form.data.conflictStrategy?a("a-form-model-item",{attrs:{label:"上传冲突策略",prop:"conflictStrategy"}},[a("a-select",{attrs:{disabled:"view"===e.dialogType,placeholder:"请选择"},model:{value:e.form.data.conflictStrategy,callback:function(t){e.$set(e.form.data,"conflictStrategy",t)},expression:"form.data.conflictStrategy"}},[a("a-select-option",{attrs:{value:"Cover"}},[e._v("覆盖")]),a("a-select-option",{attrs:{value:"Discard"}},[e._v("丢弃")]),a("a-select-option",{attrs:{value:"Rename"}},[e._v("重命名")])],1)],1):e._e()],1),a("a-col",{attrs:{span:12}},[void 0!==e.form.data.resendNum?a("a-form-model-item",{attrs:{label:"重发次数上限",prop:"resendNum"}},[a("a-input",{staticStyle:{width:"100%"},attrs:{maxLength:10,disabled:"view"===e.dialogType},model:{value:e.form.data.resendNum,callback:function(t){e.$set(e.form.data,"resendNum",t)},expression:"form.data.resendNum"}})],1):e._e()],1)]],2)],1)],1),"sender"===e.form.data.type?a("div",{staticStyle:{"font-size":"14px","font-weight":"bold",margin:"8px 0px"}},[e._v("安全策略配置")]):e._e(),"sender"===e.form.data.type?a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:24}},[a("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 0 10px"}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"文件大小限制",prop:"maxFileSize"}},[a("a-input",{attrs:{disabled:"view"==e.dialogType,maxLength:20,placeholder:"请输入"},model:{value:e.form.data.maxFileSize,callback:function(t){e.$set(e.form.data,"maxFileSize",t)},expression:"form.data.maxFileSize"}},[a("a-select",{staticStyle:{width:"80px"},attrs:{slot:"addonAfter",disabled:"view"==e.dialogType},slot:"addonAfter",model:{value:e.form.data.fileSizeUnit,callback:function(t){e.$set(e.form.data,"fileSizeUnit",t)},expression:"form.data.fileSizeUnit"}},[a("a-select-option",{attrs:{value:"KB"}},[e._v("KB")]),a("a-select-option",{attrs:{value:"MB"}},[e._v("MB")]),a("a-select-option",{attrs:{value:"GB"}},[e._v("GB")])],1)],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"流量控制",prop:"maxFlow"}},[a("a-input",{attrs:{disabled:"view"==e.dialogType,maxLength:20,placeholder:"请输入"},model:{value:e.form.data.maxFlow,callback:function(t){e.$set(e.form.data,"maxFlow",t)},expression:"form.data.maxFlow"}},[a("a-select",{staticStyle:{width:"80px"},attrs:{slot:"addonAfter",disabled:"view"==e.dialogType},slot:"addonAfter",model:{value:e.form.data.maxFlowUnit,callback:function(t){e.$set(e.form.data,"maxFlowUnit",t)},expression:"form.data.maxFlowUnit"}},[a("a-select-option",{attrs:{value:"KB/s"}},[e._v("KB/s")]),a("a-select-option",{attrs:{value:"MB/s"}},[e._v("MB/s")]),a("a-select-option",{attrs:{value:"GB/s"}},[e._v("GB/s")])],1)],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"文件名称过滤",prop:"filterFileName"}},[a("LazyLoadingMultipleSelect",{attrs:{value:e.form.data.filterFileName1,strategyData:e.filterFileNameList,dialogType:e.dialogType,mode:"multiple","max-tag-count":1,"option-key":"id",placeholder:"请选择"},on:{change:e.handleFileNameChange}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"文件类型过滤",prop:"filterFileType"}},[a("LazyLoadingMultipleSelect",{attrs:{value:e.form.data.filterFileType1,strategyData:e.filterFileTypeList,mode:"multiple",dialogType:e.dialogType,"max-tag-count":1,"option-key":"id",placeholder:"请选择"},on:{change:e.handleFileTypeChange}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"文件后缀名过滤",prop:"filterFileSuffix"}},[a("LazyLoadingMultipleSelect",{attrs:{value:e.form.data.filterFileSuffix1,strategyData:e.filterFileSuffixList,dialogType:e.dialogType,mode:"multiple","max-tag-count":1,"option-key":"id",placeholder:"请选择"},on:{change:e.handleFileSuffixChange}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"启用",prop:"virus"}},[a("a-checkbox",{attrs:{disabled:"view"==e.dialogType},model:{value:e.form.data.virus,callback:function(t){e.$set(e.form.data,"virus",t)},expression:"form.data.virus"}},[e._v("病毒防护")])],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"关键字过滤",prop:"filterFileContent"}},[a("LazyLoadingMultipleSelect",{attrs:{value:e.form.data.filterFileContent1,strategyData:e.filterFileContentList,dialogType:e.dialogType,mode:"multiple","max-tag-count":1,"option-key":"id",placeholder:"请选择"},on:{change:e.handleFileContentChange}})],1)],1)],1)],1)],1):e._e()],1)],1)],1)]],2):e._e(),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.saveClick}},[e._v(e._s("保存"))]),a("a-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],2),a("a-modal",{attrs:{closable:!0,width:700,title:"策略状态","mask-closable":!1,footer:null,destroyOnClose:""},on:{cancel:e.cancelStrategyStateVisible},model:{value:e.strategyStateVisible,callback:function(t){e.strategyStateVisible=t},expression:"strategyStateVisible"}},[a("a-table",{attrs:{pagination:{pageSize:10,size:"small"},rowKey:"id",columns:e.stateColumns,"data-source":e.stateData},scopedSlots:e._u([{key:"workState",fn:function(t){return[a("span",{attrs:{title:e.convertWorkStateHtml(t.type)},domProps:{innerHTML:e._s(e.convertWorkStateHtml(t.workState))}})]}},{key:"type",fn:function(t){return[a("span",{attrs:{title:e.convertStrategyState(t.type)},domProps:{innerHTML:e._s(e.convertStrategyState(t.type))}})]}},{key:"DataState",fn:function(t){return[0==t.deleting?a("span",{staticStyle:{color:"#47b596"}},[e._v("正常")]):a("span",{staticStyle:{color:"#f5222d"}},[e._v("删除中")])]}},{key:"operation1",fn:function(t){return[a("span",[a("span",{staticStyle:{color:"#f5222d",cursor:"pointer"},on:{click:function(a){return e.strategyDelete(t)}}},[e._v("删除")])])]}}])})],1),a("a-modal",{attrs:{closable:!0,width:900,title:"客户端状态","mask-closable":!1,footer:null,destroyOnClose:""},on:{cancel:e.cancelClientStateVisible},model:{value:e.clientStateVisible,callback:function(t){e.clientStateVisible=t},expression:"clientStateVisible"}},[a("a-table",{attrs:{pagination:!1,rowKey:"id",columns:e.clientStateColumns,"data-source":e.clientStateData},scopedSlots:e._u([{key:"workState",fn:function(t){return[a("span",{attrs:{title:e.convertWorkStateHtml(t.type)},domProps:{innerHTML:e._s(e.convertWorkStateHtml(t.workState))}})]}},{key:"type",fn:function(t){return[a("span",{attrs:{title:e.convertStrategyState(t.type)},domProps:{innerHTML:e._s(e.convertStrategyState(t.type))}})]}},{key:"DataState",fn:function(t){return[0==t.deleting?a("span",{staticStyle:{color:"#47b596"}},[e._v("正常")]):a("span",{staticStyle:{color:"#f5222d"}},[e._v("删除中")])]}},{key:"operation1",fn:function(t){return[a("span",[a("span",{staticStyle:{color:"#f5222d",cursor:"pointer"},on:{click:function(a){return e.strategyDelete(t)}}},[e._v("删除")])])]}}])})],1),a("a-modal",{attrs:{closable:!0,width:500,title:"服务测试状态","mask-closable":!1,footer:null,destroyOnClose:""},on:{cancel:e.cancelResourceVisible},model:{value:e.resourceVisible,callback:function(t){e.resourceVisible=t},expression:"resourceVisible"}},[a("div",{staticStyle:{"border-bottom":"1px dotted grey"}},[a("span",[e._v("服务名称:")]),null!=e.testData1.name&&""!=e.testData1.name?a("span",{staticStyle:{"margin-left":"50px"}},[e._v(e._s(e.testData1.name))]):a("span",{staticStyle:{"margin-left":"50px"}},[e._v("请求中")])]),a("div",{staticStyle:{"border-bottom":"1px dotted grey"}},[a("span",[e._v("连接状态:")]),null!=e.testData1.connectStatus&&""!=e.testData1.connectStatus?a("span",{staticStyle:{"margin-left":"50px"}},[e._v(e._s(e.testData1.connectStatus))]):a("span",{staticStyle:{"margin-left":"50px"}},[e._v("请求中")])]),a("div",{staticStyle:{"border-bottom":"1px dotted grey"}},[a("span",[e._v("传输状态:")]),null!=e.testData1.transmitStatus&&""!=e.testData1.transmitStatus?a("span",{staticStyle:{"margin-left":"50px"}},[e._v(e._s(e.testData1.transmitStatus))]):a("span",{staticStyle:{"margin-left":"50px"}},[e._v("请求中")])])]),a("a-modal",{attrs:{closable:!0,title:e.title,"mask-closable":!1,footer:null},on:{cancel:e.clickCancelImport},model:{value:e.importVisible,callback:function(t){e.importVisible=t},expression:"importVisible"}},[a("div",{staticStyle:{height:"50px","line-height":"50px","font-size":"16px",color:"#0ab1c5"}},[a("span",[e._v(e._s(e.importFailedData.msg))])]),a("a-table",{attrs:{pagination:{pageSize:20,size:"small"},rowKey:"number",columns:e.importColumns,"data-source":e.importFailedData.rows}})],1)],1)},l=[],o=a("5530"),n=a("2909"),s=(a("b0c0"),a("4de4"),a("d3b7"),a("fb6a"),a("99af"),a("a9e3"),a("ac1f"),a("841c"),a("e9c4"),a("a434"),a("159b"),a("a15b"),a("00b4"),a("d81d"),a("1276"),a("2f62")),r=a("ba79"),c=a("ca6b"),d=a("b775"),p=a("c2f2"),f=a("a00a"),m=a("8449"),u=a("ae699"),v=a("a9af"),h=a("d9f9"),y=a("10d2"),b=[{title:"设备名称",dataIndex:"deviceName"},{title:"服务ID",scopedSlots:{customRender:"businessId"}},{title:"服务名称",dataIndex:"name"},{title:"位置",scopedSlots:{customRender:"type"}},{title:"文件同步模式",width:200,dataIndex:"transmitModel"},{title:"数据标识",scopedSlots:{customRender:"labelEnable"}},{title:"数据完整性和数字签名保护",scopedSlots:{customRender:"completeEnable"}},{title:"下发状态",scopedSlots:{customRender:"workState"}},{title:"审批状态",scopedSlots:{customRender:"approvalState"}},{title:"用户",dataIndex:"createUserName"},{title:"操作",width:350,scopedSlots:{customRender:"operations"}}],g=[{title:"策略名称",dataIndex:"strategyName"},{title:"类型",scopedSlots:{customRender:"type"}},{title:"生效状态",scopedSlots:{customRender:"workState"}},{title:"数据状态",scopedSlots:{customRender:"DataState"}}],S=[{title:"信息交换设备名称",width:150,dataIndex:"entityDeviceName"},{title:"管理口IP",width:140,dataIndex:"manageIp"},{title:"服务口IP",width:140,dataIndex:"businessIp"},{title:"文件传输目录",width:150,dataIndex:"path"},{title:"文件传输端口",width:150,dataIndex:"port"},{title:"连接状态",width:100,dataIndex:"state"}],F=[{title:"信息交换设备",dataIndex:"name"},{title:"操作",scopedSlots:{customRender:"operation"}}],T="".concat(r["b"],"single-file/single-file/import-data"),x="".concat(r["b"],"single-file/single-file/export-data"),_="single/trans-busi-file1.xlsx",k="single/trans-busi-file2.xlsx",L={components:{BdataShow:c["a"],LazyLoadingMultipleSelect:v["a"],BCascader:y["a"]},mixins:[p["a"]],filters:{convertWorkState:h["H"]},comments:{},props:{},data:function(){return{readOnly:!1,dialog:m["a"],ApprovalDialog:u["a"],columns:b,search:{name:"",type:void 0,deviceId:"",channelInfoId:"",businessId:"",transmitModel:void 0,createUser:void 0,workState:void 0,approvalState:void 0},table:{data:[],total:0},loading:!1,importFailedData:{},importVisible:!1,testColumns:F,resourceVisible:!1,confirmLoading:!1,visible:!1,title:"",dialogType:"",createUserList:[],createUserList1:[],strategyStateVisible:!1,stateColumns:g,stateData:[],offset:1,limit:10,clientStateColumns:S,clientStateVisible:!1,clientStateData:[],form:{data:{channelInfoId:"",deviceId:"",type:"",sn:"",channelName:"",channelType:"",deviceNodeName:"",deviceType:"",name:"",transmitModel:"",createUser:"",transFile:[{entityId:"",path:""}],delaySync:60,businessTimeId:"",virus:!1,labelEnable:!1,completeEnable:!1,confidentialityEnable:!1,confidentialityLevel:"",maxFileSize:"",fileSizeUnit:"KB",maxFlow:"",maxFlowUnit:"KB/s",businessId:"",filterFileName1:[],filterFileType1:[],filterFileSuffix1:[],filterFileContent1:[],filterFileName:"",filterFileType:"",filterFileSuffix:"",filterFileContent:"",transmitType:"",conflictStrategy:"Cover",resendNum:0,contentCheck:1,sourceDeal:"",backupPath:"",syncDelete:"",level:1,emptyPathDealType:"",emptyFileDealType:1,smallFileFirst:0,smallFileLimit:""},rules:{transmitModel:f["a"].select,createUser:f["a"].select,deviceId:f["a"].select,businessId:f["a"].select,businessTimeId:f["a"].select,transmitType:f["a"].select,sourceDeal:f["a"].select,level:f["a"].select,emptyFileDealType:f["a"].select,smallFileFirst:f["a"].select,securityRank:f["a"].select,conflictStrategy:f["a"].select,resendNum:f["a"].format10,contentCheck:f["a"].select}},path:f["a"].Path7,path2:f["a"].Path,path4:f["a"].Path4,select:f["a"].select,nameRule:f["a"].name,format:f["a"].format,ip:f["a"].ip1,format17:f["a"].format17,cirdOrNot:f["a"].ipFormat2,importDataUrl:T,exportDataUrl:x,templateUrl:"",entityList:[],fileInfoList:{},filterFileNameList:[],filterFileNameList_1:[],filterFileTypeList:[],filterFileTypeList_1:[],filterFileSuffixList:[],filterFileSuffixList_1:[],filterFileContentList:[],filterFileContentList_1:[],fileReceiverList:[],testData:[],testData1:[],strategyFileList:[],timeList:[],deviceList:[],channelList:[],confidentialityList:[]}},created:function(){this.readOnly=JSON.parse(JSON.parse(localStorage.getItem("file")).filter((function(e){return"single-file"==e.name}))[0].readonly)||!1,this.productType=localStorage.getItem("productType")},watch:{"form.data.type":function(e){var t=this;"sender"==e?(Object(d["b"])("tool/strategy-filter/all?type=1",d["a"].GET).then((function(e){t.filterFileNameList=e,t.filterFileNameList_1=e.slice(0,100)})),Object(d["b"])("tool/strategy-filter/all?type=2",d["a"].GET).then((function(e){t.filterFileSuffixList=e,t.filterFileSuffixList_1=e.slice(0,100)})),Object(d["b"])("tool/strategy-filter/all?type=3",d["a"].GET).then((function(e){t.filterFileTypeList=e,t.filterFileTypeList_1=e.slice(0,100)})),Object(d["b"])("strategy/strategy-trcontent/all",d["a"].GET).then((function(e){t.filterFileContentList=e,t.filterFileContentList_1=e.slice(0,100)})),Object(d["b"])("time-config/config/all?mode=3",d["a"].GET).then((function(e){t.timeList=[{id:"",name:"请选择"}].concat(Object(n["a"])(e))})),"modify"!=t.dialogType&&"view"!=this.dialogType||(t.fetchFileList(),t.form.data.entityId=Number(t.form.data.entityId))):"receiver"==e&&("modify"!=t.dialogType&&"view"!=this.dialogType||t.fetchFileList(),t.fileReceiverList=[],Object(d["b"])("single-file/single-file/all?type=recSender&sn=".concat(this.form.data.sn,"&channelName=").concat(this.form.data.channelName),d["a"].GET).then((function(e){t.fileReceiverList=[{businessId:"",name:"请选择"}].concat(Object(n["a"])(e))})))}},mounted:function(){var e=this.detectDeviceType();this.templateUrl=e?_:k},computed:Object(o["a"])({},Object(s["b"])("account",["user"])),methods:{cascaderHandler:function(e){this.search.deviceId=e[0],this.search.channelInfoId=e[1]},update:function(){this.page=1,this.uploadList(this.page,this.pageSize,this.search)},resetUpdate:function(){this.resetSearch(),this.update()},resetSearch:function(){this.$refs.cascaderRef&&this.$refs.cascaderRef.resetSelection(),this.search={name:"",type:void 0,deviceId:"",channelInfoId:"",businessId:"",transmitModel:void 0,createUser:void 0,workState:void 0,approvalState:void 0}},tableParamChanged:function(e){this.page=e.page,this.pageSize=e.pageSize,this.uploadList(e.page,e.pageSize,this.search)},uploadList:function(e,t,a){var i=this;this.loading=!0;var l=encodeURIComponent(JSON.stringify(a));Object(d["b"])("single-file/single-files?offset=".concat((e-1)*t,"&limit=").concat(t,"&search=").concat(l),d["a"].GET).then((function(e){e.rows.length>0?(i.table.data=e.rows,i.table.total=e.total,i.loading=!1):(i.table.data=[],i.table.total=0,i.loading=!1)})).catch((function(){i.table.data=[],i.table.total=0,i.loading=!1})),this.createUserList=[],Object(d["b"])("tool/client-user/all",d["a"].GET).then((function(e){i.createUserList=e}))},getWidth:function(){return"create"==this.dialogType||"modify"==this.dialogType||"view"==this.dialogType?"1200px":"500px"},convertWorkStateHtml:h["J"],convertStrategyState:h["B"],openDialog:function(e,t){var a=this;if(this.dialogType="",this.dialogType=e,"create"==e)this.title="新建",this.initFileMethod(t),this.visible=!0;else if("modify"==e){var i=this;i.title="修改",i.initFileMethod(t),i.visible=!0}else"delete"==e?(this.title="删除",this.visible=!0):"view"==e?(this.title="详情",this.initFileMethod(t),this.visible=!0):"remove"==e?(this.title="申请移除",this.visible=!0):"dispatch"==e?(this.title="申请下发",this.visible=!0):"retract"==e?(this.title="撤回",this.visible=!0):"config"==e?(this.title="传输配置",this.visible=!0):"test"==e?(this.visible=!0,this.title="服务测试",this.testData=[],Object(d["b"])("single-file/single-file/resource-all/".concat(this.form.data.id),d["a"].GET).then((function(e){a.testData=e}))):"manual"==e&&(this.visible=!0,this.title="手动同步")},initFileMethod:function(e){var t=this;"create"===t.dialogType&&(t.form.data.deviceId=(null===e||void 0===e?void 0:e.deviceId)||"",t.form.data.channelInfoId=(null===e||void 0===e?void 0:e.channelInfoId)||"",t.form.data.sn=(null===e||void 0===e?void 0:e.sn)||"",t.form.data.channelName=(null===e||void 0===e?void 0:e.channelName)||"",t.form.data.channelType=(null===e||void 0===e?void 0:e.channelType)||"",t.form.data.deviceNodeName=(null===e||void 0===e?void 0:e.deviceNodeName)||"",t.form.data.deviceType=(null===e||void 0===e?void 0:e.deviceType)||""),Object(d["b"])("device/device-info/all",d["a"].GET).then((function(e){t.deviceList=Object(n["a"])(e)})),Object(d["b"])("device/channel-info/all",d["a"].GET).then((function(e){t.channelList=Object(n["a"])(e),""!=t.form.data.type&&Object(d["b"])("tool/client-user/all?type=".concat(t.form.data.type),d["a"].GET).then((function(e){t.createUserList1=e}))})),Object(d["b"])("tool/strategy-trfile/all?type=".concat(t.form.data.type),d["a"].GET).then((function(e){t.strategyFileList=[{id:"",name:"请选择"}].concat(Object(n["a"])(e))})),Object(d["b"])("tool/select-options/confidentiality",d["a"].GET).then((function(e){t.confidentialityList=Object(n["a"])(e)})),1==t.form.data.channelType&&"A"==t.form.data.deviceNodeName?t.form.data.type="sender":1==t.form.data.channelType&&"B"==t.form.data.deviceNodeName&&(t.form.data.type="receiver",Object(d["b"])("single-file/single-file/all?type=recSender&sn=".concat(this.form.data.sn,"&channelName=").concat(this.form.data.channelName),d["a"].GET).then((function(e){t.fileReceiverList=[{businessId:"",name:"请选择"}].concat(Object(n["a"])(e))})))},handleFileNameChange:function(e){this.form.data.filterFileName1=e},handleFileTypeChange:function(e){this.form.data.filterFileType1=e},handleFileSuffixChange:function(e){this.form.data.filterFileSuffix1=e},handleFileContentChange:function(e){this.form.data.filterFileContent1=e},choseType:function(e){var t,a=this;null===(t=this.$refs.form)||void 0===t||t.clearValidate();var i=this.form.data,l=i.type,o=i.deviceId,n=i.channelInfoId,s=i.channelName,r=i.sn,c=i.channelType,p=i.deviceNodeName,f=i.deviceType;this.getDefaultData(l,o,n,s,r,c,p,f),this.createUserList1=[],Object(d["b"])("tool/client-user/all?type=".concat(e),d["a"].GET).then((function(e){a.createUserList1=e})),this.fileReceiverList=[]},getDefaultData:function(e,t,a,i,l,o,n,s){this.form.data={channelInfoId:a,deviceId:t,type:e,sn:l,channelName:i,channelType:o,deviceNodeName:n,deviceType:s,id:"",name:"",transmitModel:"",createUser:"",transFile:[{entityId:"",path:""}],delaySync:60,businessTimeId:"",virus:!1,labelEnable:!1,completeEnable:!1,confidentialityEnable:!1,confidentialityLevel:"",maxFileSize:"",fileSizeUnit:"KB",maxFlow:"",maxFlowUnit:"KB/s",businessId:"",filterFileName1:[],filterFileType1:[],filterFileSuffix1:[],filterFileContent1:[],filterFileName:"",filterFileType:"",filterFileSuffix:"",filterFileContent:"",transmitType:"",conflictStrategy:"Cover",resendNum:0,contentCheck:1,sourceDeal:"",backupPath:"",syncDelete:"",level:1,emptyPathDealType:"",emptyFileDealType:1,smallFileFirst:0,smallFileLimit:""}},choseUser:function(e,t){var a=t.data;this.form.data.path="",""!=e&&this.getEntityList(this.form.data.transmitModel,a.attrs.text.id,this.form.data.type,this.form.data.confidentialityLevel)},changeTransmitModel:function(){this.form.data.confidentialityLevel="",this.form.data.labelEnable=!1,this.form.data.completeEnable=!1,this.form.data.confidentialityEnable=!1,this.fetchFileList()},choseLabelEnable:function(){this.form.data.confidentialityEnable=!1,this.form.data.confidentialityLevel=""},choseConfidentialityEnable:function(){this.form.data.confidentialityLevel=""},isEntityDisabled:function(e,t){return this.form.data.transFile.some((function(a,i){return i!==t&&a.entityId===e}))},handleAddValueItem:function(){this.form.data.transFile.length>=10?this.$message.error("不能添加超过十个"):this.form.data.transFile.push({entityId:"",path:""})},deleteValueItem:function(e){1==this.form.data.transFile.length?this.$message.error("不能再删除了"):(this.form.data.transFile.splice(e,1),this.$refs["form"].clearValidate(["transFile.".concat(e,".entityId"),"transFile.".concat(e,".path")]))},fetchFileList:function(){var e=this.form.data,t=e.transmitModel,a=e.createUser,i=e.type,l=e.confidentialityLevel;"receiver"==i?"JSP"===t?a&&i?this.getEntityList(t,a,i,l):this.entityList=[]:t?this.getEntityList(t,"",i,""):this.entityList=[]:"sender"==i&&("JSP"==t?a&&this.getEntityList(t,a,i,""):this.getEntityList(t,"",i,""))},getEntityList:function(e,t,a,i){var l=this;Object(d["b"])("tool/select-options/single-file/entity?type=".concat(a,"&userId=").concat(t,"&confidentialityLevel=").concat(i||"","&transmitModel=").concat(e),d["a"].GET).then((function(e){e.length>=1?l.entityList=Object(n["a"])(e):(l.entityList=[],l.$message.error("该业务用户无相关信息交换设备，请重新选择"))}))},choseFileBusiness:function(e){var t=this;this.$refs["form"].clearValidate(),t.form.data.name="",t.form.data.transmitModel="",t.form.data.labelEnable=!1,t.form.data.completeEnable=!1,t.form.data.confidentialityLevel="",t.form.data.confidentialityEnable=!1,e&&t.fileReceiverList.forEach((function(a){a.businessId==e&&(t.form.data.name=a.name,t.form.data.transmitModel=a.transmitModel,t.form.data.labelEnable=a.labelEnable,t.form.data.completeEnable=a.completeEnable,t.form.data.confidentialityLevel=a.confidentialityLevel,t.form.data.confidentialityEnable=a.confidentialityEnable,""!=a.confidentialityLevel&&Object(d["b"])("tool/select-options/confidentiality",d["a"].GET).then((function(e){t.confidentialityList=Object(n["a"])(e)})))}))},changeSourceDeal:function(e){this.form.data.backupPath="",this.form.data.syncDelete="",this.$refs["form"].clearValidate(),"Copy"==e&&"Total"==this.form.data.transmitType&&(this.form.data.syncDelete=1)},changetransmitType:function(e){this.form.data.syncDelete=1,this.form.data.emptyPathDealType=1,"Total"==e&&"Copy"==this.form.data.sourceDeal&&(this.form.data.syncDelete=1),"Total"==e&&(this.form.data.sourceDeal="Copy",this.$forceUpdate())},changeSmallFileFirst:function(){this.$refs["form"].clearValidate(),this.form.data.maxFileSize=""},clickCancel:function(){this.visible=!1,this.confirmLoading=!1,"create"==this.dialogType||"modify"==this.dialogType||"view"==this.dialogType?(this.$refs["form"].clearValidate(),this.form.data={name:"",type:"",transmitModel:"",createUser:"",transFile:[{entityId:"",path:""}],deviceId:"",delaySync:60,businessTimeId:"",virus:!1,labelEnable:!1,completeEnable:!1,confidentialityEnable:!1,confidentialityLevel:"",maxFileSize:"",fileSizeUnit:"KB",maxFlow:"",maxFlowUnit:"KB/s",businessId:"",filterFileName1:[],filterFileType1:[],filterFileSuffix1:[],filterFileContent1:[],filterFileName:"",filterFileType:"",filterFileSuffix:"",filterFileContent:"",transmitType:"",conflictStrategy:"Cover",resendNum:0,contentCheck:1,sourceDeal:"",backupPath:"",syncDelete:"",level:1,emptyPathDealType:"",emptyFileDealType:1,smallFileFirst:0,smallFileLimit:""},this.fileInfoList={},this.fileStrategyList={},this.filterFileNameList=[],this.filterFileNameList_1=[],this.filterFileTypeList=[],this.filterFileTypeList_1=[],this.filterFileSuffixList=[],this.filterFileSuffixList_1=[],this.filterFileContentList=[],this.filterFileContentList_1=[],this.timeList=[],this.deviceList=[],this.strategyFileList=[],this.fileReceiverList=[]):"test"==this.dialogType&&(this.testData=[])},toJoin:function(e){return 0==e.length?"":e.join(",")},deleteFileItem:function(e){var t=this,a=this;Object(d["b"])("single-file/single-file/delete-cache/".concat(e),d["a"].DELETE).then((function(){a.$message.success("删除成功"),Object(d["b"])("single-file/single-file/all?type=recSender&sn=".concat(t.form.data.sn,"&channelName=").concat(t.form.data.channelName),d["a"].GET).then((function(e){a.fileReceiverList=[{businessId:"",name:"请选择"}].concat(Object(n["a"])(e))}))})).catch((function(){}))},saveClick:function(){var e=this;e.confirmLoading=!0;var t=d["a"].POST;"modify"==e.dialogType&&(t=d["a"].PUT),"create"==e.dialogType||"modify"==e.dialogType?e.$refs["form"].validate((function(a){if(!a)return e.confirmLoading=!1,!1;var i=!0;if("sender"==e.form.data.type){if(e.form.data.filterFileName=e.toJoin(e.form.data.filterFileName1),e.form.data.filterFileType=e.toJoin(e.form.data.filterFileType1),e.form.data.filterFileSuffix=e.toJoin(e.form.data.filterFileSuffix1),e.form.data.filterFileContent=e.toJoin(e.form.data.filterFileContent1),""!=e.form.data.maxFlow&&null!=e.form.data.maxFlow){var l=/^\d+$/;l.test(e.form.data.maxFlow)?"KB/s"==e.form.data.maxFlowUnit?(e.form.data.maxFlow>1048576||e.form.data.maxFlow<10)&&(i=!1,e.$message.error("流量控制输入值不在10KB/s~1048576KB/s范围内")):"MB/s"==e.form.data.maxFlowUnit?(e.form.data.maxFlow>1024||e.form.data.maxFlow<=0)&&(i=!1,e.$message.error("流量控制输入值不在10KB/s~1024MB/s范围内")):"GB/s"==e.form.data.maxFlowUnit&&(e.form.data.maxFlow>1||e.form.data.maxFlow<=0)&&(i=!1,e.$message.error("流量控制输入值不在10KB/s~1GB/s范围内")):(i=!1,e.$message.error("流量控制输入不是非负整数"))}if(""!=e.form.data.maxFileSize&&null!=e.form.data.maxFileSize){var o=/^\d+$/;o.test(e.form.data.maxFileSize)?"KB"==e.form.data.fileSizeUnit?(e.form.data.maxFileSize>10485760||e.form.data.maxFileSize<1)&&(i=!1,e.$message.error("文件大小限制输入值不在1~10485760KB范围内")):"MB"==e.form.data.fileSizeUnit?(e.form.data.maxFileSize>10240||e.form.data.maxFileSize<1)&&(i=!1,e.$message.error("文件大小限制输入值不在1KB~10240MB范围内")):"GB"==e.form.data.fileSizeUnit&&(e.form.data.maxFileSize>10||e.form.data.maxFileSize<1)&&(i=!1,e.$message.error("文件大小限制输入值不在1KB~10GB范围内")):(i=!1,e.$message.error("文件大小限制输入不是非负整数"))}}else"receiver"==e.form.data.type&&e.form.data.labelEnable;i?i&&Object(d["b"])("single-file/single-file",t,e.form.data).then((function(){e.clickCancel(),e.uploadList(e.page,e.pageSize,e.search),"sender"==e.form.data.type&&("create"==e.dialogType?e.$message.success("发送端服务配置已添加成功，请在接收端完成相应服务配置！"):"modify"==e.dialogType&&e.$message.success("发送端服务配置已修改成功，请在接收端检查相应服务配置是否需要同步修改！"))})).catch((function(){e.confirmLoading=!1})):e.confirmLoading=!1})):"delete"==e.dialogType?Object(d["b"])("single-file/single-file/".concat(e.form.data.id),d["a"].DELETE).then((function(){e.clickCancel(),e.uploadList(e.page,e.pageSize,e.search),"sender"==e.form.data.type&&e.$message.success("发送端删除成功，请在接收端也删除该服务！")})).catch((function(){e.confirmLoading=!1})):"dispatch"==e.dialogType?Object(d["b"])("single-file/single-file/apply-send/".concat(e.form.data.id),d["a"].POST).then((function(){e.clickCancel(),e.uploadList(e.page,e.pageSize,e.search)})).catch((function(){e.confirmLoading=!1})):"retract"==e.dialogType?Object(d["b"])("single-file/single-file/retract/".concat(e.form.data.id),d["a"].POST).then((function(){e.clickCancel(),e.uploadList(e.page,e.pageSize,e.search)})).catch((function(){e.confirmLoading=!1})):"config"==e.dialogType?Object(d["b"])("single-file/single-file/config/".concat(e.form.data.id),d["a"].PUT).then((function(){e.clickCancel(),e.uploadList(e.page,e.pageSize,e.search)})).catch((function(){e.confirmLoading=!1})):"remove"==e.dialogType?Object(d["b"])("single-file/single-file/apply-remove/".concat(e.form.data.id),d["a"].POST).then((function(){e.clickCancel(),e.uploadList(e.page,e.pageSize,e.search)})).catch((function(){e.confirmLoading=!1})):"manual"==e.dialogType&&Object(d["b"])("single-file/single-file/sync/".concat(e.form.data.id),d["a"].PUT).then((function(){e.clickCancel(),e.uploadList(e.page,e.pageSize,e.search)})).catch((function(){e.confirmLoading=!1}))},turnNum:function(e){return e.map(Number)},businessTransFileState:function(e){var t=this;Object(d["b"])("single-file/single-file/work-states/".concat(e),d["a"].GET).then((function(e){t.stateData=e.rows})),this.strategyStateVisible=!0},businessTransDbState:function(e){var t=this;Object(d["b"])("single-db/single-db/work-states/".concat(e),d["a"].GET).then((function(e){t.stateData=e.rows})),this.strategyStateVisible=!0},businessTransDataState:function(e){var t=this;Object(d["b"])("single-data/single-data/work-states/".concat(e),d["a"].GET).then((function(e){t.stateData=e.rows})),this.strategyStateVisible=!0},cancelStrategyStateVisible:function(){this.strategyStateVisible=!1},businessTransFileView:function(e){var t=this;Object(d["b"])("single-file/single-file/".concat(e),d["a"].GET).then((function(e){t.form.data=e,null!=t.form.data.filterFileName&&""!=t.form.data.filterFileName?t.form.data.filterFileName1=t.turnNum(t.form.data.filterFileName.split(",")):t.form.data.filterFileName1=[],null!=t.form.data.filterFileType&&""!=t.form.data.filterFileType?t.form.data.filterFileType1=t.turnNum(t.form.data.filterFileType.split(",")):t.form.data.filterFileType1=[],null!=t.form.data.filterFileSuffix&&""!=t.form.data.filterFileSuffix?t.form.data.filterFileSuffix1=t.turnNum(t.form.data.filterFileSuffix.split(",")):t.form.data.filterFileSuffix1=[],null!=t.form.data.filterFileContent&&""!=t.form.data.filterFileContent?t.form.data.filterFileContent1=t.turnNum(t.form.data.filterFileContent.split(",")):t.form.data.filterFileContent1=[],t.openDialog("view")}))},businessTransFileModify:function(e){var t=this;"-1"==e.workState||null==e.workState?Object(d["b"])("single-file/single-file/".concat(e.id),d["a"].GET).then((function(e){t.form.data=e,null!=t.form.data.filterFileName&&""!=t.form.data.filterFileName?t.form.data.filterFileName1=t.turnNum(t.form.data.filterFileName.split(",")):t.form.data.filterFileName1=[],null!=t.form.data.filterFileType&&""!=t.form.data.filterFileType?t.form.data.filterFileType1=t.turnNum(t.form.data.filterFileType.split(",")):t.form.data.filterFileType1=[],null!=t.form.data.filterFileSuffix&&""!=t.form.data.filterFileSuffix?t.form.data.filterFileSuffix1=t.turnNum(t.form.data.filterFileSuffix.split(",")):t.form.data.filterFileSuffix1=[],null!=t.form.data.filterFileContent&&""!=t.form.data.filterFileContent?t.form.data.filterFileContent1=t.turnNum(t.form.data.filterFileContent.split(",")):t.form.data.filterFileContent1=[],t.openDialog("modify")})):t.$confirm({content:"如果服务正在同步中，修改后将停止同步，请谨慎操作！",okText:"确认",cancelText:"取消",onOk:function(){Object(d["b"])("single-file/single-file/".concat(e.id),d["a"].GET).then((function(e){t.form.data=e,null!=t.form.data.filterFileName&&""!=t.form.data.filterFileName?t.form.data.filterFileName1=t.turnNum(t.form.data.filterFileName.split(",")):t.form.data.filterFileName1=[],null!=t.form.data.filterFileType&&""!=t.form.data.filterFileType?t.form.data.filterFileType1=t.turnNum(t.form.data.filterFileType.split(",")):t.form.data.filterFileType1=[],null!=t.form.data.filterFileSuffix&&""!=t.form.data.filterFileSuffix?t.form.data.filterFileSuffix1=t.turnNum(t.form.data.filterFileSuffix.split(",")):t.form.data.filterFileSuffix1=[],null!=t.form.data.filterFileContent&&""!=t.form.data.filterFileContent?t.form.data.filterFileContent1=t.turnNum(t.form.data.filterFileContent.split(",")):t.form.data.filterFileContent1=[],t.openDialog("modify")}))},onCancel:function(){}})},businessTransFileDispatch:function(e){this.form.data.id=e,this.openDialog("dispatch")},businessTransFileRevoke:function(e){this.form.data.id=e,this.openDialog("retract")},businessTransFileMove:function(e){this.form.data.id=e,this.openDialog("remove")},businessTransFileDelete:function(e){this.form.data.id=e.id,this.openDialog("delete")},businessTransFileConnect:function(e){this.form.data.id=e,this.openDialog("test")},transFileConnect:function(e){var t=this;this.resourceVisible=!0,Object(d["b"])("single-file/single-file/status/".concat(e.businessId,"?resourceId=").concat(e.id)).then((function(e){t.testData1=e}))},cancelResourceVisible:function(){this.resourceVisible=!1,this.testData1=[]},businessTransFileManual:function(e){this.form.data.id=e,this.openDialog("manual")},businessTransFileTransmit:function(e){this.form.data.id=e,this.openDialog("config")},handleImportChange:function(e){this.spinning=!0,e.rows.length>0?(this.title="导入",this.spinning=!1,this.importFailedData=e,this.importVisible=!0):this.spinning=!1},batchRemove:function(e){var t=this;t.$confirm({content:"确认批量移除吗？",okText:"确认",cancelText:"取消",onOk:function(){Object(d["b"])("single-file/single-file/batch-remove?ids=".concat(e),d["a"].PUT).then((function(e){var a=e.rows,i=e.msg;a.length>0?(t.title="批量移除",t.importFailedData.rows=a,t.importFailedData.msg=i,t.importVisible=!0,t.uploadList(t.page,t.pageSize,t.search)):(t.$message.success("批量申请移除成功!"),t.uploadList(t.page,t.pageSize,t.search))}))},onCancel:function(){}})},batchDispatch:function(e){var t=this;t.$confirm({content:"确认批量申请下发吗？",okText:"确认",cancelText:"取消",onOk:function(){Object(d["b"])("single-file/single-file/batch-send?ids=".concat(e),d["a"].PUT).then((function(e){var a=e.rows,i=e.msg;a.length>0?(t.title="批量申请下发",t.importFailedData.rows=a,t.importFailedData.msg=i,t.importVisible=!0,t.uploadList(t.page,t.pageSize,t.search)):(t.$message.success("批量申请下发成功！"),t.uploadList(t.page,t.pageSize,t.search))}))},onCancel:function(){}})},batchDelete:function(e){var t=this;t.$confirm({content:"确认批量删除吗？",okText:"确认",cancelText:"取消",onOk:function(){Object(d["b"])("single-file/single-file/batch-delete?ids=".concat(e),d["a"].DELETE).then((function(e){var a=e.rows,i=e.msg;a.length>0?(t.title="批量删除",t.importFailedData.rows=a,t.importFailedData.msg=i,t.importVisible=!0,t.uploadList(t.page,t.pageSize,t.search)):(t.$message.success("批量删除成功！"),t.uploadList(t.page,t.pageSize,t.search))}))},onCancel:function(){}})},clickCancelImport:function(){var e=this;this.importVisible=!1,setTimeout((function(){e.importFailedData={}}),200)},linkDetection:function(e,t){var a=JSON.parse(JSON.stringify(t));a.type="DX",this.dialog.open({state:"link",params:a})},businessApproval:function(e){this.ApprovalDialog.open({state:"approval",parent:this,params:{businessId:e.id,businessIds:void 0,type:e.approvalState}})},batchDispatchApproval:function(){this.ApprovalDialog.open({state:"approval",parent:this,params:{businessId:void 0,businessIds:[],type:5,location:"",busiType:"single-file"}})},batchRemoveApproval:function(){this.ApprovalDialog.open({state:"approval",parent:this,params:{businessId:void 0,businessIds:[],type:8,location:"",busiType:"single-file"}})},showApprovalOpinion:function(e){this.ApprovalDialog.open({state:"opinion",params:{businessId:e}})},clientStateView:function(e){var t=this;Object(d["b"])("/single-file/single-file/client-status/".concat(e),d["a"].GET).then((function(e){t.clientStateData=e,t.clientStateVisible=!0}))},cancelClientStateVisible:function(){var e=this;this.clientStateVisible=!1,setTimeout((function(){e.clientStateData=[]}),200)}},destroyed:function(){},beforeDestroy:function(){}},w=L,C=(a("1545"),a("2877")),D=Object(C["a"])(w,i,l,!1,null,"58f28025",null);t["default"]=D.exports},fd52:function(e,t,a){}}]);