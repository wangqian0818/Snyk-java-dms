(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45a333da"],{"10d2":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"device-channel-selector"},[i("a-cascader",{staticStyle:{width:"100%"},attrs:{options:e.processedOptions,placeholder:"请选择设备与通道","field-names":{label:"name",value:"id",children:"children"},disabled:e.disabled,allowClear:!1},on:{change:e.handleChange},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}})],1)},a=[],r=i("3835"),s=i("b85c"),o=i("2909"),c=i("5530"),l=(i("25eb"),i("a9e3"),i("d81d"),i("99af"),i("b0c0"),i("d7b0")),d={name:"DeviceChannelSelector",props:{showAllChannels:{type:Boolean,default:!1},clearOnInit:{type:Boolean,default:!1},flag:{type:Boolean,default:!1},activeKeyFlag:{type:String,default:""}},data:function(){var e=localStorage.getItem("dmsType"),t=3;return"1"!==e&&"2"!==e||(t=Number.parseInt(e,10)),{selectedValue:[],dmsType:t,disabled:!1,loading:!1,options:[]}},created:function(){var e=this;this.loading=!0,Object(l["d"])(this.activeKeyFlag).then((function(t){var i=t.data;e.options=i||[],e.loading=!1})).catch((function(){e.options=[],e.loading=!1}))},computed:{processedOptions:function(){return this.showAllChannels&&0!==this.options.length?this.options.map((function(e){var t={id:"",name:"全部通道"};return Object(c["a"])(Object(c["a"])({},e),{},{children:e.children?[t].concat(Object(o["a"])(e.children)):[]})})):this.options}},watch:{options:{immediate:!0,handler:function(e){e&&e.length>0?this.setDefaultSelection():this.selectedValue=[]}},dmsType:function(){this.setDefaultSelection()}},methods:{findNodeById:function(e,t){var i,n=Object(s["a"])(e);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.id===t)return a;if(a.children&&a.children.length>0){var r=this.findNodeById(a.children,t);if(r)return r}}}catch(o){n.e(o)}finally{n.f()}return null},getChannelInfoByValue:function(e){if(!e||e.length<2)return null;var t=Object(r["a"])(e,2),i=t[0],n=t[1],a=this.findNodeById(this.options,i);if(!a||!a.children)return null;var s=this.findNodeById(a.children,n);return s?{sn:s.sn||"",channelName:s.name||"",channelType:s.channelType||"",deviceNodeName:s.deviceNodeName||"",deviceType:s.deviceType||"",deviceId:i,channelInfoId:n}:null},setDefaultSelection:function(){var e=this;this.loading=!0,this.$nextTick((function(){if(e.clearOnInit)return e.selectedValue=[],void(e.loading=!1);if(0===e.processedOptions.length)return e.selectedValue=[],void(e.loading=!1);var t=e.processedOptions[0];switch(e.dmsType){case 1:e.disabled=!0,t.children&&t.children.length>0&&(e.selectedValue=[t.id,t.children[0].id]);break;case 2:t.children&&t.children.length>0&&(e.selectedValue=[t.id,t.children[0].id]);break;case 3:t.children&&t.children.length>0&&(e.selectedValue=[t.id,t.children[0].id]);break;default:e.selectedValue=[]}if(e.loading=!1,e.selectedValue.length>0){var i=e.getChannelInfoByValue(e.selectedValue);e.$emit("change",e.selectedValue,i)}}))},resetSelection:function(){this.selectedValue=[],this.setDefaultSelection()},clearSelection:function(){this.selectedValue=[]},handleChange:function(e){this.selectedValue=e;var t=this.getChannelInfoByValue(e);this.$emit("change",e,t)},getSelectedValue:function(){return this.selectedValue},getSelectedChannelInfo:function(){return this.getChannelInfoByValue(this.selectedValue)}}},h=d,u=(i("296d"),i("2877")),f=Object(u["a"])(h,n,a,!1,null,"5ab0cc82",null);t["a"]=f.exports},2860:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"chart-wrapper"},[i("div",{staticClass:"chart-title"},[e._v(e._s(e.displayTitle))]),i("div",{staticClass:"chart-container"},[i("div",{ref:"chartContainer",staticClass:"chart-dom"})])])},a=[],r=i("5530"),s=i("3835"),o=i("53ca"),c=(i("a9e3"),i("99af"),i("d81d"),i("b0c0"),i("d3b7"),i("159b"),i("4fadc"),i("4de4"),i("313e")),l=["#5470C6","#EE6666","#FAC858","#73C0DE","#3BA272","#FC8452","#43B01E","#91CC75","#9A60B4","#EA7CCC","#1E90FF","#FF4500","#32CD32","#8A2BE2","#FF69B4"],d={name:"PieChart",props:{title:{type:String,required:!0},unit:{type:String,default:""},showLegend:{type:Boolean,default:!0},showLabel:{type:Boolean,default:!0},timeType:{type:String,required:!0},specificTime:{type:String,required:!0},location:{type:String,required:!0},data:{type:[Array,Object,String,Number],required:!0},xdata:{type:Array,default:function(){return[]}},emptyText:{type:String,default:"暂无数据"},pieRadius:{type:String,default:"70%"}},data:function(){return{chartInstance:null}},computed:{displayTitle:function(){return"".concat(this.specificTime," ").concat(this.title)}},watch:{data:"updateChart",xdata:"updateChart",specificTime:function(){this.updateChart()}},mounted:function(){this.initChart(),window.addEventListener("resize",this.handleResize)},beforeUnmount:function(){window.removeEventListener("resize",this.handleResize),this.chartInstance&&this.chartInstance.dispose()},methods:{initChart:function(){var e=this.$refs.chartContainer;e&&(this.chartInstance=c["init"](e,null,{renderer:"canvas"}),this.updateChart())},updateChart:function(){if(this.chartInstance){var e=this.formatData(),t=e.length>0,i={graphic:t?null:{elements:[{type:"text",left:"center",top:"center",style:{text:this.emptyText,fontSize:14,color:"#999",textAlign:"center"}}]},tooltip:{trigger:"item",formatter:"{b}: {c} "+this.unit+" ({d}%)"},legend:t&&this.showLegend?{orient:"vertical",left:10,top:"center",data:e.map((function(e){return e.name})),textStyle:{fontSize:12,color:"#666"}}:null,series:t?[{name:this.location,type:"pie",radius:this.pieRadius,data:e,label:{show:!1,formatter:"{b}\n{d}%",position:"inside",alignTo:"none",distanceToLabelLine:0,fontSize:12,fontWeight:"normal",color:"#fff",textShadow:"0 1px 2px rgba(0,0,0,0.5)",padding:[2,4],borderRadius:4,backgroundColor:"rgba(0,0,0,0.3)"},labelLine:{show:!1},avoidLabelOverlap:!1,minAngle:5,emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold",color:"#fff"},itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]:[]};this.chartInstance.setOption(i,{notMerge:!0})}},formatData:function(){var e=this;if(!this.data)return[];var t=[];return Array.isArray(this.data)?t=this.data.map((function(t,i){return"object"===Object(o["a"])(t)&&null!==t?{name:t.name||e.xdata[i]||"分类".concat(i+1),value:Number(t.value||t.val||0)}:{name:e.xdata[i]||"分类".concat(i+1),value:Number(t)}})):"object"===Object(o["a"])(this.data)?Object.entries(this.data).forEach((function(i,n){var a=Object(s["a"])(i,2),r=a[0],o=a[1];t.push({name:e.xdata[n]||r||"分类".concat(n+1),value:Number(o)})})):t.push({name:this.xdata[0]||"数据",value:Number(this.data)}),t.filter((function(e){return e.name&&!isNaN(e.value)&&e.value>0})).map((function(e,t){return Object(r["a"])(Object(r["a"])({},e),{},{itemStyle:{color:l[t%l.length]}})}))},handleResize:function(){var e;null===(e=this.chartInstance)||void 0===e||e.resize()}}},h=d,u=(i("583f"),i("2877")),f=Object(u["a"])(h,n,a,!1,null,"47e74f10",null);t["a"]=f.exports},2909:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("6b75");function a(e){if(Array.isArray(e))return Object(n["a"])(e)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=i("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return a(e)||r(e)||Object(s["a"])(e)||o()}},"296d":function(e,t,i){"use strict";i("e9bd")},"2b16":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"chart-wrapper"},[i("div",{staticClass:"chart-title"},[e._v(e._s(e.title))]),i("div",{staticClass:"chart-container"},[i("div",{ref:"chartContainer",staticClass:"chart-dom"})])])},a=[],r=(i("99af"),i("a9e3"),i("498a"),i("4e82"),i("a15b"),i("d81d"),i("fb6a"),i("b0c0"),i("313e")),s=["#5470C6","#EE6666","#FAC858","#73C0DE","#3BA272"],o={name:"BarChart",props:{title:{type:String,default:"文件同步服务流量排名"},data:{type:Array,default:function(){return[]}},xdata:{type:Array,default:function(){return[]}},unit:{type:String,default:"MB"},specificTime:{type:String,default:""},location:{type:String,required:!0},emptyText:{type:String,default:"暂无数据"},typeText:{type:String,required:!0}},data:function(){return{chartInstance:null,resizeObserver:null,lastRenderKey:""}},computed:{seriesName:function(){return"".concat(this.location).concat(this.typeText)},validData:function(){for(var e=this.data||[],t=this.xdata||[],i=[],n=0;n<Math.min(e.length,t.length);n++){var a=Number(e[n]),r=t[n];!isNaN(a)&&"string"===typeof r&&r.trim()&&i.push({label:r.trim(),value:a})}return 0===i.length?null:i.sort((function(e,t){return t.value-e.value})).reverse()},renderKey:function(){return[this.validData?this.validData.map((function(e){return e.value})).join(","):"null",this.validData?this.validData.map((function(e){return e.label})).join(","):"",this.seriesName,this.unit,this.specificTime].join("|")}},mounted:function(){this.initChartWithDelay(),window.addEventListener("resize",this.handleWindowResize),this.setupResizeObserver()},beforeUnmount:function(){this.destroyChart(),window.removeEventListener("resize",this.handleWindowResize),this.destroyResizeObserver()},watch:{renderKey:"updateChartDebounced"},methods:{initChartWithDelay:function(){var e=this;this.$nextTick((function(){requestAnimationFrame((function(){e.initChart(),e.handleResize()}))}))},setupResizeObserver:function(){var e=this,t=this.$refs.chartContainer;t&&(this.resizeObserver=new ResizeObserver((function(){e.handleResize()})),this.resizeObserver.observe(t))},destroyResizeObserver:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)},handleWindowResize:function(){this.handleResize()},destroyChart:function(){this.chartInstance&&(this.chartInstance.dispose(),this.chartInstance=null),this.resizeObserver&&this.resizeObserver.disconnect()},initChart:function(){var e=this.$refs.chartContainer;if(e){this.chartInstance&&this.chartInstance.dispose();try{this.chartInstance=r["init"](e,null,{renderer:"canvas"}),this.updateChart()}catch(t){}}},updateChartDebounced:function(){var e=this;this.$nextTick((function(){e.updateChart()}))},updateChart:function(){var e=this,t=this.$refs.chartContainer;if(t&&this.chartInstance&&this.renderKey!==this.lastRenderKey){this.lastRenderKey=this.renderKey;var i={};if(null===this.validData)Object.assign(i,{graphic:{elements:[{type:"text",left:"center",top:"center",style:{text:this.emptyText,fontSize:14,color:"#999",textAlign:"center"}}]},title:{show:!1},tooltip:{show:!1},legend:{show:!1},grid:{left:"15%",right:"10%",bottom:"10%",top:"20%"},yAxis:{type:"category",data:[]},xAxis:{type:"value",name:this.unit},series:[{name:this.seriesName,type:"bar",data:[]}]});else{var n=this.validData.map((function(e){var t=20;return e.label.length>t?"".concat(e.label.slice(0,t),"..."):e.label})),a=this.validData.map((function(e,t){return{value:e.value,itemStyle:{color:s[t%s.length]}}}));Object.assign(i,{title:{text:"".concat(this.specificTime?this.specificTime+" ":"").concat(this.seriesName),left:10,top:10,textStyle:{color:"#333",fontSize:12}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},confine:!0,formatter:function(t){var i=t[0];return"".concat(i.name,"<br/>").concat(e.seriesName,": ").concat(i.value," ").concat(e.unit)}},grid:{left:"20%",right:"12%",bottom:"10%",top:"20%",containLabel:!0},yAxis:{type:"category",data:n,axisLabel:{fontSize:12,color:"#666",interval:0},axisLine:{lineStyle:{color:"#ccc"}},splitLine:{show:!1}},xAxis:{type:"value",name:this.unit,nameTextStyle:{fontSize:12,color:"#666"},axisLabel:{color:"#666",fontSize:12},splitLine:{lineStyle:{color:"#f5f5f5"}}},series:[{name:this.seriesName,type:"bar",data:a,barWidth:28,emphasis:{focus:"series",itemStyle:{shadowBlur:8,shadowColor:"rgba(0,0,0,0.2)"}}}]}),i.graphic&&delete i.graphic}this.chartInstance.setOption(i,{notMerge:!0})}},handleResize:function(){var e=this;this.chartInstance&&(this._resizeTimer&&cancelAnimationFrame(this._resizeTimer),this._resizeTimer=requestAnimationFrame((function(){var t;null===(t=e.chartInstance)||void 0===t||t.resize({animation:{duration:200}})})))}}},c=o,l=(i("9fe2"),i("2877")),d=Object(l["a"])(c,n,a,!1,null,"12cd4735",null);t["a"]=d.exports},"2c36":function(e,t,i){},3835:function(e,t,i){"use strict";function n(e){if(Array.isArray(e))return e}i.d(t,"a",(function(){return o}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function a(e,t){var i=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,a,r=[],s=!0,o=!1;try{for(i=i.call(e);!(s=(n=i.next()).done);s=!0)if(r.push(n.value),t&&r.length===t)break}catch(c){o=!0,a=c}finally{try{s||null==i["return"]||i["return"]()}finally{if(o)throw a}}return r}}var r=i("06c5");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){return n(e)||a(e,t)||Object(r["a"])(e,t)||s()}},"4dff":function(e,t,i){},"4e82":function(e,t,i){"use strict";var n=i("23e7"),a=i("e330"),r=i("59ed"),s=i("7b0b"),o=i("07fa"),c=i("577e"),l=i("d039"),d=i("addb"),h=i("a640"),u=i("04d1"),f=i("d998"),p=i("2d00"),v=i("512ce"),m=[],y=a(m.sort),b=a(m.push),g=l((function(){m.sort(void 0)})),C=l((function(){m.sort(null)})),w=h("sort"),S=!l((function(){if(p)return p<70;if(!(u&&u>3)){if(f)return!0;if(v)return v<603;var e,t,i,n,a="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)m.push({k:t+n,v:i})}for(m.sort((function(e,t){return t.v-e.v})),n=0;n<m.length;n++)t=m[n].k.charAt(0),a.charAt(a.length-1)!==t&&(a+=t);return"DGBEFHACIJK"!==a}})),x=g||!C||!w||!S,z=function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:c(t)>c(i)?1:-1}};n({target:"Array",proto:!0,forced:x},{sort:function(e){void 0!==e&&r(e);var t=s(this);if(S)return void 0===e?y(t):y(t,e);var i,n,a=[],c=o(t);for(n=0;n<c;n++)n in t&&b(a,t[n]);d(a,z(e)),i=a.length,n=0;while(n<i)t[n]=a[n++];while(n<c)delete t[n++];return t}})},"4fadc":function(e,t,i){var n=i("23e7"),a=i("6f53").entries;n({target:"Object",stat:!0},{entries:function(e){return a(e)}})},"542d":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"chart-wrapper"},[i("div",{staticClass:"chart-title"},[e._v(e._s(e.title))]),i("div",{staticClass:"chart-container"},[i("div",{ref:"chartContainer",staticClass:"chart-dom"}),e.hasData?e._e():i("div",{staticClass:"empty-state"},[e._v(" "+e._s(e.emptyText)+" ")])])])},a=[],r=i("3835"),s=i("2909"),o=(i("99af"),i("313e")),c={name:"LineChart",props:{title:{type:String,required:!0},timeType:{type:String,required:!0},specificTime:{type:String,required:!0},location:{type:String,required:!0},data:{type:Array,default:function(){return[]}},xdata:{type:Array,default:function(){return[]}},unit:{type:String,default:""},emptyText:{type:String,default:"暂无数据"},typeText:{type:String,default:""}},data:function(){return{chart:null,localXData:[]}},computed:{hasData:function(){return this.data.length>0&&this.localXData.length>0&&this.data.length===this.localXData.length},lineColor:function(){return"#5470C6"},seriesName:function(){return"".concat(this.location).concat(this.typeText)}},watch:{data:{handler:"updateChart",deep:!0},xdata:{handler:function(e){this.localXData=Array.isArray(e)?Object(s["a"])(e):[],this.updateChart()},immediate:!0,deep:!0},location:{handler:"updateChart"},typeText:{handler:"updateChart"}},mounted:function(){var e=this;this.localXData=Array.isArray(this.xdata)?Object(s["a"])(this.xdata):[],this.initChart(),window.addEventListener("resize",this.handleResize),this.resizeObserver=new ResizeObserver((function(){setTimeout((function(){return e.handleResize()}),100)})),this.resizeObserver.observe(this.$el)},beforeUnmount:function(){this.chart&&this.chart.dispose(),window.removeEventListener("resize",this.handleResize),this.resizeObserver&&this.resizeObserver.disconnect()},methods:{initChart:function(){var e=this.$refs.chartContainer;if(e){var t=e.getBoundingClientRect();0!==t.width&&0!==t.height&&(this.chart=o["init"](e),this.updateChart())}},updateChart:function(){var e=this;if(this.chart){var t={tooltip:{trigger:"axis",confine:!0,backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:"#ddd",borderWidth:1,textStyle:{color:"#333"},formatter:function(t){var i=Object(r["a"])(t,1),n=i[0];return"".concat(e.localXData[n.dataIndex],"<br/>").concat(e.seriesName,"：").concat(n.value," ").concat(e.unit)}},grid:{left:"8%",right:"15%",bottom:"18%",top:"12%",containLabel:!0},xAxis:{type:"category",data:this.localXData,show:!0,axisLine:{show:!0,lineStyle:{color:"#ccc"}},axisTick:{show:!1},axisLabel:{show:!0,color:"#666",fontSize:12,rotate:70,overflow:"truncate",interval:0,margin:15},splitLine:{show:!1}},yAxis:{type:"value",name:this.unit,nameTextStyle:{color:"#666",fontSize:12,padding:[0,10,0,0]},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#666",fontSize:12},splitLine:{lineStyle:{color:"#f5f5f5"}}},series:[{name:this.seriesName,type:"line",data:this.data,symbol:"circle",symbolSize:6,itemStyle:{color:this.lineColor},lineStyle:{color:this.lineColor,width:2},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.3)"}}}],legend:{data:[this.seriesName],right:"8%",top:"5%",textStyle:{fontSize:12,color:"#666"},icon:"circle"}};this.chart.setOption(t)}else this.initChart()},handleResize:function(){this.chart&&this.chart.resize({width:"auto",height:"auto"})}}},l=c,d=(i("755c"),i("2877")),h=Object(d["a"])(l,n,a,!1,null,"7abac1c7",null);t["a"]=h.exports},"583f":function(e,t,i){"use strict";i("dccf")},"755c":function(e,t,i){"use strict";i("2c36")},"9fe2":function(e,t,i){"use strict";i("4dff")},dccf:function(e,t,i){},e9bd:function(e,t,i){}}]);