(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bfae081"],{1767:function(e,t,a){"use strict";a("284b")},"284b":function(e,t,a){},2881:function(e,t,a){},3206:function(e,t,a){"use strict";a("2881")},"4d1b":function(e,t,a){},c8af:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"page-menu"},[a("a-radio-group",{attrs:{value:e.menu},on:{change:e.handleMenuChange}},[e._l(e.menuLists,(function(t,i){return[e.permissionDeviceMenu.includes(t.value)?a("a-radio-button",{key:i,attrs:{value:t.value}},[e._v(e._s(t.menuName))]):e._e()]}))],2)],1),a("a-card",{staticStyle:{clear:"both"}},[1==e.menu?a("fileTransForm"):2==e.menu?a("dbTransForm"):e._e()],1)],1)},n=[],r=(a("d3b7"),a("159b"),a("25eb"),a("a9e3"),a("c2f2")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"title"},[e._v("查询条件")]),a("div",{staticClass:"content"},[a("div",{staticClass:"filter-container"},[1!=e.dmsType?a("span",{staticClass:"inner",staticStyle:{width:"200px","margin-right":"20px"}},[a("b-cascader",{ref:"cascaderRef",attrs:{"show-all-channels":!1,"clear-on-init":!1},on:{change:e.cascaderHandler}})],1):e._e(),a("a-select",{staticStyle:{width:"150px","margin-right":"16px"},attrs:{options:e.timeTypeOptions,placeholder:"请选择报表类型"},on:{change:e.handleReportTypeChange},model:{value:e.search.timeType,callback:function(t){e.$set(e.search,"timeType",t)},expression:"search.timeType"}}),a("a-date-picker",{staticStyle:{width:"200px","margin-right":"16px"},attrs:{format:e.datePickerProps.format,allowClear:!1,"disabled-date":e.disabledDate,placeholder:e.datePickerProps.placeholder,picker:e.datePickerProps.picker},on:{change:e.handleDateChange},model:{value:e.search.datePickerValue,callback:function(t){e.$set(e.search,"datePickerValue",t)},expression:"search.datePickerValue"}}),a("a-select",{staticStyle:{width:"150px","margin-right":"16px"},attrs:{options:e.locationOptions,placeholder:"请选择位置"},on:{change:e.handleSearch},model:{value:e.search.location,callback:function(t){e.$set(e.search,"location",t)},expression:"search.location"}}),a("a-button",{attrs:{type:"primary",loading:e.isLoading,disabled:e.isLoading},on:{click:e.handleSearch}},[e._v("查询")])],1)])]),a("a-spin",{attrs:{spinning:e.isLoading,tip:"正在加载，请稍后"}},[a("div",{staticClass:"body"},[a("a-row",[a("a-col",{attrs:{span:24}},[a("a-card",{staticStyle:{"margin-top":"30px",padding:"20px 0"}},[a("a-row",{staticStyle:{"margin-bottom":"30px",padding:"0 20px"},attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("LineChart",{ref:"lineChart1",attrs:{title:"文件同步服务流量统计图",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端",data:e.chartData.bytesList,xdata:e.chartData.xList,unit:"MB","empty-text":e.emptyText,typeText:"流量数"}})],1),a("a-col",{attrs:{span:12}},[a("LineChart",{ref:"lineChart2",attrs:{title:"文件同步服务文件数统计图",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端",data:e.chartData.numList,xdata:e.chartData.xList,unit:"个","empty-text":e.emptyText,typeText:"文件数"}})],1)],1),a("a-row",{staticStyle:{"margin-bottom":"30px",padding:"0 20px"},attrs:{gutter:20}},[a("a-col",{attrs:{span:24}},[a("div",{staticClass:"table-title"},[e._v("文件服务"+e._s(e.timeSegmentDesc)+"统计表")]),a("div",{staticClass:"table-container"},[a("a-table",{attrs:{columns:e.columns1,"data-source":e.chartData.byteNumList,pagination:!1,scroll:{y:300},bordered:"",locale:{emptyText:e.emptyText},rowKey:function(e){return e.timePeriod||e.key}},scopedSlots:e._u([{key:"bodyCell",fn:function(t){var a=t.column,i=t.record;return[["inFlow","outFlow"].includes(a.dataIndex)?[e._v(" "+e._s(e.formatFlow(i[a.dataIndex]))+" ")]:e._e()]}}])})],1)])],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-card",{staticStyle:{"margin-top":"30px",padding:"20px 0"}},[a("a-row",{staticStyle:{"margin-bottom":"30px",padding:"0 20px"},attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("BarChart",{ref:"barChart1",attrs:{title:"文件同步服务流量TOP5排名",data:e.chartData.bytesTop,xdata:e.chartData.bytesTopName,unit:"MB",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端","empty-text":e.emptyText,typeText:"流量数"}})],1),a("a-col",{attrs:{span:12}},[a("BarChart",{ref:"barChart2",attrs:{title:"文件同步服务文件数TOP5排名",data:e.chartData.numTop,xdata:e.chartData.numTopName,unit:"个",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端","empty-text":e.emptyText,typeText:"文件数"}})],1),a("a-col",{attrs:{span:12}},[a("PieChart",{ref:"pieChart1",attrs:{title:"文件同步服务输出流量占比",data:e.chartData.bytesZb,xdata:e.chartData.bytesZbName,unit:"MB",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端","empty-text":e.emptyText}})],1),a("a-col",{attrs:{span:12}},[a("PieChart",{ref:"pieChart2",attrs:{title:"文件同步服务输出文件数占比",data:e.chartData.numZb,xdata:e.chartData.numZbName,unit:"个",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端","empty-text":e.emptyText}})],1)],1),a("a-row",{staticStyle:{"margin-bottom":"30px",padding:"0 20px"},attrs:{gutter:20}},[a("a-col",{attrs:{span:24}},[a("div",{staticClass:"table-title"},[e._v("文件同步服务"+e._s(e.timeSummaryDesc)+"排名表")]),a("div",{staticClass:"table-container"},[a("a-table",{attrs:{columns:e.columns2,"data-source":e.chartData.busiList,pagination:!1,scroll:{y:300},bordered:"",locale:{emptyText:e.emptyText},rowKey:function(e){return e.name||e.key}},scopedSlots:e._u([{key:"bodyCell",fn:function(t){var a=t.column,i=t.record;return[["inFlow","outFlow"].includes(a.dataIndex)?[e._v(" "+e._s(e.formatFlow(i[a.dataIndex]))+" ")]:e._e(),"ratio"===a.dataIndex?[e._v(e._s((i[a.dataIndex]||0).toFixed(2))+"%")]:e._e()]}}])})],1)])],1)],1)],1)],1)],1)])],1)},c=[],o=a("1da1"),l=a("ade3"),m=(a("96cf"),a("ac1f"),a("841c"),a("99af"),a("b680"),a("c1df")),d=a.n(m),u=a("542d"),p=a("2b16"),h=a("2860"),y=a("b775"),b=a("10d2"),f={DAY:"day",WEEK:"week",MONTH:"month"},T={SENDER:"sender",RECEIVER:"receiver"},x={name:"FileSyncAnalysisReport",components:{LineChart:u["a"],BarChart:p["a"],PieChart:h["a"],BCascader:b["a"]},mixins:[r["a"]],data:function(){return{search:{deviceId:"",channelInfoId:"",timeType:f.DAY,location:T.SENDER,datePickerValue:d()()},isLoading:!1,chartData:{byteNumList:[],xList:[],busiList:[],bytesList:[],numList:[],bytesTop:[],bytesTopName:[],numTop:[],numTopName:[],bytesZb:[],bytesZbName:[],numZb:[],numZbName:[]}}},computed:{displaySpecificTime:function(){var e=this.search,t=e.timeType,a=e.datePickerValue;if(!d.a.isMoment(a))return"";switch(t){case f.DAY:return a.format("YYYY-MM-DD");case f.WEEK:var i=a.isoWeek(),n=a.year();return"".concat(n,"-第").concat(i,"周");case f.MONTH:return a.format("YYYY-MM");default:return""}},timeTypeOptions:function(){return[{value:f.DAY,label:"日报表"},{value:f.WEEK,label:"周报表"},{value:f.MONTH,label:"月报表"}]},locationOptions:function(){return[{value:T.SENDER,label:"发送端"},{value:T.RECEIVER,label:"接收端"}]},datePickerProps:function(){var e,t=(e={},Object(l["a"])(e,f.DAY,{format:"YYYY-MM-DD",placeholder:"请选择日期",picker:void 0}),Object(l["a"])(e,f.WEEK,{format:"YYYY-第WW周",placeholder:"请选择周",picker:"week"}),Object(l["a"])(e,f.MONTH,{format:"YYYY-MM",placeholder:"请选择月份",picker:"month"}),e);return t[this.search.timeType]},timeSegmentDesc:function(){var e,t=(e={},Object(l["a"])(e,f.DAY,"逐时"),Object(l["a"])(e,f.WEEK,"逐日"),Object(l["a"])(e,f.MONTH,"逐日"),e);return t[this.search.timeType]},timeSummaryDesc:function(){var e,t=(e={},Object(l["a"])(e,f.DAY,"当日"),Object(l["a"])(e,f.WEEK,"当周"),Object(l["a"])(e,f.MONTH,"当月"),e);return t[this.search.timeType]},locationText:function(){return this.search.location===T.SENDER?"发送端":"接收端"},emptyText:function(){return"暂无".concat(this.timeSummaryDesc).concat(this.locationText,"文件服务数据")},columns1:function(){return[{title:"时间段",dataIndex:"fieldName",key:"fieldName",align:"center"},{title:"".concat("sender"==this.search.location?"发送端":"接收端","流量(MB)"),dataIndex:"fieldByte",key:"fieldByte",align:"center"},{title:"".concat("sender"==this.search.location?"发送端":"接收端","文件(个)"),dataIndex:"fieldNum",key:"fieldNum",align:"center"}]},columns2:function(){return[{title:"服务名",dataIndex:"appName",key:"appName",align:"center"},{title:"".concat("sender"==this.search.location?"发送端":"接收端","流量(MB)"),dataIndex:"totalBytes",key:"totalBytes",align:"center"},{title:"".concat("sender"==this.search.location?"发送端":"接收端","文件数(个)"),dataIndex:"totalNum",key:"totalNum",align:"center"}]}},mounted:function(){1==this.dmsType&&this.handleSearch()},methods:{initDateValue:function(){var e=d()();switch(this.search.timeType){case f.DAY:this.search.datePickerValue=e.clone();break;case f.WEEK:this.search.datePickerValue=e.clone().isoWeekday(1);break;case f.MONTH:this.search.datePickerValue=e.clone();break}},handleDateChange:function(e){this.search.datePickerValue=e?e.clone():d()(),this.handleSearch()},handleReportTypeChange:function(e){this.search.timeType=e,this.initDateValue(),this.clearChartData(),this.handleSearch()},disabledDate:function(e){return e&&e>d()().endOf("day")},formatDateForApi:function(e){if(!d.a.isMoment(e))return"";switch(this.search.timeType){case f.DAY:return e.format("YYYY-MM-DD");case f.WEEK:return e.isoWeekday(1).format("YYYY-MM-DD");case f.MONTH:return e.format("YYYY-MM");default:return""}},formatFlow:function(e){if("number"!==typeof e||isNaN(e))return"0 B";var t=1024,a=1024*t;return e<t?"".concat(e," B"):e<a?"".concat((e/t).toFixed(2)," KB"):"".concat((e/a).toFixed(2)," MB")},clearChartData:function(){this.chartData={byteNumList:[],xList:[],busiList:[],bytesList:[],numList:[],bytesTop:[],bytesTopName:[],numTop:[],numTopName:[],bytesZb:[],bytesZbName:[],numZb:[],numZbName:[]}},cascaderHandler:function(e){this.search.deviceId=e[0],this.search.channelInfoId=e[1],this.handleSearch()},handleSearch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,n,r,s,c,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.search,i=a.timeType,n=a.datePickerValue,r=a.location,s=a.channelInfoId,c=a.deviceId,i&&d.a.isMoment(n)&&r){t.next=4;break}return e.$message.warning("请完善报表类型、时间和位置选择"),t.abrupt("return");case 4:if(!e.isLoading){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,e.isLoading=!0,e.clearChartData(),o={channelInfoId:s,deviceId:c,type:i,typeValue:e.formatDateForApi(n),transType:r},t.next=12,Object(y["b"])("form/file-forms",y["a"].POST,o);case 12:l=t.sent,e.chartData={byteNumList:l.byteNumList||[],xList:l.xList||[],busiList:l.busiList||[],bytesList:l.bytesList||[],numList:l.numList||[],bytesTop:l.bytesTop||[],bytesTopName:l.bytesTopName||[],numTop:l.numTop||[],numTopName:l.numTopName||[],bytesZb:l.bytesZb||[],bytesZbName:l.bytesZbName||[],numZb:l.numZb||[],numZbName:l.numZbName||[]},t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](6),e.$message.error("数据加载失败：".concat(t.t0.message||"未知错误")),e.clearChartData();case 20:return t.prev=20,e.isLoading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[6,16,20,23]])})))()}}},g=x,D=(a("1767"),a("2877")),v=Object(D["a"])(g,s,c,!1,null,"72f93630",null),N=v.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"title"},[e._v("查询条件")]),a("div",{staticClass:"content"},[a("div",{staticClass:"filter-container"},[1!=e.dmsType?a("span",{staticClass:"inner",staticStyle:{width:"200px","margin-right":"20px"}},[a("b-cascader",{ref:"cascaderRef",attrs:{"show-all-channels":!1,"clear-on-init":!1},on:{change:e.cascaderHandler}})],1):e._e(),a("a-select",{staticStyle:{width:"150px","margin-right":"16px"},attrs:{options:e.timeTypeOptions,placeholder:"请选择报表类型"},on:{change:e.handleReportTypeChange},model:{value:e.search.timeType,callback:function(t){e.$set(e.search,"timeType",t)},expression:"search.timeType"}}),a("a-date-picker",{staticStyle:{width:"200px","margin-right":"16px"},attrs:{format:e.datePickerProps.format,allowClear:!1,"disabled-date":e.disabledDate,placeholder:e.datePickerProps.placeholder,picker:e.datePickerProps.picker},on:{change:e.handleDateChange},model:{value:e.search.datePickerValue,callback:function(t){e.$set(e.search,"datePickerValue",t)},expression:"search.datePickerValue"}}),a("a-select",{staticStyle:{width:"150px","margin-right":"16px"},attrs:{options:e.locationOptions,placeholder:"请选择位置"},on:{change:e.handleSearch},model:{value:e.search.location,callback:function(t){e.$set(e.search,"location",t)},expression:"search.location"}}),a("a-button",{attrs:{type:"primary",loading:e.isLoading,disabled:e.isLoading},on:{click:e.handleSearch}},[e._v("查询")])],1)])]),a("a-spin",{attrs:{spinning:e.isLoading,tip:"正在加载，请稍后"}},[a("div",{staticClass:"body"},[a("a-row",[a("a-col",{attrs:{span:24}},[a("a-card",{staticStyle:{"margin-top":"30px",padding:"20px 0"}},[a("a-row",{staticStyle:{"margin-bottom":"30px",padding:"0 20px"},attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("LineChart",{ref:"lineChart1",attrs:{title:"单向数据库同步流量统计图",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端",data:e.chartData.bytesList,xdata:e.chartData.xList,unit:"MB","empty-text":e.emptyText,typeText:"流量数"}})],1),a("a-col",{attrs:{span:12}},[a("LineChart",{ref:"lineChart2",attrs:{title:"单向数据库同步记录条数统计图",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端",data:e.chartData.numList,xdata:e.chartData.xList,unit:"条","empty-text":e.emptyText,typeText:"记录数"}})],1)],1),a("a-row",{staticStyle:{"margin-bottom":"30px",padding:"0 20px"},attrs:{gutter:20}},[a("a-col",{attrs:{span:24}},[a("div",{staticClass:"table-title"},[e._v("单向数据库同步"+e._s(e.timeSegmentDesc)+"统计表")]),a("div",{staticClass:"table-container"},[a("a-table",{attrs:{columns:e.columns1,"data-source":e.chartData.byteNumList,pagination:!1,scroll:{y:300},bordered:"",locale:{emptyText:e.emptyText},rowKey:function(e){return e.timePeriod||e.key}},scopedSlots:e._u([{key:"bodyCell",fn:function(t){var a=t.column,i=t.record;return[["inFlow","outFlow"].includes(a.dataIndex)?[e._v(" "+e._s(e.formatFlow(i[a.dataIndex]))+" ")]:e._e()]}}])})],1)])],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-card",{staticStyle:{"margin-top":"30px",padding:"20px 0"}},[a("a-row",{staticStyle:{"margin-bottom":"30px",padding:"0 20px"},attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("BarChart",{ref:"barChart1",attrs:{title:"单向数据库同步流量TOP5排名",data:e.chartData.bytesTop,xdata:e.chartData.bytesTopName,unit:"MB",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端","empty-text":e.emptyText,typeText:"流量数"}})],1),a("a-col",{attrs:{span:12}},[a("BarChart",{ref:"barChart2",attrs:{title:"单向数据库同步记录条数TOP5排名",data:e.chartData.numTop,xdata:e.chartData.numTopName,unit:"条",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端","empty-text":e.emptyText,typeText:"记录数"}})],1),a("a-col",{attrs:{span:12}},[a("PieChart",{ref:"pieChart1",attrs:{title:"单向数据库同步输出流量占比",data:e.chartData.bytesZb,xdata:e.chartData.bytesZbName,unit:"MB",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端","empty-text":e.emptyText}})],1),a("a-col",{attrs:{span:12}},[a("PieChart",{ref:"pieChart2",attrs:{title:"单向数据库同步输出记录条数占比",data:e.chartData.numZb,xdata:e.chartData.numZbName,unit:"条",timeType:e.search.timeType,specificTime:e.displaySpecificTime,location:"sender"==e.search.location?"发送端":"接收端","empty-text":e.emptyText}})],1)],1),a("a-row",{staticStyle:{"margin-bottom":"30px",padding:"0 20px"},attrs:{gutter:20}},[a("a-col",{attrs:{span:24}},[a("div",{staticClass:"table-title"},[e._v("单向数据库同步"+e._s(e.timeSummaryDesc)+"排名表")]),a("div",{staticClass:"table-container"},[a("a-table",{attrs:{columns:e.columns2,"data-source":e.chartData.busiList,pagination:!1,scroll:{y:300},bordered:"",locale:{emptyText:e.emptyText},rowKey:function(e){return e.name||e.key}},scopedSlots:e._u([{key:"bodyCell",fn:function(t){var a=t.column,i=t.record;return[["inFlow","outFlow"].includes(a.dataIndex)?[e._v(" "+e._s(e.formatFlow(i[a.dataIndex]))+" ")]:e._e(),"ratio"===a.dataIndex?[e._v(e._s((i[a.dataIndex]||0).toFixed(2))+"%")]:e._e()]}}])})],1)])],1)],1)],1)],1)],1)])],1)},S=[],Y={DAY:"day",WEEK:"week",MONTH:"month"},C={SENDER:"sender",RECEIVER:"receiver"},L={name:"FileSyncAnalysisReport",components:{LineChart:u["a"],BarChart:p["a"],PieChart:h["a"],BCascader:b["a"]},mixins:[r["a"]],data:function(){return{search:{deviceId:"",channelInfoId:"",timeType:Y.DAY,location:C.SENDER,datePickerValue:d()()},isLoading:!1,chartData:{byteNumList:[],xList:[],busiList:[],bytesList:[],numList:[],bytesTop:[],bytesTopName:[],numTop:[],numTopName:[],bytesZb:[],bytesZbName:[],numZb:[],numZbName:[]}}},computed:{displaySpecificTime:function(){var e=this.search,t=e.timeType,a=e.datePickerValue;if(!d.a.isMoment(a))return"";switch(t){case Y.DAY:return a.format("YYYY-MM-DD");case Y.WEEK:var i=a.isoWeek(),n=a.year();return"".concat(n,"-第").concat(i,"周");case Y.MONTH:return a.format("YYYY-MM");default:return""}},timeTypeOptions:function(){return[{value:Y.DAY,label:"日报表"},{value:Y.WEEK,label:"周报表"},{value:Y.MONTH,label:"月报表"}]},locationOptions:function(){return[{value:C.SENDER,label:"发送端"},{value:C.RECEIVER,label:"接收端"}]},datePickerProps:function(){var e,t=(e={},Object(l["a"])(e,Y.DAY,{format:"YYYY-MM-DD",placeholder:"请选择日期",picker:void 0}),Object(l["a"])(e,Y.WEEK,{format:"YYYY-第WW周",placeholder:"请选择周",picker:"week"}),Object(l["a"])(e,Y.MONTH,{format:"YYYY-MM",placeholder:"请选择月份",picker:"month"}),e);return t[this.search.timeType]},timeSegmentDesc:function(){var e,t=(e={},Object(l["a"])(e,Y.DAY,"逐时"),Object(l["a"])(e,Y.WEEK,"逐日"),Object(l["a"])(e,Y.MONTH,"逐日"),e);return t[this.search.timeType]},timeSummaryDesc:function(){var e,t=(e={},Object(l["a"])(e,Y.DAY,"当日"),Object(l["a"])(e,Y.WEEK,"当周"),Object(l["a"])(e,Y.MONTH,"当月"),e);return t[this.search.timeType]},locationText:function(){return this.search.location===C.SENDER?"发送端":"接收端"},emptyText:function(){return"暂无".concat(this.timeSummaryDesc).concat(this.locationText,"单向数据库同步数据")},columns1:function(){return[{title:"时间段",dataIndex:"fieldName",key:"fieldName",align:"center"},{title:"".concat("sender"==this.search.location?"发送端":"接收端","流量(MB)"),dataIndex:"fieldByte",key:"fieldByte",align:"center"},{title:"".concat("sender"==this.search.location?"发送端":"接收端","记录条数(个)"),dataIndex:"fieldNum",key:"fieldNum",align:"center"}]},columns2:function(){return[{title:"服务名",dataIndex:"appName",key:"appName",align:"center"},{title:"".concat("sender"==this.search.location?"发送端":"接收端","流量(MB)"),dataIndex:"totalBytes",key:"totalBytes",align:"center"},{title:"".concat("sender"==this.search.location?"发送端":"接收端","记录条数(个)"),dataIndex:"totalNum",key:"totalNum",align:"center"}]}},mounted:function(){1==this.dmsType&&this.handleSearch()},methods:{initDateValue:function(){var e=d()();switch(this.search.timeType){case Y.DAY:this.search.datePickerValue=e.clone();break;case Y.WEEK:this.search.datePickerValue=e.clone().isoWeekday(1);break;case Y.MONTH:this.search.datePickerValue=e.clone();break}},handleDateChange:function(e){this.search.datePickerValue=e?e.clone():d()(),this.handleSearch()},handleReportTypeChange:function(e){this.search.timeType=e,this.initDateValue(),this.clearChartData(),this.handleSearch()},disabledDate:function(e){return e&&e>d()().endOf("day")},formatDateForApi:function(e){if(!d.a.isMoment(e))return"";switch(this.search.timeType){case Y.DAY:return e.format("YYYY-MM-DD");case Y.WEEK:return e.isoWeekday(1).format("YYYY-MM-DD");case Y.MONTH:return e.format("YYYY-MM");default:return""}},formatFlow:function(e){if("number"!==typeof e||isNaN(e))return"0 B";var t=1024,a=1024*t;return e<t?"".concat(e," B"):e<a?"".concat((e/t).toFixed(2)," KB"):"".concat((e/a).toFixed(2)," MB")},clearChartData:function(){this.chartData={byteNumList:[],xList:[],busiList:[],bytesList:[],numList:[],bytesTop:[],bytesTopName:[],numTop:[],numTopName:[],bytesZb:[],bytesZbName:[],numZb:[],numZbName:[]}},cascaderHandler:function(e){this.search.deviceId=e[0],this.search.channelInfoId=e[1],this.handleSearch()},handleSearch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,n,r,s,c,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.search,i=a.timeType,n=a.datePickerValue,r=a.location,s=a.channelInfoId,c=a.deviceId,i&&d.a.isMoment(n)&&r){t.next=4;break}return e.$message.warning("请完善报表类型、时间和位置选择"),t.abrupt("return");case 4:if(!e.isLoading){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,e.isLoading=!0,e.clearChartData(),o={channelInfoId:s,deviceId:c,type:i,typeValue:e.formatDateForApi(n),transType:r},t.next=12,Object(y["b"])("form/db-forms",y["a"].POST,o);case 12:l=t.sent,e.chartData={byteNumList:l.byteNumList||[],xList:l.xList||[],busiList:l.busiList||[],bytesList:l.bytesList||[],numList:l.numList||[],bytesTop:l.bytesTop||[],bytesTopName:l.bytesTopName||[],numTop:l.numTop||[],numTopName:l.numTopName||[],bytesZb:l.bytesZb||[],bytesZbName:l.bytesZbName||[],numZb:l.numZb||[],numZbName:l.numZbName||[]},t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](6),e.$message.error("数据加载失败：".concat(t.t0.message||"未知错误")),e.clearChartData();case 20:return t.prev=20,e.isLoading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[6,16,20,23]])})))()}}},M=L,w=(a("f3ed"),Object(D["a"])(M,k,S,!1,null,"1ebeb9f9",null)),E=w.exports,I="transForm:m",O={name:"transForm",mixins:[r["a"]],components:{fileTransForm:N,dbTransForm:E},filters:{},data:function(){return{permissionDeviceMenu:[],menuLists:[{id:1,value:1,menuName:"单向文件同步报表"},{id:2,value:2,menuName:"单向数据库同步报表"}],menu:""}},created:function(){var e=this,t=JSON.parse(localStorage.getItem("trans-form"));t.forEach((function(t){var a="";a=Number.parseInt(t.index),e.permissionDeviceMenu.push(a)})),this.menu=+sessionStorage.getItem(I)||Number.parseInt(this.permissionDeviceMenu[0]),this.switchMenu(this.menu)},watch:{$route:function(e,t){var a=this;t.path!==e.path&&this.$nextTick((function(){a.dialog&&a.dialog.close()}))},menu:function(e){var t=this,a=JSON.parse(localStorage.getItem("trans-form"));a.forEach((function(a){Number.parseInt(a.index)==e&&(t.readOnly=a.readonly)}))}},methods:{handleMenuChange:function(e){this.switchMenu(e.target.value)},switchMenu:function(e){this.menu=e,sessionStorage.setItem(I,this.menu)}},destroyed:function(){sessionStorage.removeItem(I)},beforeDestroy:function(){this.dialog&&this.dialog.close()}},P=O,_=(a("3206"),Object(D["a"])(P,i,n,!1,null,"0f2e4acb",null));t["default"]=_.exports},f3ed:function(e,t,a){"use strict";a("4d1b")}}]);