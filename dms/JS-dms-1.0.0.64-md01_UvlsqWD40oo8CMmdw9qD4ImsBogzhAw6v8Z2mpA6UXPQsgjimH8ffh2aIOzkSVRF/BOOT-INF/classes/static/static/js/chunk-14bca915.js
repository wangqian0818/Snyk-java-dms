(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14bca915"],{"0555":function(t,a,e){},"19f8":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-select",{staticStyle:{height:"34px"},attrs:{filterOption:t.filterOption,"show-search":t.showSearch,disabled:t.disabled,notFoundContent:"无匹配数据",maxTagCount:t.maxTagCount,placeholder:t.placeholder,"show-arrow":!0,allowClear:""},on:{search:function(a){return t.multipleSearch(a)},blur:t.handleOnBlur,change:t.handleChange,dropdownVisibleChange:t.dropdownVisibleChange},model:{value:t.model,callback:function(a){t.model=a},expression:"model"}},t._l(t.data_1,(function(a){return e("a-select-option",{key:a[t.optionKey],attrs:{text:a[t.titleKey],title:a[t.titleKey],value:a[t.optionKey]}},[t._v(" "+t._s(a[t.titleKey])+" ")])})),1)},o=[],s=e("2909"),n=(e("a9e3"),e("7db0"),e("d3b7"),e("4de4"),e("fb6a"),e("99af"),e("caad"),e("2532"),{name:"BMultipleSelect",props:{disabled:{type:Boolean,default:!1},strategyData:{type:Array,default:function(){return[]}},optionKey:{type:String,default:"id"},titleKey:{type:String,default:"name"},filterOption:{type:Function,default:function(t,a){var e=a.data,i=e.attrs;return i.text.indexOf(t)>-1}},showSearch:{type:Boolean,default:!0},maxTagCount:{type:Number,default:void 0},placeholder:{type:String,default:""},value:{},selectAllFlag:{type:Boolean,default:!0}},model:{prop:"value",event:"change"},components:{},data:function(){return{data_1:[],model:null,searchValue:"",timer:null}},created:function(){this.model=this.value,this.updateData1ForEcho()},methods:{updateData1ForEcho:function(){var t=this,a=this.strategyData.find((function(a){return a[t.optionKey]===t.model})),e=this.strategyData.filter((function(a){return a[t.optionKey]!==t.model}));this.data_1=a?[a].concat(Object(s["a"])(e)).slice(0,100):e.slice(0,100)},handleChange:function(t){this.model=t,this.$emit("change",this.model,"handleChange"),this.updateData1ForEcho()},multipleSearch:function(t){var a=this;this.searchValue=t,this.timer||(this.timer=setTimeout((function(){a.searchValue1(t),a.timer=null}),300))},searchValue1:function(t){var a=this,e=this.strategyData.filter((function(e){return e[a.titleKey].includes(t)}));this.data_1=e.slice(0,100),this.$forceUpdate()},dropdownVisibleChange:function(){this.searchValue="",this.updateData1ForEcho()},handleOnBlur:function(){}},watch:{value:function(t){this.model=t,this.updateData1ForEcho()},strategyData:function(t){this.updateData1ForEcho()}}}),r=n,l=e("2877"),c=Object(l["a"])(r,i,o,!1,null,"59acc14a",null);a["a"]=c.exports},"1cf1":function(t,a,e){"use strict";e("d118")},2709:function(t,a,e){"use strict";e("57c7")},"57c7":function(t,a,e){},a399:function(t,a,e){"use strict";e.r(a);var i,o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"page-menu"},[e("a-radio-group",{attrs:{value:t.menu},on:{change:t.handleMenuChange}},[t._l(t.menuLists,(function(a,i){return[t.permissionDeviceMenu.includes(a.value)?e("a-radio-button",{key:i,attrs:{value:a.value}},[t._v(t._s(a.menuName))]):t._e()]}))],2)],1),"1"==t.menu?e("BBusinessDoubleConfig"):"2"==t.menu?e("BBusinessDoubleGroupMgr"):t._e()],1)},s=[],n=(e("d3b7"),e("159b"),e("25eb"),e("a9e3"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("bdata-show",{attrs:{columns:t.columns,rowKey:"id",data:t.table.data,total:t.table.total,"init-page":t.page,"init-pageSize":t.pageSize,readOnly:t.readOnly,loading:t.loading,activeKey:t.activeKey,importDataUrl:t.importDataUrl,exportDataUrl:t.exportDataUrl,templateUrl:t.templateUrl,linkState:!0,depatch:!0,approver:!0,importAndExport:!0,needDeviece:!0,searchs:t.search,activeKeyFlag:"doubleSG"},on:{change:t.tableParamChanged,create:t.openDialog,batchDispatchApproval:t.batchDispatchApproval,batchRemoveApproval:t.batchRemoveApproval,batchDispatch:t.batchDispatch,batchDelete:t.batchDelete,batchRemove:t.batchRemove,linkDetection:t.linkDetection,handleImportChange:t.handleImportChange},scopedSlots:t._u([{key:"search",fn:function(){return[e("div",[1!=t.dmsType?e("span",{staticClass:"inner"},[e("b-cascader",{ref:"cascaderRef",attrs:{activeKeyFlag:"doubleSG","show-all-channels":!0,"clear-on-init":!0},on:{change:t.cascaderHandler}})],1):t._e(),e("span",{staticClass:"inner"},[e("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入服务ID"},model:{value:t.search.businessId,callback:function(a){t.$set(t.search,"businessId",a)},expression:"search.businessId"}})],1),e("span",{staticClass:"inner"},[e("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入服务名称"},model:{value:t.search.name,callback:function(a){t.$set(t.search,"name",a)},expression:"search.name"}})],1),e("span",{staticClass:"inner"},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择协议"},model:{value:t.search.transmitModel,callback:function(a){t.$set(t.search,"transmitModel",a)},expression:"search.transmitModel"}},[e("a-select-option",{attrs:{value:"TCP"}},[t._v("TCP")]),e("a-select-option",{attrs:{value:"UDP"}},[t._v("UDP")])],1)],1),e("span",{staticClass:"inner"},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择所属业务"},model:{value:t.search.groupId,callback:function(a){t.$set(t.search,"groupId",a)},expression:"search.groupId"}},t._l(t.groupList,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1),e("span",{staticClass:"inner"},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择位置"},model:{value:t.search.transmitType,callback:function(a){t.$set(t.search,"transmitType",a)},expression:"search.transmitType"}},[e("a-select-option",{attrs:{value:"Client"}},[t._v("客户端")]),e("a-select-option",{attrs:{value:"Server"}},[t._v("服务端")])],1)],1),e("span",{staticClass:"inner"},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择下发状态"},model:{value:t.search.workState,callback:function(a){t.$set(t.search,"workState",a)},expression:"search.workState"}},[e("a-select-option",{attrs:{value:"-1"}},[t._v("未下发")]),e("a-select-option",{attrs:{value:"1"}},[t._v("已下发")]),e("a-select-option",{attrs:{value:"2"}},[t._v("未生效")]),e("a-select-option",{attrs:{value:"3"}},[t._v("已生效")]),e("a-select-option",{attrs:{value:"4"}},[t._v("已移除")]),e("a-select-option",{attrs:{value:"11"}},[t._v("下发失败")]),e("a-select-option",{attrs:{value:"12"}},[t._v("移除失败")])],1)],1),e("span",{staticClass:"inner"},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择审批状态"},model:{value:t.search.approvalState,callback:function(a){t.$set(t.search,"approvalState",a)},expression:"search.approvalState"}},[e("a-select-option",{attrs:{value:"5"}},[t._v("下发审批中")]),e("a-select-option",{attrs:{value:"6"}},[t._v("下发审批不通过")]),e("a-select-option",{attrs:{value:"7"}},[t._v("下发审批通过")]),e("a-select-option",{attrs:{value:"8"}},[t._v("移除审批中")]),e("a-select-option",{attrs:{value:"9"}},[t._v("移除审批不通过")]),e("a-select-option",{attrs:{value:"10"}},[t._v("移除审批通过")]),e("a-select-option",{attrs:{value:"13"}},[t._v("未审批")]),e("a-select-option",{attrs:{value:"14"}},[t._v("申请下发撤回")]),e("a-select-option",{attrs:{value:"15"}},[t._v("申请移除撤回")])],1)],1),e("span",{staticClass:"outer"},[e("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.update}},[t._v("查询")])],1),e("span",{staticClass:"outer"},[e("a-button",{staticClass:"button",on:{click:t.resetUpdate}},[t._v("重置")])],1)])]},proxy:!0},{key:"transmitType",fn:function(a){var i=a.record;return["Client"==i.transmitType?e("span",{attrs:{title:"发送端"}},[t._v("客户端")]):"Server"==i.transmitType?e("span",{attrs:{title:"接收端"}},[t._v("服务端")]):t._e()]}},{key:"workState",fn:function(a){var i=a.record;return[e("span",[t._v(t._s(t._f("convertWorkState")(i.workState)))])]}},{key:"approvalState",fn:function(a){var i=a.record;return[e("span",[t._v(t._s(t._f("convertWorkState")(i.approvalState)))])]}},{key:"createUser1",fn:function(a){var i=a.record;return[(i.createUser,e("span",[t._v("-")]))]}},{key:"operations",fn:function(a){var i=a.record;return[e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.businessTransDataView(i.id)}}},[t._v("查看详情")])]),3==t.user.type?[5==i.approvalState||8==i.approvalState?e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.businessApproval(i)}}},[t._v("审批")])]):t._e(),e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.showApprovalOpinion(i.id)}}},[t._v("审批意见")])])]:["Client"!=i.transmitType||t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.businessTransDataTransmit(i.id)}}},[t._v("传输配置")])]),t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.businessTransDataState(i.id)}}},[t._v("状态")])]),t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.showApprovalOpinion(i.id)}}},[t._v("审批意见")])]),"-1"==i.workState&&(13==i.approvalState||6==i.approvalState||7==i.approvalState||10==i.approvalState||14==i.approvalState)||2==i.workState&&7==i.approvalState?[t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.businessTransDataModify(i)}}},[t._v("修改")])])]:t._e(),"-1"==i.workState&&(13==i.approvalState||6==i.approvalState||7==i.approvalState||10==i.approvalState||14==i.approvalState)||(1==i.workState||2==i.workState)&&7==i.approvalState?[t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.businessTransDataDispatch(i.id)}}},[t._v("申请下发")])])]:t._e(),"-1"==i.workState&&(13==i.approvalState||6==i.approvalState||7==i.approvalState||10==i.approvalState||14==i.approvalState)||2==i.workState&&7==i.approvalState?[t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper red",on:{click:function(a){return t.businessTransDataDelete(i)}}},[t._v("删除")])])]:t._e(),"-1"==i.workState&&5==i.approvalState||3==i.workState&&8==i.approvalState?[t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.businessTransDataRevoke(i.id)}}},[t._v("撤回")])])]:t._e(),3!=i.workState||7!=i.approvalState&&9!=i.approvalState&&10!=i.approvalState&&15!=i.approvalState?t._e():[t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.businessTransDataMove(i.id)}}},[t._v("申请移除")])])]]]}}])}),e("a-modal",{attrs:{width:t.getWidth(),closable:!0,title:t.title,"mask-closable":!1,"confirm-loading":t.confirmLoading,footer:"view"===t.dialogType?null:void 0},on:{cancel:t.clickCancel,ok:t.saveClick},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},["delete"===t.dialogType?e("div",[e("div",[t._v(t._s("Client"==t.form.data.transmitType?"删除后，如有对端服务，请同时删除对端服务。确定删除？":"确认删除？"))])]):"dispatch"===t.dialogType?e("div",[t._v("确定申请下发？")]):"retract"===t.dialogType?e("div",[t._v("确定撤回？")]):"config"===t.dialogType?e("div",[t._v("确定传输配置？")]):"remove"===t.dialogType?e("div",[t._v("确定申请移除？")]):"create"==t.dialogType||"modify"==t.dialogType||"view"==t.dialogType?e("a-form-model",{ref:"form",attrs:{model:t.form.data,rules:t.form.rules,"label-col":{span:t.form.labelSpan||8},"wrapper-col":{span:t.form.wrapperSpan||16}}},[e("div",[e("a-row",{attrs:{gutter:12}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"位置",prop:"transmitType"}},[e("a-select",{attrs:{disabled:"create"!=t.dialogType,placeholder:"请选择"},on:{change:t.choseTransmitType},model:{value:t.form.data.transmitType,callback:function(a){t.$set(t.form.data,"transmitType",a)},expression:"form.data.transmitType"}},[e("a-select-option",{attrs:{value:"Client"}},[t._v("客户端")]),e("a-select-option",{attrs:{value:"Server"}},[t._v("服务端")])],1)],1)],1),e("a-col",{attrs:{span:12}},["Client"==t.form.data.transmitType?[e("a-form-model-item",{attrs:{label:"服务名称",prop:"name",rules:t.nameRule}},[e("a-input",{attrs:{placeholder:"请输入",disabled:"create"!=t.dialogType||""==t.form.data.transmitType,maxLength:20},model:{value:t.form.data.name,callback:function(a){t.$set(t.form.data,"name",a)},expression:"form.data.name"}})],1)]:[e("a-form-model-item",{attrs:{label:"服务名称",prop:"name",rules:t.select}},[e("a-select",{attrs:{disabled:"create"!=t.dialogType||""==t.form.data.transmitType,"option-label-prop":"label"},on:{change:t.choseDataReceiver},model:{value:t.form.data.name,callback:function(a){t.$set(t.form.data,"name",a)},expression:"form.data.name"}},t._l(t.dataReceiverList,(function(a,i){return e("a-select-option",{key:i,attrs:{value:a.name,text:a.businessId,label:a.name}},[t._v(" "+t._s(a.name)+" "),""!=a.businessId&&t.form.data.businessId!=a.businessId?e("a-icon",{staticStyle:{position:"absolute",top:"30%",right:"10%"},attrs:{type:"delete"},on:{click:function(e){return e.stopPropagation(),t.deleteDataItem(a.businessId)}}}):t._e()],1)})),1)],1)]],2),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"协议",prop:"transmitModel"}},[e("a-select",{attrs:{disabled:"create"!=t.dialogType||"Client"!=t.form.data.transmitType,placeholder:"请选择"},on:{change:t.choseTransmitModel},model:{value:t.form.data.transmitModel,callback:function(a){t.$set(t.form.data,"transmitModel",a)},expression:"form.data.transmitModel"}},[e("a-select-option",{attrs:{value:""}},[t._v("请选择")]),e("a-select-option",{attrs:{value:"TCP"}},[t._v("TCP")]),e("a-select-option",{attrs:{value:"UDP"}},[t._v("UDP")])],1)],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"应用层协议",prop:"l7Proto"}},[e("a-select",{attrs:{disabled:!("Client"==t.form.data.transmitType&&"TCP"==t.form.data.transmitModel)||"view"==t.dialogType,placeholder:"请选择"},on:{change:t.chosel7Proto},model:{value:t.form.data.l7Proto,callback:function(a){t.$set(t.form.data,"l7Proto",a)},expression:"form.data.l7Proto"}},[e("a-select-option",{attrs:{value:""}},[t._v("请选择")]),e("a-select-option",{attrs:{value:"spice"}},[t._v("虚拟桌面协议")]),e("a-select-option",{attrs:{value:"HTTP"}},[t._v("HTTP")])],1)],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"所属业务",prop:"groupId"}},[e("a-select",{attrs:{disabled:"view"==t.dialogType,placeholder:"请选择所属业务"},model:{value:t.form.data.groupId,callback:function(a){t.$set(t.form.data,"groupId",a)},expression:"form.data.groupId"}},[e("a-select-option",{attrs:{value:""}},[t._v("请选择")]),t._l(t.groupList,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])}))],2)],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"代理模式",prop:"busiMode"}},[e("a-select",{attrs:{disabled:"create"!=t.dialogType||"Client"!=t.form.data.transmitType},model:{value:t.form.data.busiMode,callback:function(a){t.$set(t.form.data,"busiMode",a)},expression:"form.data.busiMode"}},t._l(t.modeList,(function(a){return e("a-select-option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.name))])})),1)],1)],1)],1),e("div",{staticStyle:{"font-size":"16px","font-weight":"bold",margin:"10px 0px"}},[t._v("数据资源信息")]),e("a-row",{attrs:{gutter:8}},[e("a-col",{attrs:{span:24}},[e("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 0 10px"}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"IP地址范围",prop:"sip",rules:t.cirdOrNot}},[e("a-input",{attrs:{maxLength:255,disabled:"Client"!=t.form.data.transmitType||"view"==t.dialogType,placeholder:"请输入IP地址范围"},model:{value:t.form.data.sip,callback:function(a){t.$set(t.form.data,"sip",a)},expression:"form.data.sip"}})],1)],1)],1)],1)],1),e("div",{staticStyle:{"font-size":"16px","font-weight":"bold",margin:"10px 0px"}},[t._v("数据传输服务配置")]),e("a-row",{attrs:{gutter:8}},[e("a-col",{attrs:{span:24}},[e("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 0 10px"}},[e("div",{staticStyle:{"font-size":"14px","font-weight":"bold",margin:"8px 0px"}},[t._v("传输服务配置")]),e("a-row",{attrs:{gutter:15}},[e("a-col",{attrs:{span:24}},[e("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 0 10px"}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"设备",prop:"deviceId"}},[e("a-select",{attrs:{"show-search":!0,"filter-option":t.filterOption,disabled:"",placeholder:"请选择"},model:{value:t.form.data.deviceId,callback:function(a){t.$set(t.form.data,"deviceId",a)},expression:"form.data.deviceId"}},t._l(t.deviceList,(function(a,i){return e("a-select-option",{key:i,attrs:{text:a.name,value:a.id}},[t._v(t._s(a.name))])})),1)],1)],1),8==t.form.data.deviceType?e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"通道",prop:"channelInfoId"}},[e("a-select",{attrs:{"show-search":!0,"filter-option":t.filterOption,disabled:"",placeholder:"请选择"},model:{value:t.form.data.channelInfoId,callback:function(a){t.$set(t.form.data,"channelInfoId",a)},expression:"form.data.channelInfoId"}},t._l(t.channelList,(function(a,i){return e("a-select-option",{key:i,attrs:{text:a.name,value:a.id}},[t._v(t._s(a.name))])})),1)],1)],1):t._e(),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"调度时间",prop:"businessTimeId"}},[e("a-select",{attrs:{disabled:"Client"!=t.form.data.transmitType||"view"==t.dialogType,"show-search":!0,"filter-option":t.filterOption},model:{value:t.form.data.businessTimeId,callback:function(a){t.$set(t.form.data,"businessTimeId",a)},expression:"form.data.businessTimeId"}},t._l(t.timeList,(function(a,i){return e("a-select-option",{key:i,attrs:{value:a.id,text:a.name}},[t._v(t._s(a.name))])})),1)],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"Client"==t.form.data.transmitType&&0==t.form.data.busiMode?"代理IP":"目的IP",prop:"localProxyIp",rules:"Client"==t.form.data.transmitType?t.cidrSingle:t.ip}},[e("a-input",{staticStyle:{width:"100%"},attrs:{disabled:"view"==t.dialogType,maxLength:20,placeholder:"请输入"},model:{value:t.form.data.localProxyIp,callback:function(a){t.$set(t.form.data,"localProxyIp",a)},expression:"form.data.localProxyIp"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"Client"==t.form.data.transmitType&&0==t.form.data.busiMode?"代理端口":"目的端口",prop:"localProxyPort",rules:t.format}},[e("a-input",{staticStyle:{width:"100%"},attrs:{disabled:"view"==t.dialogType,maxLength:10,placeholder:"请输入"},model:{value:t.form.data.localProxyPort,callback:function(a){t.$set(t.form.data,"localProxyPort",a)},expression:"form.data.localProxyPort"}})],1)],1)],1)],1)],1)],1)],1)],1),e("div",{staticStyle:{"font-size":"14px","font-weight":"bold",margin:"8px 0px"}},[t._v("安全策略配置")]),e("a-row",{attrs:{gutter:15}},[e("a-col",{attrs:{span:24}},[e("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 8px 10px"}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"关键字策略"}},[e("LazyLoadingMultipleSelect",{attrs:{value:t.form.data.strategyContentId,strategyData:t.contentStrategiesList,disabled:"Client"!=t.form.data.transmitType||"HTTP"==t.form.data.l7Proto,dialogType:t.dialogType,mode:"multiple","max-tag-count":2,"option-key":"id",placeholder:"请选择"},on:{change:t.handleContentChange}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"流量控制策略"}},[e("LazyLoadingSelect",{attrs:{value:t.form.data.strategyQosId,strategyData:t.trafficControlStrategyList,"option-key":"id",disabled:"view"==t.dialogType,placeholder:"请选择"},on:{change:t.handleQosChange}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"域间标记策略"}},[e("LazyLoadingSelect",{attrs:{value:t.form.data.strategyAreaMarkId,strategyData:t.markStrategyList,"option-key":"id",disabled:"view"==t.dialogType,placeholder:"请选择"},on:{change:t.handleAreaMarkChange}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"虚拟桌面协议过滤策略"}},[e("LazyLoadingSelect",{attrs:{value:t.form.data.strategySpiceId,strategyData:t.strategySpiceList,"option-key":"id",disabled:"Client"!=t.form.data.transmitType||"spice"!=t.form.data.l7Proto||"view"==t.dialogType,placeholder:"请选择"},on:{change:t.handleSpiceChange}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"自定义协议检查策略"}},[e("LazyLoadingMultipleSelect",{attrs:{value:t.form.data.strategyCustomId,strategyData:t.customStrategiesList,disabled:"Client"!=t.form.data.transmitType||"HTTP"==t.form.data.l7Proto,dialogType:t.dialogType,mode:"multiple","max-tag-count":2,"option-key":"id",placeholder:"请选择"},on:{change:t.handleCustomChange}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"文件名称过滤",prop:"filterFileName"}},[e("LazyLoadingMultipleSelect",{attrs:{value:t.form.data.filterFileName,strategyData:t.filterFileNameList,disabled:"HTTP"!=t.form.data.l7Proto,dialogType:t.dialogType,mode:"multiple","max-tag-count":2,"option-key":"id",placeholder:"请选择"},on:{change:t.handleFileNameChange}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"文件类型过滤",prop:"filterFileType"}},[e("LazyLoadingMultipleSelect",{attrs:{value:t.form.data.filterFileType,strategyData:t.filterFileTypeList,mode:"multiple",disabled:"HTTP"!=t.form.data.l7Proto,dialogType:t.dialogType,"max-tag-count":2,"option-key":"id",placeholder:"请选择"},on:{change:t.handleFileTypeChange}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"文件后缀名过滤",prop:"filterFileSuffix"}},[e("LazyLoadingMultipleSelect",{attrs:{value:t.form.data.filterFileSuffix,strategyData:t.filterFileSuffixList,disabled:"HTTP"!=t.form.data.l7Proto,dialogType:t.dialogType,mode:"multiple","max-tag-count":2,"option-key":"id",placeholder:"请选择"},on:{change:t.handleFileSuffixChange}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"数据加解密策略"}},[e("a-select",{attrs:{disabled:"HTTP"==t.form.data.l7Proto,"show-search":!0,placeholder:"请选择数据加密策略"},model:{value:t.form.data.dataCfus,callback:function(a){t.$set(t.form.data,"dataCfus",a)},expression:"form.data.dataCfus"}},[e("a-select-option",{attrs:{value:0}},[t._v("关闭")]),e("a-select-option",{attrs:{value:1}},[t._v("开启")])],1)],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"启用",prop:""}},[e("a-checkbox",{attrs:{disabled:"HTTP"!=t.form.data.l7Proto||"view"==t.dialogType},model:{value:t.form.data.waf,callback:function(a){t.$set(t.form.data,"waf",a)},expression:"form.data.waf"}},[t._v("WAF")]),e("a-checkbox",{attrs:{disabled:"HTTP"!=t.form.data.l7Proto||"view"==t.dialogType},model:{value:t.form.data.virus,callback:function(a){t.$set(t.form.data,"virus",a)},expression:"form.data.virus"}},[t._v("病毒防护")])],1)],1)],1)],1)],1),e("div",{staticStyle:{"font-size":"14px","font-weight":"bold",margin:"8px 0px"}},[t._v("视频通配置")]),e("a-row",{attrs:{gutter:15}},[e("a-col",{attrs:{span:24}},[e("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 8px 10px"}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"启用",prop:""}},[e("a-checkbox",{attrs:{disabled:t.form.data.l7Proto||"Client"!=t.form.data.transmitType},model:{value:t.form.data.videoEnable,callback:function(a){t.$set(t.form.data,"videoEnable",a)},expression:"form.data.videoEnable"}},[t._v("视频控制")]),e("a-checkbox",{attrs:{disabled:t.form.data.l7Proto||"Client"!=t.form.data.transmitType},model:{value:t.form.data.audioEnable,callback:function(a){t.$set(t.form.data,"audioEnable",a)},expression:"form.data.audioEnable"}},[t._v("音频控制")])],1)],1)],1)],1)],1),e("div",{staticStyle:{"font-size":"14px","font-weight":"bold",margin:"8px 0px"}},[t._v("飞控配置")]),e("a-row",{attrs:{gutter:15}},[e("a-col",{attrs:{span:24}},[e("a-row",{staticClass:"inner-block",staticStyle:{padding:"8px 10px 8px 10px"}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"启用",prop:""}},[e("a-checkbox",{attrs:{disabled:!(""==t.form.data.l7Proto&&"Client"==t.form.data.transmitType)},on:{change:t.choseProtoEnable},model:{value:t.form.data.protoEnable,callback:function(a){t.$set(t.form.data,"protoEnable",a)},expression:"form.data.protoEnable"}},[t._v("飞控协议过滤")])],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"过滤动作",prop:"flightAction"}},[e("a-select",{attrs:{"show-search":!0,placeholder:"请选择过滤动作",mode:"multiple",maxTagCount:1,disabled:!(""==t.form.data.l7Proto&&"Client"==t.form.data.transmitType&&t.form.data.protoEnable&&"TCP"==t.form.data.transmitModel),"filter-option":t.filterOption},model:{value:t.form.data.flightAction,callback:function(a){t.$set(t.form.data,"flightAction",a)},expression:"form.data.flightAction"}},t._l(t.flightActionList,(function(a,i){return e("a-select-option",{key:i,attrs:{text:a.zhName,value:a.name}},[t._v(t._s(a.zhName))])})),1)],1)],1)],1)],1)],1)],1)]):t._e(),e("template",{slot:"footer"},[e("a-button",{attrs:{type:"primary"},on:{click:t.saveClick}},[t._v(t._s("保存"))]),e("a-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],2),e("a-modal",{attrs:{closable:!0,width:700,title:"策略状态","mask-closable":!1,footer:null,destroyOnClose:""},on:{cancel:t.cancelStrategyStateVisible},model:{value:t.strategyStateVisible,callback:function(a){t.strategyStateVisible=a},expression:"strategyStateVisible"}},[e("a-table",{attrs:{pagination:{pageSize:10,size:"small"},rowKey:"id",columns:t.stateColumns,"data-source":t.stateData},scopedSlots:t._u([{key:"workState",fn:function(a){return[e("span",{attrs:{title:t.convertWorkStateHtml(a.type)},domProps:{innerHTML:t._s(t.convertWorkStateHtml(a.workState))}})]}},{key:"type",fn:function(a){return[e("span",{attrs:{title:t.convertStrategyState(a.type)},domProps:{innerHTML:t._s(t.convertStrategyState(a.type))}})]}},{key:"DataState",fn:function(a){return[0==a.deleting?e("span",{staticStyle:{color:"#47b596"}},[t._v("正常")]):e("span",{staticStyle:{color:"#f5222d"}},[t._v("删除中")])]}},{key:"operation1",fn:function(a){return[e("span",[e("span",{staticStyle:{color:"#f5222d",cursor:"pointer"},on:{click:function(e){return t.strategyDelete(a)}}},[t._v("删除")])])]}}])})],1),e("a-modal",{attrs:{closable:!0,title:t.title,"mask-closable":!1,footer:null},on:{cancel:t.clickCancelImport},model:{value:t.importVisible,callback:function(a){t.importVisible=a},expression:"importVisible"}},[e("div",{staticStyle:{height:"50px","line-height":"50px","font-size":"16px",color:"#0ab1c5"}},[e("span",[t._v(t._s(t.importFailedData.msg))])]),e("a-table",{attrs:{pagination:{pageSize:20,size:"small"},rowKey:"number",columns:t.importColumns,"data-source":t.importFailedData.rows}})],1)],1)}),r=[],l=e("1da1"),c=e("5530"),d=e("2909"),p=(e("96cf"),e("99af"),e("b0c0"),e("ac1f"),e("841c"),e("e9c4"),e("a15b"),e("d81d"),e("7db0"),e("fb6a"),e("1276"),e("4de4"),e("2f62")),m=e("ba79"),u=e("ca6b"),f=e("b775"),h=e("c2f2"),g=e("a00a"),v=e("8449"),b=e("ae699"),y=e("a9af"),S=e("19f8"),T=e("d9f9"),C=e("10d2"),k=[{title:"设备名称",dataIndex:"deviceName"},{title:"服务ID",dataIndex:"id"},{title:"服务名称",dataIndex:"name"},{title:"位置",ellipsis:!0,scopedSlots:{customRender:"transmitType"}},{title:"协议",dataIndex:"transmitModel"},{title:"下发状态",ellipsis:!0,scopedSlots:{customRender:"workState"}},{title:"审批状态",ellipsis:!0,scopedSlots:{customRender:"approvalState"}},{title:"操作",width:350,scopedSlots:{customRender:"operations"}}],x=[{title:"策略名称",dataIndex:"strategyName"},{title:"类型",scopedSlots:{customRender:"type"}},{title:"生效状态",scopedSlots:{customRender:"workState"}},{title:"数据状态",scopedSlots:{customRender:"DataState"}}],I="double-data",L="".concat(m["b"]).concat(I,"/double-data/import-data"),_="".concat(m["b"]).concat(I,"/double-data/export-data"),w="single/trans-busi-data-doubleSG1.xlsx",D="single/trans-busi-data-doubleSG2.xlsx",O={components:{BdataShow:u["a"],LazyLoadingMultipleSelect:y["a"],LazyLoadingSelect:S["a"],BCascader:C["a"]},mixins:[h["a"]],filters:{convertWorkState:T["H"]},comments:{},props:{},data:function(){return{readOnly:!1,dialog:v["a"],ApprovalDialog:b["a"],importAndExport:!0,columns:k,activeKey:"doubleSG",search:{businessId:"",name:"",deviceId:"",channelInfoId:"",transmitModel:void 0,transmitType:void 0,workState:void 0,approvalState:void 0,groupId:void 0},table:{data:[],total:0},deviceList:[],channelList:[],groupList:[],timeList:[],loading:!1,confirmLoading:!1,visible1:!1,visible2:!1,visible:!1,visibleSecond:!1,title:"",dialogType:"",modeList:[{value:0,name:"反向代理"},{value:1,name:"透明代理"}],searchValue:"",createUserList:[],strategyStateVisible:!1,stateColumns:x,stateData:[],offset:1,limit:10,form:{data:{id:"",type:"doubleSG",busiMode:0,businessId:"",name:"",port:"",transmitType:"Client",transmitModel:"",l7Proto:"",groupId:"",sip:"",networkAreaName:"",networkAreaId:"",deviceType:"",deviceId:"",deviceName:"",channelInfoId:"",sn:"",channelName:"",localProxyIp:void 0,localProxyPort:"",businessTimeId:"",strategyQosId:void 0,strategyCustomId:[],strategyContentId:[],strategyCustomIds:"",strategyContentIds:"",strategyDataLableId:void 0,strategyDataSignId:void 0,dataCfus:0,strategyAreaMarkId:void 0,strategySpiceId:void 0,strategyAppMarkId:void 0,waf:!1,virus:!1,deviceSubType:"",videoEnable:!1,audioEnable:!1,protoEnable:!1,flightAction:[],filterFileName:[],filterFileType:[],filterFileSuffix:[]},rules:{name:g["a"].input,transmitType:g["a"].select,transmitModel:g["a"].select,networkAreaId:g["a"].select,deviceId:g["a"].select,strategyId:g["a"].select,businessId:g["a"].select}},flightActionList:[],importFailedData:{},importVisible:!1,importDataUrl:L,exportDataUrl:_,templateUrl:"",dataReceiverList:{},l7ProtoList:[{value:"spice",name:"虚拟桌面协议"}],strategySpiceList:[],dataInfoList:[],localProxyIpList:[],aclStrategyList:[],dataLableStrategyList:[],dataSignStrategyList:[],ifaceList:[],trafficControlStrategyList:[],trafficControlStrategyList_1:[],customStrategiesList:[],customStrategiesList_1:[],contentStrategiesList:[],contentStrategiesList_1:[],markStrategyList:[],appMarkStrategyList:[],filterFileNameList:[],filterFileNameList_1:[],filterFileTypeList:[],filterFileTypeList_1:[],filterFileSuffixList:[],filterFileSuffixList_1:[],select:g["a"].select,nameRule:g["a"].name,format:g["a"].format,ip:g["a"].ip1,cidrSingle:g["a"].cidrSingle1,format17:g["a"].format17,cirdOrNot:g["a"].ipFormat2}},created:function(){var t=this;this.readOnly=JSON.parse(localStorage.getItem("double-data"))||!1,Object(f["b"])("business/business-group/all",f["a"].GET).then((function(a){t.groupList=a||[]}))},watch:{"form.data.transmitType":function(t){var a=this;Object(f["b"])("strategy/strategy-area-mark/all?location=".concat(t),f["a"].GET).then((function(t){a.markStrategyList=[{id:"",name:"请选择"}].concat(Object(d["a"])(t))}))}},mounted:function(){var t=this.detectDeviceType();this.templateUrl=t?w:D},computed:Object(c["a"])({},Object(p["b"])("account",["user"])),methods:{cascaderHandler:function(t){this.search.deviceId=t[0],this.search.channelInfoId=t[1]},update:function(){this.page=1,this.uploadList(this.page,this.pageSize,this.search)},resetUpdate:function(){this.resetSearch(),this.update()},resetSearch:function(){this.$refs.cascaderRef&&this.$refs.cascaderRef.resetSelection(),this.search={businessId:"",name:"",deviceId:"",channelInfoId:"",transmitModel:void 0,transmitType:void 0,workState:void 0,approvalState:void 0,groupId:void 0}},tableParamChanged:function(t){this.page=t.page,this.pageSize=t.pageSize,this.uploadList(t.page,t.pageSize,this.search)},uploadList:function(t,a,e){var i=this;this.loading=!0;var o=encodeURIComponent(JSON.stringify(e));Object(f["b"])("double-data/double-datas?offset=".concat((t-1)*a,"&limit=").concat(a,"&search=").concat(o),f["a"].GET).then((function(t){t.rows.length>0?(i.table.data=t.rows,i.table.total=t.total,i.loading=!1):(i.table.data=[],i.table.total=0,i.loading=!1)})).catch((function(){i.table.data=[],i.table.total=0,i.loading=!1}))},getWidth:function(){return"create"==this.dialogType||"modify"==this.dialogType||"view"==this.dialogType?"1200px":"400px"},convertWorkStateHtml:T["J"],convertStrategyState:T["B"],toJoin:function(t){return 0==t.length?"":t.join(",")},turnNum:function(t){return t.map(Number)},businessTransDataState:function(t){var a=this;this.stateData=[],Object(f["b"])("double-data/double-data/work-states/".concat(t),f["a"].GET).then((function(t){a.stateData=t.rows})),this.strategyStateVisible=!0},cancelStrategyStateVisible:function(){this.strategyStateVisible=!1},openDialog:function(t,a){this.dialogType="",this.dialogType=t,"create"==t?(this.title="新建",this.initDataMethod(a)):"modify"==t?(this.title="修改",this.initDataMethod(a)):"delete"==t?this.title="删除":"view"==t?(this.title="详情",this.initDataMethod(a)):"remove"==t?this.title="移除":"dispatch"==t?this.title="下发":"config"==t&&(this.title="传输配置"),this.visible=!0,this.form.data.type=this.activeKey},initDataMethod:function(t){var a=this,e=this;Object(f["b"])("tool/flight-action/all",f["a"].GET).then((function(t){e.flightActionList=t})),Object(f["b"])("device/device-info/all",f["a"].GET).then((function(a){e.deviceList=Object(d["a"])(a),"create"===e.dialogType&&(e.form.data.deviceId=(null===t||void 0===t?void 0:t.deviceId)||"",e.form.data.channelInfoId=(null===t||void 0===t?void 0:t.channelInfoId)||"",e.form.data.sn=(null===t||void 0===t?void 0:t.sn)||"",e.form.data.channelName=(null===t||void 0===t?void 0:t.channelName)||"",e.form.data.channelType=(null===t||void 0===t?void 0:t.channelType)||"",e.form.data.deviceNodeName=(null===t||void 0===t?void 0:t.deviceNodeName)||"",e.form.data.deviceType=(null===t||void 0===t?void 0:t.deviceType)||"")})),Object(f["b"])("device/channel-info/all",f["a"].GET).then((function(t){e.channelList=Object(d["a"])(t);var a=e.form.data.channelInfoId;if(!a)return e.form.data.sn=null,void(e.form.data.channelName=null);var i=e.channelList.find((function(t){return String(t.id)===String(a)}));e.form.data.sn=i?i.sn:null,e.form.data.channelName=i?i.name:null,"Server"==e.form.data.transmitType&&Object(f["b"])("single-data/single-data/all?type=recSenderDouble&sn=".concat(e.form.data.sn,"&channelName=").concat(e.form.data.channelName),f["a"].GET).then((function(t){e.dataReceiverList=Object(d["a"])(t)}))})),Object(f["b"])("strategy/strategy-area-mark/all?location=".concat(e.form.data.transmitType),f["a"].GET).then((function(t){a.markStrategyList=[{id:"",name:"请选择"}].concat(Object(d["a"])(t))})),Object(f["b"])("strategy/strategy-spice/all",f["a"].GET).then((function(t){e.strategySpiceList=[{id:"",name:"请选择"}].concat(Object(d["a"])(t))})),Object(f["b"])("strategy/strategy-qos/all",f["a"].GET).then((function(t){e.trafficControlStrategyList=Object(d["a"])(t),e.trafficControlStrategyList_1=t.slice(0,100)})),Object(f["b"])("strategy/strategy-trcontent/all?action=2",f["a"].GET).then((function(t){e.contentStrategiesList=Object(d["a"])(t),e.contentStrategiesList_1=t.slice(0,100)})),Object(f["b"])("strategy/strategy-custom-app/all?model=",f["a"].GET).then((function(t){e.customStrategiesList=t,e.customStrategiesList_1=t.slice(0,100)})),Object(f["b"])("time-config/config/all?mode=1",f["a"].GET).then((function(t){e.timeList=[{id:"",name:"请选择"}].concat(Object(d["a"])(t))})),Object(f["b"])("tool/strategy-filter/all?type=1",f["a"].GET).then((function(t){e.filterFileNameList=t,e.filterFileNameList_1=t.slice(0,100)})),Object(f["b"])("tool/strategy-filter/all?type=2",f["a"].GET).then((function(t){e.filterFileSuffixList=t,e.filterFileSuffixList_1=t.slice(0,100)})),Object(f["b"])("tool/strategy-filter/all?type=3",f["a"].GET).then((function(t){e.filterFileTypeList=t,e.filterFileTypeList_1=t.slice(0,100)}))},handleStringToArray:function(t){return t&&""!==t?this.turnNum(t.split(",")):[]},getFormInfo:function(t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f["b"])("double-data/double-data/".concat(t),f["a"].GET);case 3:i=e.sent,a.form.data=i,null===i.strategyQosId&&(a.form.data.strategyQosId=""),a.form.data.strategyCustomId=a.handleStringToArray(i.strategyCustomIds),a.form.data.strategyContentId=a.handleStringToArray(i.strategyContentIds),a.form.data.filterFileName=a.handleStringToArray(i.filterFileName),a.form.data.filterFileType=a.handleStringToArray(i.filterFileType),a.form.data.filterFileSuffix=a.handleStringToArray(i.filterFileSuffix),e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})))()},businessTransDataView:function(t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i=a,e.next=4,i.getFormInfo(t);case 4:i.openDialog("view"),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},businessTransDataModify:function(t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=a,"-1"!=t.workState&&null!=t.workState){e.next=12;break}return e.prev=2,e.next=5,i.getFormInfo(t.id);case 5:i.openDialog("modify"),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](2);case 10:e.next=13;break;case 12:i.$confirm({content:"如果服务正在传输中，修改后下发会影响！",okText:"确认",cancelText:"取消",onOk:function(){Object(f["b"])("double-data/double-data/".concat(t.id),f["a"].GET).then((function(t){i.form.data=t,null==t.strategyQosId&&(i.form.data.strategyQosId=""),null!=i.form.data.strategyCustomIds&&""!=i.form.data.strategyCustomIds?i.form.data.strategyCustomId=i.turnNum(i.form.data.strategyCustomIds.split(",")):i.form.data.strategyCustomId=[],null!=i.form.data.strategyContentIds&&""!=i.form.data.strategyContentIds?i.form.data.strategyContentId=i.turnNum(i.form.data.strategyContentIds.split(",")):i.form.data.strategyContentId=[],i.openDialog("modify")}))},onCancel:function(){}});case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))()},businessTransDataDispatch:function(t){this.form.data.id=t,this.openDialog("dispatch")},businessTransDataRevoke:function(t){this.form.data.id=t,this.openDialog("retract")},businessTransDataTransmit:function(t){this.form.data.id=t,this.openDialog("config")},businessTransDataMove:function(t){this.form.data.id=t,this.openDialog("remove")},businessTransDataDelete:function(t){this.form.data.id=t.id,this.form.data.transmitType=t.transmitType,this.openDialog("delete")},choseTransmitModel:function(){this.$refs["form"].clearValidate(),this.form.data.l7Proto="",this.form.data.protoEnable=!1,this.form.data.flightAction=[],this.form.data.filterFileName=[],this.form.data.filterFileType=[],this.form.data.filterFileSuffix=[]},choseTransmitType:function(t){var a=this;this.$refs["form"].clearValidate(),this.form.data.name="",this.form.data.busiMode=0,this.form.data.port="",this.form.data.transmitModel="",this.form.data.localProxyIp="",this.form.data.localProxyPort="",this.form.data.strategyCustomId=[],this.form.data.strategyContentId=[],this.form.data.businessTimeId="",this.form.data.waf=!1,this.form.data.virus=!1,this.form.data.strategySpiceId="",this.form.data.l7Proto="",this.form.data.sip="",this.form.data.videoEnable=!1,this.form.data.audioEnable=!1,this.form.data.protoEnable=!1,this.form.data.flightAction=[],this.form.data.filterFileName=[],this.form.data.filterFileType=[],this.form.data.filterFileSuffix=[],"Server"==t?Object(f["b"])("double-data/double-data/all?type=recSenderDouble&sn=".concat(this.form.data.sn,"&channelName=").concat(this.form.data.channelName),f["a"].GET).then((function(t){a.dataReceiverList=Object(d["a"])(t)})):"Client"==t&&(this.form.data.busiMode=0)},chosel7Proto:function(){this.form.data.strategySpiceId="",this.form.data.waf=!1,this.form.data.virus=!1,this.form.data.strategyCustomId=[],this.form.data.strategyContentId=[],this.form.data.videoEnable=!1,this.form.data.audioEnable=!1,this.form.data.protoEnable=!1,this.form.data.flightAction=[],this.form.data.filterFileName=[],this.form.data.filterFileType=[],this.form.data.filterFileSuffix=[],this.form.data.dataCfus=0},choseDataReceiver:function(t,a){var e=a.data;this.form.data.port="",this.form.data.transmitModel="",""!=t&&(this.form.data.port=this.dataReceiverList.filter((function(a){return a.name==t}))[0].port,this.form.data.busiMode=this.dataReceiverList.filter((function(a){return a.name==t}))[0].busiMode,this.form.data.transmitModel=this.dataReceiverList.filter((function(a){return a.name==t}))[0].transmitModel,this.form.data.businessId=e.attrs.text)},deleteDataItem:function(t){var a=this,e=this;Object(f["b"])("double-data/double-data/delete-cache/".concat(t),f["a"].DELETE).then((function(){e.$message.success("删除成功"),Object(f["b"])("double-data/double-data/all?type=recSenderDouble&sn=".concat(a.form.data.sn,"&channelName=").concat(a.form.data.channelName),f["a"].GET).then((function(t){e.dataReceiverList=Object(d["a"])(t)}))})).catch((function(){}))},choseDataDevice:function(t){var a=this;this.form.data.strategyQosId=void 0,this.form.data.strategyCustomId=[],this.form.data.strategyContentId=[],this.form.data.strategyCustomIds="",this.form.data.strategyContentIds="",this.form.data.strategyAreaMarkId=void 0,this.form.data.strategySpiceId=void 0,this.form.data.strategyAppMarkId=void 0,this.form.data.waf=!1,this.form.data.virus=!1,this.form.data.businessTimeId="",this.form.data.sip="",""==t?(this.localProxyIpList=[],this.form.data.deviceName=""):this.deviceList.forEach((function(e){e.id==t&&(a.form.data.deviceName=e.name,a.form.data.deviceSubType=e.deviceSubType)}))},handleContentChange:function(t){this.form.data.strategyContentId=t},handleCustomChange:function(t){this.form.data.strategyCustomId=t},handleQosChange:function(t){this.form.data.strategyQosId=t},handleAreaMarkChange:function(t){this.form.data.strategyAreaMarkId=t},handleSpiceChange:function(t){this.form.data.strategySpiceId=t},handleFileNameChange:function(t){this.form.data.filterFileName=t},handleFileTypeChange:function(t){this.form.data.filterFileType=t},handleFileSuffixChange:function(t){this.form.data.filterFileSuffix=t},choseProtoEnable:function(t){this.form.data.flightAction=[]},clickCancel:function(){this.visible=!1,this.confirmLoading=!1,"create"!=this.dialogType&&"modify"!=this.dialogType&&"view"!=this.dialogType||this.$refs["form"].clearValidate(),this.form.data={id:"",type:"doubleSG",busiMode:0,businessId:"",name:"",port:"",transmitType:"Client",transmitModel:"",l7Proto:"",groupId:"",sip:"",networkAreaName:"",networkAreaId:"",deviceType:"",deviceId:"",deviceName:"",channelInfoId:"",sn:"",channelName:"",localProxyIp:void 0,localProxyPort:"",businessTimeId:"",strategyQosId:void 0,strategyCustomId:[],strategyDataLableId:void 0,strategyDataSignId:void 0,dataCfus:0,strategyContentId:[],strategyCustomIds:"",strategyContentIds:"",strategyAreaMarkId:void 0,strategySpiceId:void 0,strategyAppMarkId:void 0,waf:!1,virus:!1,deviceSubType:"",videoEnable:!1,audioEnable:!1,protoEnable:!1,flightAction:[],filterFileName:[],filterFileType:[],filterFileSuffix:[]},this.deviceList=[],this.dataInfoList=[],this.trafficControlStrategyList=[],this.trafficControlStrategyList_1=[],this.customStrategiesList=[],this.customStrategiesList_1=[],this.contentStrategiesList=[],this.dataReceiverList=[],this.markStrategyList=[],this.appMarkStrategyList=[],this.contentStrategiesList=[],this.contentStrategiesList_1=[],this.strategySpiceList=[],this.localProxyIpList=[],this.aclStrategyList=[],this.dataLableStrategyList=[],this.dataSignStrategyList=[],this.ifaceList=[],this.timeList=[],this.filterFileNameList=[],this.filterFileNameList_1=[],this.filterFileTypeList=[],this.filterFileTypeList_1=[],this.filterFileSuffixList=[],this.filterFileSuffixList_1=[]},saveClick:function(){var t=this;t.confirmLoading=!0;var a=f["a"].POST;"modify"==t.dialogType&&(a=f["a"].PUT),"create"==t.dialogType||"modify"==t.dialogType?t.$refs["form"].validate((function(e){if(!e)return t.confirmLoading=!1,!1;var i=!0,o=JSON.parse(JSON.stringify(t.form.data));o.filterFileName=t.toJoin(o.filterFileName),o.filterFileType=t.toJoin(o.filterFileType),o.filterFileSuffix=t.toJoin(o.filterFileSuffix),o.strategyCustomIds=t.toJoin(o.strategyCustomId),o.strategyContentIds=t.toJoin(o.strategyContentId),i&&Object(f["b"])("double-data/double-data",a,o).then((function(){t.clickCancel(),t.uploadList(t.page,t.pageSize,t.search)})).catch((function(){t.confirmLoading=!1}))})):"delete"==t.dialogType?Object(f["b"])("double-data/double-data/".concat(t.form.data.id),f["a"].DELETE).then((function(){t.clickCancel(),t.uploadList(t.page,t.pageSize,t.search)})).catch((function(){t.confirmLoading=!1})):"dispatch"==t.dialogType?Object(f["b"])("double-data/double-data/apply-send/".concat(t.form.data.id),f["a"].POST).then((function(){t.clickCancel(),t.uploadList(t.page,t.pageSize,t.search)})).catch((function(){t.confirmLoading=!1})):"config"==t.dialogType?Object(f["b"])("double-data/double-data/config/".concat(t.form.data.id),f["a"].PUT).then((function(){t.clickCancel(),t.uploadList(t.page,t.pageSize,t.search)})).catch((function(){t.confirmLoading=!1})):"remove"==t.dialogType?Object(f["b"])("double-data/double-data/apply-remove/".concat(t.form.data.id),f["a"].POST).then((function(){t.clickCancel(),t.uploadList(t.page,t.pageSize,t.search)})).catch((function(){t.confirmLoading=!1})):"retract"==t.dialogType&&Object(f["b"])("single-data/single-data/retract/".concat(t.form.data.id),f["a"].POST).then((function(){t.clickCancel(),t.uploadList(t.page,t.pageSize,t.search)})).catch((function(){t.confirmLoading=!1}))},handleImportChange:function(t){this.spinning=!0,t.rows.length>0?(this.title="导入",this.spinning=!1,this.importFailedData=t,this.importVisible=!0):this.spinning=!1},batchRemove:function(t){var a=this;a.$confirm({content:"确认批量申请移除吗？",okText:"确认",cancelText:"取消",onOk:function(){Object(f["b"])("double-data/double-data/batch-remove?ids=".concat(t),f["a"].PUT).then((function(t){var e=t.rows,i=t.msg;e.length>0?(a.title="批量申请移除",a.importFailedData.rows=e,a.importFailedData.msg=i,a.importVisible=!0,a.uploadList(a.page,a.pageSize,a.search)):(a.$message.success("批量申请移除成功！"),a.uploadList(a.page,a.pageSize,a.search))}))},onCancel:function(){}})},batchDispatch:function(t){var a=this;a.$confirm({content:"确认批量申请下发吗？",okText:"确认",cancelText:"取消",onOk:function(){Object(f["b"])("double-data/double-data/batch-send?ids=".concat(t),f["a"].PUT).then((function(t){var e=t.rows,i=t.msg;e.length>0?(a.title="批量下发",a.importFailedData.rows=e,a.importFailedData.msg=i,a.importVisible=!0,a.uploadList(a.page,a.pageSize,a.search)):(a.$message.success("批量申请下发成功！"),a.uploadList(a.page,a.pageSize,a.search))}))},onCancel:function(){}})},batchDelete:function(t){var a=this;a.$confirm({content:"确认批量删除吗？",okText:"确认",cancelText:"取消",onOk:function(){Object(f["b"])("double-data/double-data/batch-delete?ids=".concat(t),f["a"].DELETE).then((function(t){var e=t.rows,i=t.msg;e.length>0?(a.title="批量删除",a.importFailedData.rows=e,a.importFailedData.msg=i,a.importVisible=!0,a.uploadList(a.page,a.pageSize,a.search)):(a.$message.success("批量删除成功！"),a.uploadList(a.page,a.pageSize,a.search))}))},onCancel:function(){}})},clickCancelImport:function(){var t=this;this.importVisible=!1,setTimeout((function(){t.importFailedData={}}),200)},linkDetection:function(t,a){var e=JSON.parse(JSON.stringify(a));e.type="SX",this.dialog.open({state:"link",params:e})},businessApproval:function(t){this.ApprovalDialog.open({state:"approval",parent:this,params:{businessId:t.id,type:t.approvalState}})},batchDispatchApproval:function(){this.ApprovalDialog.open({state:"approval",parent:this,params:{businessId:void 0,businessIds:[],type:5,location:"",busiType:"double-data"}})},batchRemoveApproval:function(){this.ApprovalDialog.open({state:"approval",parent:this,params:{businessId:void 0,businessIds:[],type:8,location:"",busiType:"double-data"}})},showApprovalOpinion:function(t){this.ApprovalDialog.open({state:"opinion",params:{businessId:t}})}},destroyed:function(){},beforeDestroy:function(){}},F=O,P=(e("2709"),e("2877")),M=Object(P["a"])(F,n,r,!1,null,"2b08e5fe",null),E=M.exports,N=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("bdata-show",{attrs:{columns:t.columns,rowKey:"id",data:t.table.data,total:t.table.total,"init-page":t.page,"init-pageSize":t.pageSize,loading:t.loading,readOnly:t.readOnly,batch:!1,importAndExport:!1,searchs:t.search,activeKeyFlag:"no"},on:{change:t.tableParamChanged,create:t.openDialog,handleImportChange:t.handleImportChange},scopedSlots:t._u([{key:"search",fn:function(){return[e("div",[e("span",{staticClass:"inner"},[e("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入业务名称"},model:{value:t.search.name,callback:function(a){t.$set(t.search,"name",a)},expression:"search.name"}})],1),e("span",{staticClass:"outer"},[e("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.update}},[t._v("查询")])],1),e("span",{staticClass:"outer"},[e("a-button",{staticClass:"button",on:{click:t.resetUpdate}},[t._v("重置")])],1)])]},proxy:!0},{key:"operations",fn:function(a){var i=a.record;return[3==t.user.type?[e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.busiGroupMgrView(i)}}},[t._v("查看详情")])])]:[t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper",on:{click:function(a){return t.busiGroupMgrModify(i)}}},[t._v("修改")])]),t.readOnly?t._e():e("span",{staticClass:"oper-margin"},[e("span",{staticClass:"oper red",on:{click:function(a){return t.busiGroupMgrDelete(i.id)}}},[t._v("删除")])])]]}}])}),e("a-modal",{attrs:{closable:!0,title:t.title,"confirm-loading":t.confirmLoading,"mask-closable":!1,footer:"view"===t.dialogType?null:void 0},on:{cancel:t.clickCancel,ok:function(a){return t.saveClick()}},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},["delete"===t.dialogType?e("div",[t._v("确定删除？")]):"create"==t.dialogType||"modify"==t.dialogType||"view"==t.dialogType?e("a-form-model",{ref:"form",attrs:{model:t.form.data,rules:t.form.rules,"label-col":{span:t.form.labelSpan||8},"wrapper-col":{span:t.form.wrapperSpan||16}}},[void 0!==t.form.data.name?e("a-form-model-item",{attrs:{label:"业务名称",prop:"name"}},[e("a-input",{attrs:{placeholder:"请输入业务名称",disabled:"create"!=t.dialogType,maxLength:20},model:{value:t.form.data.name,callback:function(a){t.$set(t.form.data,"name",a)},expression:"form.data.name"}})],1):t._e(),void 0!==t.form.data.appIds?e("a-form-model-item",{attrs:{label:"关联服务",prop:"appIds"}},[e("a-select",{attrs:{mode:"multiple",maxTagCount:2,placeholder:"请选择关联服务",disabled:"view"===t.dialogType},model:{value:t.form.data.appIds,callback:function(a){t.$set(t.form.data,"appIds",a)},expression:"form.data.appIds"}},t._l(t.appList,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1):t._e()],1):t._e(),e("template",{slot:"footer"},[e("a-button",{attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.saveClick}},[t._v("保存")]),e("a-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],2)],1)},j=[],A=e("ade3"),$=[{title:"业务名称",dataIndex:"name"},{title:"关联服务",dataIndex:"appNames"},{title:"操作",scopedSlots:{customRender:"operations"}}],z=(i={components:{BdataShow:u["a"]},comments:{},props:{},data:function(){return{readOnly:!1,columns:$,page:1,pageSize:10,search:{name:""},table:{data:[],total:0},loading:!1,confirmLoading:!1,importFailedData:{},importVisible:!1,dialogType:"",visible:!1,title:"",appList:[],form:{data:{id:"",name:"",appIds:[]},rules:{name:g["a"].name}}}},filters:{},created:function(){this.readOnly=JSON.parse(JSON.parse(localStorage.getItem("data")).filter((function(t){return"business-group"==t.name}))[0].readonly)||!1},mounted:function(){},watch:{},computed:Object(c["a"])({},Object(p["b"])("account",["user"])),methods:{resetUpdate:function(){this.search.name="",this.update()},update:function(){this.page=1,this.pageSize=10,this.uploadList(this.page,this.pageSize,this.search)},tableParamChanged:function(t){this.page=t.page,this.pageSize=t.pageSize,this.uploadList(t.page,t.pageSize,this.search)},uploadList:function(t,a,e){var i=this;this.loading=!0,Object(f["b"])("business/business-groups?offset=".concat((t-1)*a,"&limit=").concat(a,"&search=").concat(e.name),f["a"].GET).then((function(t){t.rows.length>0?(i.table.data=t.rows,i.table.total=t.total,i.loading=!1):(i.table.data=[],i.table.total=0,i.loading=!1)})).catch((function(){i.table.data=[],i.table.total=0,i.loading=!1}))},initMenu:function(){this.uploadList(this.page,this.pageSize,this.search)},busiGroupMgrModify:function(t){this.form.data=t,this.openDialog("modify")},busiGroupMgrView:function(t){this.form.data=t,this.openDialog("view")},busiGroupMgrDelete:function(t){this.form.data.id=t,this.openDialog("delete")},handleImportChange:function(t){this.importFailedData=t,this.importVisible=!0},clickCancelImport:function(){var t=this;this.importVisible=!1,setTimeout((function(){t.importFailedData={}}),200)},openDialog:function(t){var a=this;this.dialogType="","create"==t?(this.title="新建",Object(f["b"])("double-data/double-data/group-datas",f["a"].GET).then((function(t){a.appList=t}))):"modify"==t?(this.title="修改",Object(f["b"])("double-data/double-data/group-datas?id=".concat(this.form.data.id),f["a"].GET).then((function(t){a.appList=t}))):"view"==t?(this.title="查看详情",Object(f["b"])("double-data/double-data/group-datas?id=".concat(this.form.data.id),f["a"].GET).then((function(t){a.appList=t}))):"delete"==t&&(this.title="删除"),this.dialogType=t,this.visible=!0},saveClick:function(){var t=this;t.confirmLoading=!0;var a=f["a"].POST;"modify"==t.dialogType&&(a=f["a"].PUT),"create"==t.dialogType||"modify"==t.dialogType?t.$refs["form"].validate((function(e){if(!e)return t.confirmLoading=!1,!1;var i=!0;i&&Object(f["b"])("business/business-group",a,t.form.data).then((function(){t.clickCancel(),t.uploadList(t.page,t.pageSize,t.search)})).catch((function(){t.confirmLoading=!1}))})):"delete"==t.dialogType&&Object(f["b"])("business/business-group/".concat(t.form.data.id),f["a"].DELETE).then((function(){t.clickCancel(),t.uploadList(t.page,t.pageSize,t.search)})).catch((function(){t.confirmLoading=!1}))},clickCancel:function(){var t=this;this.visible=!1,this.$nextTick((function(){t.confirmLoading=!1,t.$refs["form"].clearValidate(),t.form.data={id:"",name:"",appIds:[]}}))}},destroyed:function(){}},Object(A["a"])(i,"watch",{}),Object(A["a"])(i,"beforeDestroy",(function(){})),i),G=z,R=(e("1cf1"),Object(P["a"])(G,N,j,!1,null,"126f7934",null)),V=R.exports,U="data:m",K={components:{BBusinessDoubleConfig:E,BBusinessDoubleGroupMgr:V},mixins:[h["a"]],filters:{},comments:{},props:{},data:function(){return{permissionDeviceMenu:[],menuLists:[{id:1,value:1,menuName:"服务配置"},{id:2,value:2,menuName:"业务管理"}],menu:""}},created:function(){var t=this,a=JSON.parse(localStorage.getItem("data"));a.forEach((function(a){var e="";e=Number.parseInt(a.index),t.permissionDeviceMenu.push(e)})),this.menu=+sessionStorage.getItem(U)||Number.parseInt(this.permissionDeviceMenu[0])},watch:{},mounted:function(){},methods:{handleMenuChange:function(t){this.menu=t.target.value,sessionStorage.setItem(U,this.menu)}},destroyed:function(){},beforeDestroy:function(){}},B=K,H=(e("ff52"),Object(P["a"])(B,o,s,!1,null,"65a6e1da",null));a["default"]=H.exports},d118:function(t,a,e){},ff52:function(t,a,e){"use strict";e("0555")}}]);