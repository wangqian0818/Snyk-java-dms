(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33fe63bc"],{3835:function(t,e,a){"use strict";function r(t){if(Array.isArray(t))return t}a.d(e,"a",(function(){return o}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function n(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,n,s=[],i=!0,o=!1;try{for(a=a.call(t);!(i=(r=a.next()).done);i=!0)if(s.push(r.value),e&&s.length===e)break}catch(l){o=!0,n=l}finally{try{i||null==a["return"]||a["return"]()}finally{if(o)throw n}}return s}}var s=a("06c5");a("d9e2");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return r(t)||n(t,e)||Object(s["a"])(t,e)||i()}},"5cf6":function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"j",(function(){return c})),a.d(e,"i",(function(){return u})),a.d(e,"f",(function(){return m})),a.d(e,"e",(function(){return h})),a.d(e,"l",(function(){return g})),a.d(e,"k",(function(){return w})),a.d(e,"a",(function(){return y})),a.d(e,"b",(function(){return C})),a.d(e,"g",(function(){return _})),a.d(e,"h",(function(){return S}));var r=a("1da1"),n=(a("96cf"),a("b775"));function s(t){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/defaut-config",n["a"].PUT,e));case 1:case"end":return t.stop()}}),t)}))),i.apply(this,arguments)}function o(){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/defaut-config",n["a"].GET));case 1:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function c(t){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/password-config",n["a"].PUT,e));case 1:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function u(){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/password-config",n["a"].GET));case 1:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function m(t){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/email-config",n["a"].PUT,e));case 1:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/email-config",n["a"].GET));case 1:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function g(t){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/syslog-config",n["a"].PUT,e));case 1:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function w(){return x.apply(this,arguments)}function x(){return x=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/syslog-config",n["a"].GET));case 1:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function y(){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/audit-config",n["a"].GET));case 1:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function C(t){return N.apply(this,arguments)}function N(){return N=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/audit-config",n["a"].PUT,e));case 1:case"end":return t.stop()}}),t)}))),N.apply(this,arguments)}function _(){return z.apply(this,arguments)}function z(){return z=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/enable-config",n["a"].GET));case 1:case"end":return t.stop()}}),t)}))),z.apply(this,arguments)}function S(t){return R.apply(this,arguments)}function R(){return R=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(n["f"])("system/enable-config",n["a"].PUT,e));case 1:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}},"8ab3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search",staticStyle:{"padding-left":"0","margin-top":"20px"}},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"body"},[a("div",{staticClass:"buttons"},[a("a-radio-group",{attrs:{value:t.settings},on:{change:t.handleMenuChange}},[t._l(t.menuLists,(function(e,r){return[t.permissionDeviceMenu.includes(e.id)?a("a-radio-button",{key:r,attrs:{value:e.value}},[t._v(t._s(e.menuName))]):t._e()]}))],2)],1),a("a-row",{staticClass:"table"},[a("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("a-spin",{attrs:{spinning:t.spinning}},["default"==t.settings?a("div",{staticClass:"ant-col-offset-6 items"},t._l(t.form.default.data,(function(e,r){return a("div",{key:r,staticClass:"item"},["zx.init.web.enableCrt"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",staticStyle:{padding:"15px 10px 5px 10px",height:"52px"},attrs:{hoverable:!1}},[a("div",[a("a-switch",{scopedSlots:t._u([{key:"checkedChildren",fn:function(){return[a("a-icon",{attrs:{type:"check"}}),t._v(" 是 ")]},proxy:!0},{key:"unCheckedChildren",fn:function(){return[a("a-icon",{attrs:{type:"close"}}),t._v(" 否 ")]},proxy:!0}],null,!0),model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)])],1):"zx.init.web.trustIps"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:"多个IP请用英文逗号分隔"},on:{blur:function(a){return t.validateTrustIps(t.form.default.data[r].val,e.zhName)}},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1):"zx.init.system.ip"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:"单个IP"},on:{blur:function(a){return t.validateSystemIp(t.form.default.data[r].val,e.zhName)}},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1):"zx.init.web.tokenTtl"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:e.zhName+"[30-600]秒",disabled:!1,maxLength:10},on:{blur:function(a){return t.validateNumberRange(t.form.default.data[r].val,e.zhName,30,600,"秒")}},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1):"zx.init.web.retryTimes"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:e.zhName+"[1-5]次",disabled:!1,maxLength:10},on:{blur:function(a){return t.validateNumberRange(t.form.default.data[r].val,e.zhName,1,5,"次")}},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1):"zx.init.web.retryInterval"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:e.zhName+"[30-600]秒",disabled:!1,maxLength:10},on:{blur:function(a){return t.validateNumberRange(t.form.default.data[r].val,e.zhName,30,600,"秒")}},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1):"zx.init.web.jsp.port"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入端口范围，起始值-结束值 | 起始值[1024,65535] | 结束值[2024,65535] | 差值≥1000 | 默认50000-51000",maxLength:20},on:{blur:function(e){return t.validateJspPort(t.form.default.data[r].val)}},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1):"zx.init.ntp.type"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"+e.zhName,"option-filter-prop":"children"},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}},[a("a-select-option",{attrs:{value:"时间"}},[t._v("时间")]),a("a-select-option",{attrs:{value:"NTP"}},[t._v("NTP")])],1)],1)],1):"zx.init.ntp.time"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"NTP"==t.form.default.data.find((function(t){return"zx.init.ntp.type"===t.name})).val,placeholder:"请选择"+e.zhName,"show-time":"",allowClear:!1,locale:t.locale},on:{blur:function(e){return t.validateNtpTime(t.form.default.data[r].val)}},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1):"zx.init.ntp.server"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{attrs:{disabled:"时间"==t.form.default.data.find((function(t){return"zx.init.ntp.type"===t.name})).val,placeholder:"请输入NTP服务IP地址",maxLength:28},on:{blur:function(e){return t.validateNtpServer(t.form.default.data[r].val)}},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1):"zx.init.ntp.cycle"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:e.zhName+"[1-20]分钟",disabled:"时间"==t.form.default.data.find((function(t){return"zx.init.ntp.type"===t.name})).val,maxLength:3},on:{blur:function(a){return t.validateNumberRange(t.form.default.data[r].val,e.zhName,1,20,"分钟")}},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1):a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:e.zhName,disabled:!1,maxLength:20},model:{value:t.form.default.data[r].val,callback:function(e){t.$set(t.form.default.data[r],"val",e)},expression:"form.default.data[index].val"}})],1)],1)])})),0):t._e(),"password"==t.settings?a("div",{staticClass:"ant-col-offset-6 items"},t._l(t.form.password.data,(function(e,r){return a("div",{key:r,staticClass:"item"},["password.forceChange"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",staticStyle:{padding:"15px 10px 5px 10px",height:"52px"},attrs:{hoverable:!1}},[a("div",[a("a-switch",{scopedSlots:t._u([{key:"checkedChildren",fn:function(){return[a("a-icon",{attrs:{type:"check"}}),t._v(" 是 ")]},proxy:!0},{key:"unCheckedChildren",fn:function(){return[a("a-icon",{attrs:{type:"close"}}),t._v(" 否 ")]},proxy:!0}],null,!0),model:{value:t.form.password.data[r].val,callback:function(e){t.$set(t.form.password.data[r],"val",e)},expression:"form.password.data[index].val"}})],1)])],1):"password.updateCircle"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{staticStyle:{width:"100%"},attrs:{placeholder:e.zhName+"[1-7]",disabled:!1,maxLength:10},on:{blur:function(a){return t.validateNumberRange(t.form.password.data[r].val,e.zhName,1,7,"")}},model:{value:t.form.password.data[r].val,callback:function(e){t.$set(t.form.password.data[r],"val",e)},expression:"form.password.data[index].val"}})],1)],1):"password.rules"==e.name?a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("span",{staticClass:"ruleSpan"},[t._v(" 英文大写 "),a("a-switch",{scopedSlots:t._u([{key:"checkedChildren",fn:function(){return[a("a-icon",{attrs:{type:"check"}}),t._v(" 是 ")]},proxy:!0},{key:"unCheckedChildren",fn:function(){return[a("a-icon",{attrs:{type:"close"}}),t._v(" 否 ")]},proxy:!0}],null,!0),model:{value:t.form.password.complexRate.upper,callback:function(e){t.$set(t.form.password.complexRate,"upper",e)},expression:"form.password.complexRate.upper"}})],1),a("span",{staticClass:"ruleSpan"},[t._v(" 英文小写 "),a("a-switch",{scopedSlots:t._u([{key:"checkedChildren",fn:function(){return[a("a-icon",{attrs:{type:"check"}}),t._v(" 是 ")]},proxy:!0},{key:"unCheckedChildren",fn:function(){return[a("a-icon",{attrs:{type:"close"}}),t._v(" 否 ")]},proxy:!0}],null,!0),model:{value:t.form.password.complexRate.lower,callback:function(e){t.$set(t.form.password.complexRate,"lower",e)},expression:"form.password.complexRate.lower"}})],1),a("span",{staticClass:"ruleSpan"},[t._v(" 数字 "),a("a-switch",{scopedSlots:t._u([{key:"checkedChildren",fn:function(){return[a("a-icon",{attrs:{type:"check"}}),t._v(" 是 ")]},proxy:!0},{key:"unCheckedChildren",fn:function(){return[a("a-icon",{attrs:{type:"close"}}),t._v(" 否 ")]},proxy:!0}],null,!0),model:{value:t.form.password.complexRate.number,callback:function(e){t.$set(t.form.password.complexRate,"number",e)},expression:"form.password.complexRate.number"}})],1),a("span",{staticClass:"ruleSpan"},[t._v(" 特殊字符 "),a("a-switch",{scopedSlots:t._u([{key:"checkedChildren",fn:function(){return[a("a-icon",{attrs:{type:"check"}}),t._v(" 是 ")]},proxy:!0},{key:"unCheckedChildren",fn:function(){return[a("a-icon",{attrs:{type:"close"}}),t._v(" 否 ")]},proxy:!0}],null,!0),model:{value:t.form.password.complexRate.special,callback:function(e){t.$set(t.form.password.complexRate,"special",e)},expression:"form.password.complexRate.special"}})],1),a("span",{staticClass:"ruleSpan"},[t._v(" 密码长度 "),a("span",{staticStyle:{width:"200px",height:"23.5px"}},[a("a-slider",{attrs:{range:"","default-value":[8,50],min:8,max:50},model:{value:t.form.password.complexRate.pwdLength,callback:function(e){t.$set(t.form.password.complexRate,"pwdLength",e)},expression:"form.password.complexRate.pwdLength"}})],1)])])],1):a("div",[a("a-card-grid",{staticClass:"grid-title",attrs:{hoverable:!1}},[t._v(t._s(e.zhName))]),a("a-card-grid",{staticClass:"grid-content",attrs:{hoverable:!1}},[a("a-input",{attrs:{placeholder:e.zhName,disabled:!1,maxLength:255},model:{value:t.form.password.data[r].val,callback:function(e){t.$set(t.form.password.data[r],"val",e)},expression:"form.password.data[index].val"}})],1)],1)])})),0):t._e(),a("div",{staticClass:"tc"},[a("a-button",{staticStyle:{"margin-top":"330px"},attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.save(t.settings)}}},[t._v("保存")])],1)])],1)],1)],1)])],1)])},n=[],s=a("b85c"),i=a("3835"),o=(a("d3b7"),a("159b"),a("25eb"),a("a9e3"),a("498a"),a("ac1f"),a("00b4"),a("1276"),a("caad"),a("2532"),a("6062"),a("3ca3"),a("ddb0"),a("7db0"),a("b0c0"),a("b64b"),a("e9c4"),a("5cf6")),l=a("40a7"),c=a("c1df"),d=a.n(c),u="sys:m",f={name:"SystemSettings",mixins:[],components:{},data:function(){return{permissionDeviceMenu:[],menuLists:[{id:1,value:"default",menuName:"默认配置"},{id:6,value:"password",menuName:"密码规则配置"}],moment:d.a,locale:l["a"],settings:"",loading:!1,spinning:!1,settingsData:{data:[],total:0},form:{default:{title:"默认配置",total:0,data:[],rules:{}},password:{title:"密码配置",total:0,data:[],rules:{},complexRate:{}}}}},filters:{},created:function(){var t=this,e=JSON.parse(localStorage.getItem("sconfig"));e.forEach((function(e){var a=Number.parseInt(e.index);t.permissionDeviceMenu.push(a)}));var a=sessionStorage.getItem(u);if(a)this.settings=a;else{var r=Number.parseInt(this.permissionDeviceMenu[0]);this.menuLists.forEach((function(e){e.id==r&&(t.settings=e.value)}))}this.changeSettings(this.settings)},mounted:function(){},methods:{handleMenuChange:function(t){this.changeSettings(t.target.value),this.settings=t.target.value,sessionStorage.setItem(u,this.settings)},changeSettings:function(t){switch(t){case"password":this.getPasswordConfig();break;case"default":this.getDefaultConfig();break}},validateNumberRange:function(t,e,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!t||""===t.trim())return this.$message.error(e+"为必填项"),!1;if(!/^[0-9]+?$/.test(t))return this.$message.error(e+"为正整数，请重新输入"),!1;var s=Number.parseInt(t);return!(s<a||s>r)||(this.$message.error(e+"的取值范围在["+a+"-"+r+"]"+n+"之间，请重新输入"),!1)},validateJspPort:function(t){if(!t||""===t.trim())return this.$message.error("JSP端口范围为必填项，格式如 50000-51000"),!1;var e=t.split("-");if(2!==e.length)return this.$message.error("JSP端口范围格式错误，必须为 起始值-结束值"),!1;var a=Object(i["a"])(e,2),r=a[0],n=a[1],s=Number.parseInt(r),o=Number.parseInt(n);return isNaN(s)||isNaN(o)?(this.$message.error("JSP端口起始值和结束值必须为整数"),!1):s<1024||s>65535?(this.$message.error("JSP端口起始值必须在[1024,65535]之间，当前值："+s),!1):o<2024||o>65535?(this.$message.error("JSP端口结束值必须在[2024,65535]之间，当前值："+o),!1):o<=s?(this.$message.error("JSP端口结束值必须大于起始值，当前："+o+" <= "+s),!1):!(o-s<1e3)||(this.$message.error("JSP端口结束值与起始值的差值必须≥1000，当前差值："+(o-s)),!1)},validateTrustIps:function(t,e){if(!t||""===t.trim())return!0;var a=t.trim(),r=/^(([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])$/;if(a.includes(",")){var n=a.split(",");if(n.length>6)return this.$message.error("可信主机IP最多输入6个"),!1;var o=new Set(n);if(o.size<n.length)return this.$message.error("可信主机IP存在重复"),!1;var l,c=Object(s["a"])(n);try{for(c.s();!(l=c.n()).done;){var d=l.value;if(d.includes("/")){var u=d.split("/"),f=Object(i["a"])(u,2),m=f[0],p=f[1];if(!r.test(m)||Number.parseInt(p)<0||Number.parseInt(p)>32)return this.$message.error("可信主机IP "+d+" 输入有误"),!1}else if(!r.test(d))return this.$message.error("可信主机IP "+d+" 输入有误"),!1}}catch(w){c.e(w)}finally{c.f()}}else if(a.includes("/")){var h=a.split("/"),v=Object(i["a"])(h,2),g=v[0],b=v[1];if(!r.test(g)||Number.parseInt(b)<1||Number.parseInt(b)>32)return this.$message.error("可信主机IP "+a+" 输入有误"),!1}else if(!r.test(a))return this.$message.error("可信主机IP "+a+" 输入有误"),!1;return!0},validateSystemIp:function(t,e){return!t||""===t.trim()||(!!this.testIP(t)||(this.$message.error(e+"输入有误"),!1))},validateNtpTime:function(t){var e="",a=this.form.default.data.find((function(t){return"zx.init.ntp.type"===t.name}));return a&&(e=a.val),!("时间"===e&&!t)||(this.$message.error("类型选择“时间”时，必须配置具体时间"),!1)},validateNtpServer:function(t){var e="",a=this.form.default.data.find((function(t){return"zx.init.ntp.type"===t.name}));if(a&&(e=a.val),"NTP"===e){if(!t||""===t.trim())return this.$message.error("类型选择“NTP”时，必须配置NTP服务IP地址"),!1;if(!this.testIP(t))return this.$message.error("NTP服务IP地址格式错误"),!1}return!0},validateDefaultConfig:function(){var t,e=!0,a=Object(s["a"])(this.form.default.data);try{for(a.s();!(t=a.n()).done;){var r=t.value,n=r.val,i=r.zhName;switch(r.name){case"zx.init.web.tokenTtl":this.validateNumberRange(n,i,30,600,"秒")||(e=!1);break;case"zx.init.web.retryTimes":this.validateNumberRange(n,i,1,5,"次")||(e=!1);break;case"zx.init.web.retryInterval":this.validateNumberRange(n,i,30,600,"秒")||(e=!1);break;case"zx.init.web.jsp.port":this.validateJspPort(n)||(e=!1);break;case"zx.init.web.trustIps":this.validateTrustIps(n,i)||(e=!1);break;case"zx.init.system.ip":this.validateSystemIp(n,i)||(e=!1);break;case"zx.init.ntp.type":n||(this.$message.error("请选择系统时间配置类型（时间/NTP）"),e=!1);break;case"zx.init.ntp.time":this.validateNtpTime(n)||(e=!1);break;case"zx.init.ntp.server":this.validateNtpServer(n)||(e=!1);break;case"zx.init.ntp.cycle":this.validateNumberRange(n,i,1,20,"分钟")||(e=!1);break;default:break}if(!e)break}}catch(o){a.e(o)}finally{a.f()}return e},validatePasswordConfig:function(){var t=!0,e=0,a=this.form.password.data.find((function(t){return"password.updateCircle"===t.name}));return a&&(this.validateNumberRange(a.val,a.zhName,1,7,"")||(t=!1)),Object.keys(this.form.password.complexRate).forEach(function(t){!0===this.form.password.complexRate[t]&&"pwdLength"!==t&&e++}.bind(this)),e<2&&(this.$message.error("密码复杂度除长度外，至少选两项"),t=!1),t},getPasswordConfig:function(){var t=this;Object(o["i"])().then((function(e){var a=e.data;t.form.password.total=a.configVOs.length,t.form.password.data=a.configVOs,t.form.password.data.forEach((function(e,a){"false"===e.val?t.form.password.data[a].val=!1:"true"===e.val&&(t.form.password.data[a].val=!0),"password.rules"===e.name&&(t.form.password.complexRate=JSON.parse(t.form.password.data[a].val))}))}))},getDefaultConfig:function(){var t=this;Object(o["c"])().then((function(e){var a=e.data;t.form.default.total=a.configVOs.length,t.form.default.data=a.configVOs,t.form.default.data.forEach((function(e,a){if("false"===e.val?t.form.default.data[a].val=!1:"true"===e.val&&(t.form.default.data[a].val=!0),"zx.init.ntp.time"===e.name)if(e.val&&""!==e.val.trim()){var r=d.a.utc(e.val);r.isValid()?t.form.default.data[a].val=r.local():t.form.default.data[a].val=null}else t.form.default.data[a].val=null}))}))},save:function(t){this.loading=!0;var e=!1;switch(t){case"password":e=this.validatePasswordConfig(),e?this.savePassword():this.loading=!1;break;case"default":e=this.validateDefaultConfig(),e?this.saveDefault():this.loading=!1;break;default:this.loading=!1}},saveDefault:function(){var t=this;Object(o["d"])({configVOs:this.form.default.data}).then((function(e){if("SUCCESS"===e.state){t.$message.success("保存成功！");var a=t.form.default.data.find((function(t){return"zx.init.system.ip"===t.name}));a&&a.val&&t.$message.warning("集中管控IP已修改，将强制退出重新登录"),t.getDefaultConfig()}else"FAIL"===e.state&&t.$message.error(e.msg);t.loading=!1})).catch((function(e){t.$message.error("保存失败："+e.message),t.loading=!1}))},savePassword:function(){var t=this,e=this.form.password.data.find((function(t){return"password.rules"===t.name}));e&&(e.val=JSON.stringify(this.form.password.complexRate));var a={configVOs:this.form.password.data};this.$confirm({content:"保存后将退出，需要重新登录",okText:"确认",cancelText:"取消",onOk:function(){Object(o["j"])(a).then((function(){t.$message.success("保存成功！"),t.getPasswordConfig()})).catch((function(e){t.$message.error("保存失败："+e.message)})).finally((function(){t.loading=!1}))},onCancel:function(){t.loading=!1}})},testIP:function(t){var e=/^(([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])$/;return e.test(t)},testPort:function(t){if(!/^[0-9]+?$/.test(t))return!1;var e=Number.parseInt(t);return e>=1&&e<=65535},testPath:function(t){if("/"===t)return!0;var e=/^\/([\u4E00-\u9FA5]|[0-9a-zA-Z_-]|\/)+([\u4E00-\u9FA5]|[0-9a-zA-Z])+\/$/;return e.test(t)},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}},destroyed:function(){sessionStorage.removeItem(u)}},m=f,p=(a("b75b"),a("2877")),h=Object(p["a"])(m,r,n,!1,null,"36a5f8b2",null);e["default"]=h.exports},b75b:function(t,e,a){"use strict";a("eb3b")},eb3b:function(t,e,a){}}]);