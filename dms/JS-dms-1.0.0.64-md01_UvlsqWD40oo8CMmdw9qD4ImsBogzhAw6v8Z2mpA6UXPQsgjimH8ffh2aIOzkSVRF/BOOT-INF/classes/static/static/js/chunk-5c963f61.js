(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c963f61"],{"0618":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{ref:"table",staticClass:"AStockOutDetailTable",attrs:{columns:t.columns,dataSource:t.data,rowKey:t.rowKey,bordered:t.bordered,loading:t.loading,size:t.size,"row-selection":t.rowSelection,pagination:{current:t.page,pageSize:t.pageSize,total:t.total,pageSizeOptions:t.pageSizeOptions,onChange:t.onPageChange,onShowSizeChange:t.onShowSizeChange,showSizeChanger:t.showSizeChanger,showQuickJumper:t.showQuickJumper,hideOnSinglePage:t.hideOnSinglePage,showTotal:t.showTotal,size:t.size,showLessItems:t.showLessItems},scroll:{y:t.tableHeight}},scopedSlots:t._u([{key:"number",fn:function(e,a,n){return t.showIndex?[t._v(" "+t._s(n+1)+" ")]:void 0}},t._l(Object.keys(t.$scopedSlots).filter((function(t){return"expandedRowRender"!==t})),(function(e){return{key:e,fn:function(a,n,i){return[t._t(e,null,null,{text:a,record:n,index:i})]}}})),{key:t.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(e,a,n,i){return[t._t(t.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:e,index:a,indent:n,expanded:i})]}}],null,!0)},[t._l(Object.keys(t.$slots),(function(e){return a("template",{slot:e},[t._t(e)],2)}))],2)],1)},i=[],r=(a("a9e3"),a("9b10")),o={name:"BFixedTable",mixins:[r["a"]],props:{columns:{type:Array,required:!0},pageSizeOptions:{type:Array,default:function(){return["10","20","50","100","200"]}},showIndex:{type:Boolean,default:!0},rowKey:String,tableHeight:{type:Number,default:550},beautyScroller:{type:Boolean,default:!0},data:{type:Array,default:function(){return[]}},total:{type:Number,default:0},bordered:{type:Boolean,default:!0},initPage:{type:Number,default:1},initPageSize:{type:Number,default:10},showOuterBorder:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showTotal:{type:Function,default:function(t){return"总共".concat(t,"条")}},showQuickJumper:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},hideOnSinglePage:{type:Boolean,default:!1},showLessItems:{type:Boolean,default:!1},size:{type:String,default:"default"},rootData:{type:Object,default:function(){}},rowSelection:{type:Object,default:function(){return null}}},data:function(){return{page:1,pageSize:10}},mounted:function(){this.fixedHeight(),this.updateData(),this.addIndex(),this.beautyScroller&&this.beautyScroll(),this.showOuterBorder&&this.setOutBorder(),this.page=this.initPage,this.pageSize=this.initPageSize},watch:{initPage:function(t){this.page!==t&&(this.page=t,this.updateData())},initPageSize:function(t){this.pageSize!==t&&(this.pageSize=t,this.updateData())},columns:function(){this.addIndex()},total:function(){this.fixedHeight()},tableHeight:function(){this.fixedHeight()}},methods:{addIndex:function(){this.showIndex&&this.columns.length>0&&"序号"!==this.columns[0].title&&this.columns.unshift({title:"序号",scopedSlots:{customRender:"number"},width:80})},fixedHeight:function(){var t=this,e=this.$refs.table.$el;this.total>0?this.modifyStyleByClass(e,"ant-table-body",{"min-height":"".concat(this.tableHeight,"px"),"max-height":"".concat(this.tableHeight,"px")}):(this.modifyStyleByClass(e,"ant-table-body",{"min-height":"0px","max-height":"".concat(this.tableHeight,"px")}),this.$nextTick((function(){t.modifyStyleByClass(e,"ant-table-placeholder",{"min-height":"".concat(t.tableHeight,"px"),"max-height":"".concat(t.tableHeight,"px")})})))},setOutBorder:function(){var t;null===(t=this.$refs.table.$el.classList)||void 0===t||t.add("ant-card-bordered")},beautyScroll:function(){var t=this.$refs.table.$el.querySelector(".ant-table-hide-scrollbar");t&&(t.classList.add("beauty-scroll"),t.style["margin-bottom"]="",t.style["padding-bottom"]="",t.style["min-width"]="");var e=this.$refs.table.$el.querySelector(".ant-table-body");null===e||void 0===e||e.classList.add("beauty-scroll")},onPageChange:function(t,e){this.page=t,this.pageSize=e,this.updateData()},onShowSizeChange:function(t,e){this.page=1,this.pageSize=e,this.updateData()},updateData:function(){this.$emit("change",{page:this.page,pageSize:this.pageSize,rootData:this.rootData})}}},s=o,c=(a("156c"),a("2877")),l=Object(c["a"])(s,n,i,!1,null,"eb2634aa",null);e["a"]=l.exports},"156c":function(t,e,a){"use strict";a("1bbf")},"1bbf":function(t,e,a){},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var n=a("6b75");function i(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=a("06c5");a("d9e2");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||r(t)||Object(o["a"])(t)||s()}},"3e91":function(t,e,a){"use strict";a("c845")},"69f9":function(t,e,a){},"6a23":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"title"},[t._v("查询条件")]),a("div",{staticClass:"content"},[a("span",[t._v("关键字:")]),a("span",{staticClass:"inner"},[a("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入组织架构名称"},on:{pressEnter:t.clickSearch1},model:{value:t.search.search,callback:function(e){t.$set(t.search,"search",e)},expression:"search.search"}})],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.clickSearch1}},[t._v("查询")])],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",on:{click:t.resetSearch1}},[t._v("重置")])],1)])]),a("div",{staticClass:"body"},[a("div",{staticClass:"buttons"},[t.readOnly?t._e():a("a-button",{attrs:{type:"primary",disabled:0!=t.data.length,icon:"plus"},on:{click:t.create1stOrg}},[t._v("新建")])],1),a("a-row",{staticClass:"table"},[a("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("a-table",{key:t.data,attrs:{columns:t.columns,scroll:{y:550},rowKey:"id",defaultExpandAllRows:t.defaultExpandAllRows,"data-source":t.data,loading:t.loading,bordered:"",indentSize:20,pagination:!1,expandedRowKeys:t.expandedRowKeys},on:{expand:t.handleExpand},scopedSlots:t._u([{key:"gmtCreate",fn:function(e){return[e.gmtCreate?a("span",{attrs:{title:t._f("time")(e.gmtCreate,"YYYY-MM-DD HH:mm:ss")}},[t._v(t._s(t._f("time")(e.gmtCreate,"YYYY-MM-DD HH:mm:ss")))]):a("span",[t._v("-")])]}},{key:"operations",fn:function(e){return[t.readOnly?t._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(a){return t.createOrg(e.id)}}},[t._v("添加下一级")])]),t.readOnly?t._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(a){return t.modifyOrg(e)}}},[t._v("修改")])]),t.readOnly?t._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper red",on:{click:function(a){return t.deleteOrg(e.id)}}},[t._v("删除")])])]}}])})],1)],1)],1)])],1)},i=[],r=a("b85c"),o=a("2909"),s=(a("99af"),a("4de4"),a("d3b7"),a("ac1f"),a("841c"),a("b0c0"),a("0618"),a("8cff")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.form.init.show?a("div",[a("a-modal",{attrs:{closable:!0,title:t.form.init.title,width:500,"mask-closable":!1},model:{value:t.form.init.show,callback:function(e){t.$set(t.form.init,"show",e)},expression:"form.init.show"}},["delete"===t.form.name?a("div",[t._v(" "+t._s(t.form.init.msg)+" ")]):a("a-form-model",{ref:"form",attrs:{model:t.form.init.data,rules:t.form.init.rules,"label-col":{span:8},"wrapper-col":{span:16}}},[void 0!==t.form.init.data.name?a("a-form-model-item",{attrs:{label:"组织名称",prop:"name"}},[a("a-input",{staticClass:"dialog-input-height",attrs:{placeholder:"请输入组织名称",maxLength:20},model:{value:t.form.init.data.name,callback:function(e){t.$set(t.form.init.data,"name",e)},expression:"form.init.data.name"}})],1):t._e(),void 0!==t.form.init.data.description?a("a-form-model-item",{attrs:{label:"备注",prop:"description"}},[a("a-input",{staticClass:"dialog-input-height",attrs:{maxLength:50,placeholder:"请输入备注"},model:{value:t.form.init.data.description,callback:function(e){t.$set(t.form.init.data,"description",e)},expression:"form.init.data.description"}})],1):t._e()],1),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.clickSave()}}},[t._v(t._s(t.okText||t.form.init.okText))]),a("a-button",{on:{click:function(e){return t.clickCancel()}}},[t._v(t._s(t.cancelText||t.form.init.cancelText))])],1)],2)],1):t._e()},l=[],d=a("1da1"),u=(a("96cf"),a("b775"));function p(t){return h.apply(this,arguments)}function h(){return h=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(u["f"])("entity/org-structure",u["a"].POST,e));case 1:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}function f(t){return m.apply(this,arguments)}function m(){return m=Object(d["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.id,t.abrupt("return",Object(u["f"])("entity/org-structure/".concat(a),u["a"].DELETE));case 2:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function g(t){return b.apply(this,arguments)}function b(){return b=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(u["f"])("entity/org-structure",u["a"].PUT,e));case 1:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}var y=a("a00a"),x=a("c2f2"),w={name:"UserDialog",mixins:[x["a"]],data:function(){return{state:"",params:"",parent:"",okText:"",cancelText:"",clientDate:[],clientIPList:[],input:y["a"].input,select:y["a"].ip1,port:y["a"].format23,port1:y["a"].format24,form:{create:{title:"新建",request:p,show:!0,okText:"确定",cancelText:"取消",msg:"",data:{id:"",parentId:-1,name:"",description:""},rules:{name:y["a"].name}},modify:{title:"修改",request:g,show:!0,okText:"确定",cancelText:"取消",msg:"",data:{id:"",parentId:-1,name:"",description:""},rules:{name:y["a"].name}},delete:{title:"删除",isDelete:!0,request:f,show:!0,okText:"确定",cancelText:"取消",msg:"确定删除该组织架构？",data:{id:""},rules:{}}}}},created:function(){this.showDialog(this.state,this.params)},methods:{beforeShowDialog:function(){},close:function(){this.form.init.show=!1},update:function(){var t=this;t.parent.update()}}},S=w,v=(a("3e91"),a("2877")),k=Object(v["a"])(S,c,l,!1,null,"075a6e95",null),O=k.exports,_=new s["a"](O),C=a("ca00"),R=[{title:"组织名称",key:"name",dataIndex:"name"},{title:"组织级别",dataIndex:"orgLevel"},{title:"创建时间",ellipsis:!0,key:"gmtCreate",scopedSlots:{customRender:"gmtCreate"}},{title:"备注",dataIndex:"description"},{title:"操作",scopedSlots:{customRender:"operations"}}],z={name:"UserManage",mixins:[x["a"]],components:{},data:function(){return{readOnly:!1,columns:R,dialog:_,loading:!1,defaultExpandAllRows:!1,expandedRowKeys:[],search:{},data:[]}},filters:{time:C["n"]},mounted:function(){},created:function(){this.readOnly=JSON.parse(localStorage.getItem("org-structure"))||!1,this.update()},methods:{handleExpand:function(t,e){this.expandedRowKeys=t?[].concat(Object(o["a"])(this.expandedRowKeys),[e.id]):this.expandedRowKeys.filter((function(t){return t!==e.id}))},clickSearch1:function(){this.search.search||(this.expandedRowKeys=[]),this.update()},resetSearch1:function(){this.search.search="",this.expandedRowKeys=[],this.update()},update:function(){var t=this;this.loading=!0,this.data=[],Object(u["b"])("entity/org-structures?search=".concat(this.search.search),u["a"].GET).then((function(e){if(t.loading=!1,e&&e.rows){if(t.data=e.rows,t.search.search){var a=[];t.findAndExpand(e.rows,t.search.search,a),t.expandedRowKeys=a}t.$nextTick((function(){t.expandedRowKeys=Object(o["a"])(t.expandedRowKeys)}))}})).catch((function(){t.loading=!1}))},findAndExpand:function(t,e){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=Object(r["a"])(t);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.name===e)return!0;if(o.children&&o.children.length>0&&this.findAndExpand(o.children,e,n))return n.push(o.id),!0}}catch(s){i.e(s)}finally{i.f()}return!1},createOrg:function(t){var e=this;e.dialog.open({state:"create",parent:e,params:{parentId:t},callback:function(){e.update()}})},create1stOrg:function(){var t=this;t.dialog.open({state:"create",parent:t,callback:function(){t.update()}})},modifyOrg:function(t){var e=this;e.dialog.open({state:"modify",parent:this,params:t,callback:function(){e.update()}})},deleteOrg:function(t){var e=this;e.dialog.open({state:"delete",parent:e,params:{id:t},callback:function(){e.update()}})}},destroyed:function(){},watch:{$route:function(t,e){var a=this;e.path!==t.path&&this.$nextTick((function(){a.dialog&&a.dialog.close()}))}},beforeDestroy:function(){this.dialog&&this.dialog.close(),this.expandedRowKeys=[]}},T=z,$=(a("7b15"),Object(v["a"])(T,n,i,!1,null,"18462131",null));e["default"]=$.exports},"7b15":function(t,e,a){"use strict";a("69f9")},c845:function(t,e,a){}}]);