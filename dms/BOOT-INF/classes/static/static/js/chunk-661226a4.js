(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-661226a4"],{"0330":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"title"},[t._v("查询条件")]),a("div",{staticClass:"content"},[a("span",[t._v("关键字:")]),a("span",{staticClass:"inner"},[a("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入用户名"},on:{pressEnter:t.clickSearch},model:{value:t.search.search,callback:function(e){t.$set(t.search,"search",e)},expression:"search.search"}})],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.clickSearch}},[t._v("查询")])],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",on:{click:t.resetSearch}},[t._v("重置")])],1)])]),a("div",{staticClass:"body"},[a("a-row",{staticClass:"table"},[a("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("b-fixed-table",{attrs:{columns:t.columns,rowKey:"name",data:t.auths.data,total:t.auths.total,loading:t.loading,"init-page":t.page},on:{change:t.tableParamChanged},scopedSlots:t._u([{key:"enabled",fn:function(e){var n=e.record;return[1!=n.isDefault?a("div",[n.enabled?a("span",[a("span",{staticClass:"oper green",on:{click:function(e){return t.disableAuth(n)}}},[t._v("已启用")])]):a("span",[a("span",{staticClass:"oper red",on:{click:function(e){return t.enableAuth(n)}}},[t._v("未启用")])])]):t._e()]}},{key:"operations",fn:function(e){var n=e.record;return[1!=n.isDefault?a("span",[a("span",{staticClass:"oper",on:{click:function(e){return t.roleAuth(n)}}},[t._v("设置角色")])]):t._e()]}}])})],1)],1)],1)])],1)},i=[],o=(a("b0c0"),a("0618")),r=a("1da1"),s=(a("96cf"),a("99af"),a("b775"));function l(t,e,a){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function t(e,a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(s["f"])("system/auth-users?offset=".concat((e-1)*a,"&limit=").concat(a).concat(n),s["a"].GET));case 1:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(s["f"])("tool/permission-group/normal",s["a"].GET));case 1:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function p(t){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(s["f"])("system/auth-user",s["a"].PUT,e));case 1:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}function m(t){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.name,t.abrupt("return",Object(s["f"])("system/enable/".concat(a),s["a"].PUT,{}));case 2:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}var b=a("c2f2"),g=a("8cff"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.form.init.show?a("div",[a("a-modal",{attrs:{closable:!0,title:t.form.init.title,width:420,"mask-closable":!1},model:{value:t.form.init.show,callback:function(e){t.$set(t.form.init,"show",e)},expression:"form.init.show"}},[t.form.init.isEnable?a("div",[t._v(" "+t._s(t.form.init.msg)+" ")]):t._e(),t.form.init.isEnable?t._e():a("a-form-model",{ref:"form",attrs:{model:t.form.init.data,rules:t.form.init.rules,"label-col":{span:6},"wrapper-col":{span:16}}},[void 0!==t.form.init.data.userName?a("a-form-model-item",{attrs:{label:"用户名称",prop:"userName"}},[a("a-input",{staticClass:"dialog-input-height",attrs:{placeholder:"请输入名称",maxLength:20,disabled:!0},model:{value:t.form.init.data.userName,callback:function(e){t.$set(t.form.init.data,"userName",e)},expression:"form.init.data.userName"}})],1):t._e(),void 0!==t.form.init.data.permissionGroupName?a("a-form-model-item",{attrs:{label:"角色列表",prop:"permissionGroupName"}},[a("a-select",{staticClass:"dialog-input-height",attrs:{"show-search":!0},on:{change:t.choseRole},model:{value:t.form.init.data.permissionGroupName,callback:function(e){t.$set(t.form.init.data,"permissionGroupName",e)},expression:"form.init.data.permissionGroupName"}},t._l(t.authPermissionGroupList,(function(e,n){return a("a-select-option",{key:n,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1):t._e()],1),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary",loading:t.form.init.confirmLoading},on:{click:function(e){return t.clickSave()}}},[t._v(t._s(t.okText||t.form.init.okText))]),a("a-button",{on:{click:function(e){return t.clickCancel()}}},[t._v(t._s(t.cancelText||t.form.init.cancelText))])],1)],2)],1):t._e()},w=[],x=a("2909"),v=(a("fb6a"),a("d81d"),a("d3b7"),a("159b"),a("d7b0"),a("a00a")),S={name:"AuthDialog",mixins:[b["a"]],data:function(){return{state:"",params:"",parent:"",okText:"",cancelText:"",auths:{data:[],total:0},authPermissionGroupList:[{id:"",name:"请选择角色",type:null}],form:{enable:{title:"启用用户",isEnable:!0,msg:"确定启用该用户？",request:m,show:!0,confirmLoading:!1,okText:"确定",cancelText:"取消",data:{name:""},rules:{name:v["a"].name}},disable:{title:"禁用用户",isEnable:!0,msg:"确定禁用该用户？",request:m,show:!0,confirmLoading:!1,okText:"确定",cancelText:"取消",data:{name:""},rules:{name:v["a"].name}},role:{title:"设置角色",request:p,show:!0,confirmLoading:!1,okText:"确定",cancelText:"取消",isEnable:!1,data:{permissionGroupName:"",userName:"",type:""},rules:{userName:v["a"].name,permissionGroupName:v["a"].select}}}}},created:function(){var t=this;t.showDialog(t.state,t.params),"role"==t.state&&(2==t.params.type||3==t.params.type||t.params.type)},mounted:function(){},methods:{beforeShowDialog:function(){1===this.authPermissionGroupList.length&&this.updateAuthPermissionGroupList(this.params)},updateAuthPermissionGroupList:function(){var t=this;this.authPermissionGroupList=this.authPermissionGroupList.slice(0,1),c().then((function(e){var a,n=e.data.map((function(t){return{id:t.name,name:t.name,type:t.type}}));(a=t.authPermissionGroupList).push.apply(a,Object(x["a"])(n))}))},choseRole:function(t){var e=this;e.form.init.data.rank="",e.authPermissionGroupList.forEach((function(a){a.id==t&&(e.form.init.data.type=a.type)}))},close:function(){this.form.init.show=!1},update:function(){var t=this;t.parent.update()}}},k=S,_=a("2877"),C=Object(_["a"])(k,y,w,!1,null,"3c44ca34",null),z=C.exports,O=new g["a"](z),T=[{title:"用户名称",dataIndex:"name"},{title:"角色",dataIndex:"groupName"},{title:"启用",scopedSlots:{customRender:"enabled"}},{title:"操作",scopedSlots:{customRender:"operations"}}],P={name:"AuthManage",mixins:[b["a"]],components:{BFixedTable:o["a"]},data:function(){return{columns:T,loading:!1,dialog:O,auths:{data:[],total:0}}},mounted:function(){},methods:{roleAuth:function(t){var e=this;e.$confirm({content:"设置用户角色会导致用户强制掉线，请谨慎操作！",okText:"确认",cancelText:"取消",onOk:function(){e.dialog.open({state:"role",params:{permissionGroupName:t.groupName,userName:t.name,id:t.id,rank:t.rank,type:t.type},parent:e,callback:function(){}})},onCancel:function(){}})},enableAuth:function(t){var e=this;this.dialog.open({state:"enable",parent:e,params:{id:t.id,name:t.name}})},disableAuth:function(t){var e=this;this.dialog.open({state:"disable",parent:e,params:{id:t.id,name:t.name}})},update:function(t,e){var a=this;this.page=t||this.page,this.pageSize=e||this.pageSize,a.loading=!0,l(this.page,this.pageSize,this.searchParams).then((function(t){var e=t.data;e&&(a.auths.total=e.total,a.auths.data=e.rows,a.loading=!1)})).catch((function(){a.loading=!1}))}},destroyed:function(){},watch:{$route:function(t,e){var a=this;e.path!==t.path&&this.$nextTick((function(){a.dialog&&a.dialog.close()}))}},beforeDestroy:function(){this.dialog&&this.dialog.close()}},$=P,R=(a("e0d0"),Object(_["a"])($,n,i,!1,null,"12cc5cf2",null));e["default"]=R.exports},"0618":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{ref:"table",staticClass:"AStockOutDetailTable",attrs:{columns:t.columns,dataSource:t.data,rowKey:t.rowKey,bordered:t.bordered,loading:t.loading,size:t.size,"row-selection":t.rowSelection,pagination:{current:t.page,pageSize:t.pageSize,total:t.total,pageSizeOptions:t.pageSizeOptions,onChange:t.onPageChange,onShowSizeChange:t.onShowSizeChange,showSizeChanger:t.showSizeChanger,showQuickJumper:t.showQuickJumper,hideOnSinglePage:t.hideOnSinglePage,showTotal:t.showTotal,size:t.size,showLessItems:t.showLessItems},scroll:{y:t.tableHeight}},scopedSlots:t._u([{key:"number",fn:function(e,a,n){return t.showIndex?[t._v(" "+t._s(n+1)+" ")]:void 0}},t._l(Object.keys(t.$scopedSlots).filter((function(t){return"expandedRowRender"!==t})),(function(e){return{key:e,fn:function(a,n,i){return[t._t(e,null,null,{text:a,record:n,index:i})]}}})),{key:t.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(e,a,n,i){return[t._t(t.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:e,index:a,indent:n,expanded:i})]}}],null,!0)},[t._l(Object.keys(t.$slots),(function(e){return a("template",{slot:e},[t._t(e)],2)}))],2)],1)},i=[],o=(a("a9e3"),a("9b10")),r={name:"BFixedTable",mixins:[o["a"]],props:{columns:{type:Array,required:!0},pageSizeOptions:{type:Array,default:function(){return["10","20","50","100","200"]}},showIndex:{type:Boolean,default:!0},rowKey:String,tableHeight:{type:Number,default:550},beautyScroller:{type:Boolean,default:!0},data:{type:Array,default:function(){return[]}},total:{type:Number,default:0},bordered:{type:Boolean,default:!0},initPage:{type:Number,default:1},initPageSize:{type:Number,default:10},showOuterBorder:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showTotal:{type:Function,default:function(t){return"总共".concat(t,"条")}},showQuickJumper:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},hideOnSinglePage:{type:Boolean,default:!1},showLessItems:{type:Boolean,default:!1},size:{type:String,default:"default"},rootData:{type:Object,default:function(){}},rowSelection:{type:Object,default:function(){return null}}},data:function(){return{page:1,pageSize:10}},mounted:function(){this.fixedHeight(),this.updateData(),this.addIndex(),this.beautyScroller&&this.beautyScroll(),this.showOuterBorder&&this.setOutBorder(),this.page=this.initPage,this.pageSize=this.initPageSize},watch:{initPage:function(t){this.page!==t&&(this.page=t,this.updateData())},initPageSize:function(t){this.pageSize!==t&&(this.pageSize=t,this.updateData())},columns:function(){this.addIndex()},total:function(){this.fixedHeight()},tableHeight:function(){this.fixedHeight()}},methods:{addIndex:function(){this.showIndex&&this.columns.length>0&&"序号"!==this.columns[0].title&&this.columns.unshift({title:"序号",scopedSlots:{customRender:"number"},width:80})},fixedHeight:function(){var t=this,e=this.$refs.table.$el;this.total>0?this.modifyStyleByClass(e,"ant-table-body",{"min-height":"".concat(this.tableHeight,"px"),"max-height":"".concat(this.tableHeight,"px")}):(this.modifyStyleByClass(e,"ant-table-body",{"min-height":"0px","max-height":"".concat(this.tableHeight,"px")}),this.$nextTick((function(){t.modifyStyleByClass(e,"ant-table-placeholder",{"min-height":"".concat(t.tableHeight,"px"),"max-height":"".concat(t.tableHeight,"px")})})))},setOutBorder:function(){var t;null===(t=this.$refs.table.$el.classList)||void 0===t||t.add("ant-card-bordered")},beautyScroll:function(){var t=this.$refs.table.$el.querySelector(".ant-table-hide-scrollbar");t&&(t.classList.add("beauty-scroll"),t.style["margin-bottom"]="",t.style["padding-bottom"]="",t.style["min-width"]="");var e=this.$refs.table.$el.querySelector(".ant-table-body");null===e||void 0===e||e.classList.add("beauty-scroll")},onPageChange:function(t,e){this.page=t,this.pageSize=e,this.updateData()},onShowSizeChange:function(t,e){this.page=1,this.pageSize=e,this.updateData()},updateData:function(){this.$emit("change",{page:this.page,pageSize:this.pageSize,rootData:this.rootData})}}},s=r,l=(a("156c"),a("2877")),u=Object(l["a"])(s,n,i,!1,null,"eb2634aa",null);e["a"]=u.exports},"156c":function(t,e,a){"use strict";a("1bbf")},"1bbf":function(t,e,a){},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var n=a("6b75");function i(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return i(t)||o(t)||Object(r["a"])(t)||s()}},"9ca7":function(t,e,a){},e0d0:function(t,e,a){"use strict";a("9ca7")}}]);