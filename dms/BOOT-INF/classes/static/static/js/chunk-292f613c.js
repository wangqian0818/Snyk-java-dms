(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-292f613c"],{"20f4":function(o,e,t){},2909:function(o,e,t){"use strict";t.d(e,"a",(function(){return s}));var d=t("6b75");function a(o){if(Array.isArray(o))return Object(d["a"])(o)}t("a4d3"),t("e01a"),t("d3b7"),t("d28b"),t("3ca3"),t("ddb0"),t("a630");function r(o){if("undefined"!==typeof Symbol&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}var i=t("06c5");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(o){return a(o)||r(o)||Object(i["a"])(o)||n()}},"39e6":function(o,e,t){"use strict";t("da94")},"56cf":function(o,e,t){"use strict";t.d(e,"c",(function(){return r})),t.d(e,"b",(function(){return n})),t.d(e,"h",(function(){return l})),t.d(e,"g",(function(){return p})),t.d(e,"e",(function(){return h})),t.d(e,"d",(function(){return u})),t.d(e,"a",(function(){return k})),t.d(e,"f",(function(){return S}));var d=t("1da1"),a=(t("96cf"),t("99af"),t("e9c4"),t("b775"));function r(o,e,t){return i.apply(this,arguments)}function i(){return i=Object(d["a"])(regeneratorRuntime.mark((function o(e,t,d){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(a["f"])("protection/intrusion-configs?offset=".concat((e-1)*t,"&limit=").concat(t).concat(d||""),a["a"].GET));case 1:case"end":return o.stop()}}),o)}))),i.apply(this,arguments)}function n(o,e,t){return s.apply(this,arguments)}function s(){return s=Object(d["a"])(regeneratorRuntime.mark((function o(e,t,d){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(a["f"])("protection/device-ddoses?offset=".concat((e-1)*t,"&limit=").concat(t).concat(d||""),a["a"].GET));case 1:case"end":return o.stop()}}),o)}))),s.apply(this,arguments)}function l(o,e,t){return c.apply(this,arguments)}function c(){return c=Object(d["a"])(regeneratorRuntime.mark((function o(e,t,d){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(a["f"])("protection/waf-configs?offset=".concat((e-1)*t,"&limit=").concat(t,"&search=").concat(d||""),a["a"].GET));case 1:case"end":return o.stop()}}),o)}))),c.apply(this,arguments)}function p(o){return m.apply(this,arguments)}function m(){return m=Object(d["a"])(regeneratorRuntime.mark((function o(e){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(a["f"])("protection/waf-config/".concat(e),a["a"].GET));case 1:case"end":return o.stop()}}),o)}))),m.apply(this,arguments)}function h(o){return f.apply(this,arguments)}function f(){return f=Object(d["a"])(regeneratorRuntime.mark((function o(e){var t;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t=JSON.parse(JSON.stringify(e)),o.abrupt("return",Object(a["f"])("device/border-device-security",a["a"].PUT,t));case 2:case"end":return o.stop()}}),o)}))),f.apply(this,arguments)}function u(o){return b.apply(this,arguments)}function b(){return b=Object(d["a"])(regeneratorRuntime.mark((function o(e){var t;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t=e.id,o.abrupt("return",Object(a["f"])("device/border-device-security/send/".concat(t),a["a"].PUT));case 2:case"end":return o.stop()}}),o)}))),b.apply(this,arguments)}function k(o){return F.apply(this,arguments)}function F(){return F=Object(d["a"])(regeneratorRuntime.mark((function o(e){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(a["f"])("protection/device-ddos/ddos-config/".concat(e),a["a"].GET));case 1:case"end":return o.stop()}}),o)}))),F.apply(this,arguments)}function S(o){return g.apply(this,arguments)}function g(){return g=Object(d["a"])(regeneratorRuntime.mark((function o(e){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(a["f"])("tool/border-device-net-iface/raw-ifaces?deviceId=".concat(e,"&type=1"),a["a"].GET));case 1:case"end":return o.stop()}}),o)}))),g.apply(this,arguments)}},ac66:function(o,e,t){"use strict";t("fd8d")},b335:function(o,e,t){"use strict";t("20f4")},b6f5:function(o,e,t){"use strict";t.r(e);var d=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("a-card",{staticStyle:{"margin-top":"30px"}},[t("div",{staticClass:"body"},[t("a-spin",{attrs:{spinning:o.spinning,tip:"正在导入数据，请稍等！"}},[t("div",{staticClass:"buttons"},[t("a-button",{attrs:{type:"primary",icon:"sync"},on:{click:function(e){return o.clickSearch(1)}}},[o._v("刷新")])],1),t("div",{staticClass:"title"},[o._v("查询结果")]),t("a-row",{staticClass:"table"},[t("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[t("b-fixed-table",{attrs:{columns:o.columns,rowKey:"id",data:o.table.data,total:o.table.total,loading:o.loading,"init-page":o.page},on:{change:o.tableParamChanged},scopedSlots:o._u([{key:"ddosState",fn:function(e){var d=e.record;return[t("span",{domProps:{innerHTML:o._s(o.convertServiceStateHtml(d.ddos))}})]}},{key:"synFloodEnable",fn:function(e){var d=e.record;return[t("span",{domProps:{innerHTML:o._s(o.convertServiceStateHtml(d.synFloodEnable))}})]}},{key:"udpFloodEnable",fn:function(e){var d=e.record;return[t("span",{domProps:{innerHTML:o._s(o.convertServiceStateHtml(d.udpFloodEnable))}})]}},{key:"icmpFloodEnable",fn:function(e){var d=e.record;return[t("span",{domProps:{innerHTML:o._s(o.convertServiceStateHtml(d.icmpFloodEnable))}})]}},{key:"ackFloodEnable",fn:function(e){var d=e.record;return[t("span",{domProps:{innerHTML:o._s(o.convertServiceStateHtml(d.ackFloodEnable))}})]}},{key:"rstFloodEnable",fn:function(e){var d=e.record;return[t("span",{domProps:{innerHTML:o._s(o.convertServiceStateHtml(d.rstFloodEnable))}})]}},{key:"ddosWorkState",fn:function(e){var d=e.record;return[t("span",[o._v(o._s(o._f("convertWorkState")(d.ddosWorkState)))])]}},{key:"operations2",fn:function(e){var d=e.record;return[[t("span",[t("span",{staticClass:"oper",on:{click:function(e){return o.ddosPeizhi(d)}}},[o._v("配置")])])]]}},{key:"operations",fn:function(e){var d=e.record;return[t("span",{staticClass:"oper-margin"},[o.readOnly?o._e():t("span",{staticClass:"oper",on:{click:function(e){return o.borderDeviceModify(d)}}},[o._v("配置")])])]}}])})],1)],1)],1)],1)]),t("a-modal",{attrs:{width:"800px","body-style":{maxHeight:"800px",overflowY:"auto"},closable:!0,title:"配置","mask-closable":!1},on:{cancel:o.clickCancelDdosPeizhi},model:{value:o.ddospeizhiVisible,callback:function(e){o.ddospeizhiVisible=e},expression:"ddospeizhiVisible"}},[t("a-form-model",{ref:"ddosForm",attrs:{model:o.ddosForm.data,rules:o.ddosForm.rules,"label-col":{span:o.form.labelSpan||8},"wrapper-col":{span:o.form.wrapperSpan||16}}},[t("table",{staticStyle:{width:"100%"}},[t("tr",[t("td",[o._v("SYNflood限速")]),t("td",[t("a-form-model-item",{attrs:{label:"SYN源IP封锁阈值(pps)",prop:"blockingThresholdOfSynSip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{maxLength:10,disabled:1!=o.ddosForm.data.synFloodEnable,placeholder:"输入范围[1-1000000]"},on:{change:o.changeSynSip},model:{value:o.ddosForm.data.blockingThresholdOfSynSip,callback:function(e){o.$set(o.ddosForm.data,"blockingThresholdOfSynSip",e)},expression:"ddosForm.data.blockingThresholdOfSynSip"}})],1),t("a-form-model-item",{attrs:{label:"SYN目的IP丢包阈值(pps)",prop:"dropThresholdOfSynDip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{maxLength:10,placeholder:"输入范围[1-1000000]",disabled:1!=o.ddosForm.data.synFloodEnable},model:{value:o.ddosForm.data.dropThresholdOfSynDip,callback:function(e){o.$set(o.ddosForm.data,"dropThresholdOfSynDip",e)},expression:"ddosForm.data.dropThresholdOfSynDip"}})],1),t("a-form-model-item",{attrs:{label:"SYN封锁时长(s)",prop:"blockingTimeOfSynSip",rules:1==o.ddosForm.data.synFloodEnable&&""!=o.ddosForm.data.blockingThresholdOfSynSip&&null!=o.ddosForm.data.blockingThresholdOfSynSip?o.format5:o.format6}},[t("a-input",{staticStyle:{width:"100%"},attrs:{maxLength:10,placeholder:"输入范围[1-1800]",disabled:""==o.ddosForm.data.blockingThresholdOfSynSip||null==o.ddosForm.data.blockingThresholdOfSynSip},model:{value:o.ddosForm.data.blockingTimeOfSynSip,callback:function(e){o.$set(o.ddosForm.data,"blockingTimeOfSynSip",e)},expression:"ddosForm.data.blockingTimeOfSynSip"}})],1),t("a-form-model-item",{attrs:{label:"Synflood开关",prop:"synFloodEnable"}},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关"},on:{change:o.changeSynEnable},model:{value:o.ddosForm.data.synFloodEnable,callback:function(e){o.$set(o.ddosForm.data,"synFloodEnable",e)},expression:"ddosForm.data.synFloodEnable"}})],1)],1)]),t("tr",[t("td",[o._v("UDPflood限速")]),t("td",[t("a-form-model-item",{attrs:{label:"UDP源IP封锁阈值(pps)",prop:"blockingThresholdOfUdpSip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:1!=o.ddosForm.data.udpFloodEnable,maxLength:10,placeholder:"输入范围[1-1000000]"},on:{change:o.changeUdpSip},model:{value:o.ddosForm.data.blockingThresholdOfUdpSip,callback:function(e){o.$set(o.ddosForm.data,"blockingThresholdOfUdpSip",e)},expression:"ddosForm.data.blockingThresholdOfUdpSip"}})],1),t("a-form-model-item",{attrs:{label:"UDP目的IP丢包阈值(pps)",prop:"dropThresholdOfUdpDip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:1!=o.ddosForm.data.udpFloodEnable,maxLength:10,placeholder:"输入范围[1-1000000]"},model:{value:o.ddosForm.data.dropThresholdOfUdpDip,callback:function(e){o.$set(o.ddosForm.data,"dropThresholdOfUdpDip",e)},expression:"ddosForm.data.dropThresholdOfUdpDip"}})],1),t("a-form-model-item",{attrs:{label:"UDP封锁时长(s)",prop:"blockingTimeOfUdpSip",rules:1==o.ddosForm.data.udpFloodEnable&&""!=o.ddosForm.data.blockingThresholdOfUdpSip&&null!=o.ddosForm.data.blockingThresholdOfUdpSip?o.format5:o.format6}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:""==o.ddosForm.data.blockingThresholdOfUdpSip||null==o.ddosForm.data.blockingThresholdOfUdpSip,maxLength:10,placeholder:"输入范围[1-1800]"},model:{value:o.ddosForm.data.blockingTimeOfUdpSip,callback:function(e){o.$set(o.ddosForm.data,"blockingTimeOfUdpSip",e)},expression:"ddosForm.data.blockingTimeOfUdpSip"}})],1),t("a-form-model-item",{attrs:{label:"UdpFlood开关",prop:"udpFloodEnable"}},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关"},on:{change:o.changeUdpEnable},model:{value:o.ddosForm.data.udpFloodEnable,callback:function(e){o.$set(o.ddosForm.data,"udpFloodEnable",e)},expression:"ddosForm.data.udpFloodEnable"}})],1)],1)]),t("tr",[t("td",[o._v("ICMPflood限速")]),t("td",[t("a-form-model-item",{attrs:{label:"ICMP源IP封锁阈值(pps)",prop:"blockingThresholdOfIcmpSip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:1!=o.ddosForm.data.icmpFloodEnable,maxLength:10,placeholder:"输入范围[1-1000000]"},on:{change:o.changeIcmpSip},model:{value:o.ddosForm.data.blockingThresholdOfIcmpSip,callback:function(e){o.$set(o.ddosForm.data,"blockingThresholdOfIcmpSip",e)},expression:"ddosForm.data.blockingThresholdOfIcmpSip"}})],1),t("a-form-model-item",{attrs:{label:"ICMP目的IP丢包阈值(pps)",prop:"dropThresholdOfIcmpDip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:1!=o.ddosForm.data.icmpFloodEnable,maxLength:10,placeholder:"输入范围[1-1000000]"},model:{value:o.ddosForm.data.dropThresholdOfIcmpDip,callback:function(e){o.$set(o.ddosForm.data,"dropThresholdOfIcmpDip",e)},expression:"ddosForm.data.dropThresholdOfIcmpDip"}})],1),t("a-form-model-item",{attrs:{label:"ICMP封锁时长(s)",prop:"blockingTimeOfIcmpSip",rules:1==o.ddosForm.data.icmpFloodEnable&&""!=o.ddosForm.data.blockingThresholdOfIcmpSip&&null!=o.ddosForm.data.blockingThresholdOfIcmpSip?o.format5:o.format6}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:""==o.ddosForm.data.blockingThresholdOfIcmpSip||null==o.ddosForm.data.blockingThresholdOfIcmpSip,maxLength:10,placeholder:"输入范围[1-1800]"},model:{value:o.ddosForm.data.blockingTimeOfIcmpSip,callback:function(e){o.$set(o.ddosForm.data,"blockingTimeOfIcmpSip",e)},expression:"ddosForm.data.blockingTimeOfIcmpSip"}})],1),t("a-form-model-item",{attrs:{label:"icmpFlood开关",prop:"icmpFloodEnable"}},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关"},on:{change:o.changeIcmpEnable},model:{value:o.ddosForm.data.icmpFloodEnable,callback:function(e){o.$set(o.ddosForm.data,"icmpFloodEnable",e)},expression:"ddosForm.data.icmpFloodEnable"}})],1)],1)]),t("tr",[t("td",[o._v("Ackflood限速")]),t("td",[t("a-form-model-item",{attrs:{label:"ACK源IP封锁阈值(pps)",prop:"blockingThresholdOfAckSip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:1!=o.ddosForm.data.ackFloodEnable,maxLength:10,placeholder:"输入范围[1-1000000]"},on:{change:o.changeAckSip},model:{value:o.ddosForm.data.blockingThresholdOfAckSip,callback:function(e){o.$set(o.ddosForm.data,"blockingThresholdOfAckSip",e)},expression:"ddosForm.data.blockingThresholdOfAckSip"}})],1),t("a-form-model-item",{attrs:{label:"ACK目的IP丢包阈值(pps)",prop:"dropThresholdOfAckDip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:1!=o.ddosForm.data.ackFloodEnable,maxLength:10,placeholder:"输入范围[1-1000000]"},model:{value:o.ddosForm.data.dropThresholdOfAckDip,callback:function(e){o.$set(o.ddosForm.data,"dropThresholdOfAckDip",e)},expression:"ddosForm.data.dropThresholdOfAckDip"}})],1),t("a-form-model-item",{attrs:{label:"ACK封锁时长(s)",prop:"blockingTimeOfAckSip",rules:1==o.ddosForm.data.ackFloodEnable&&""!=o.ddosForm.data.blockingThresholdOfAckSip&&null!=o.ddosForm.data.blockingThresholdOfAckSip?o.format5:o.format6}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:""==o.ddosForm.data.blockingThresholdOfAckSip||null==o.ddosForm.data.blockingThresholdOfAckSip,maxLength:10,placeholder:"输入范围[1-1800]"},model:{value:o.ddosForm.data.blockingTimeOfAckSip,callback:function(e){o.$set(o.ddosForm.data,"blockingTimeOfAckSip",e)},expression:"ddosForm.data.blockingTimeOfAckSip"}})],1),t("a-form-model-item",{attrs:{label:"AckFlood开关",prop:"ackFloodEnable"}},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关"},on:{change:o.changeAckEnable},model:{value:o.ddosForm.data.ackFloodEnable,callback:function(e){o.$set(o.ddosForm.data,"ackFloodEnable",e)},expression:"ddosForm.data.ackFloodEnable"}})],1)],1)]),t("tr",[t("td",[o._v("Rstflood限速")]),t("td",[t("a-form-model-item",{attrs:{label:"RST源IP封锁阈值(pps)",prop:"blockingThresholdOfRstSip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:1!=o.ddosForm.data.rstFloodEnable,maxLength:10,placeholder:"输入范围[1-1000000]"},on:{change:o.changeRstSip},model:{value:o.ddosForm.data.blockingThresholdOfRstSip,callback:function(e){o.$set(o.ddosForm.data,"blockingThresholdOfRstSip",e)},expression:"ddosForm.data.blockingThresholdOfRstSip"}})],1),t("a-form-model-item",{attrs:{label:"RST目的IP丢包阈值(pps)",prop:"dropThresholdOfRstDip"}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:1!=o.ddosForm.data.rstFloodEnable,maxLength:10,placeholder:"输入范围[1-1000000]"},model:{value:o.ddosForm.data.dropThresholdOfRstDip,callback:function(e){o.$set(o.ddosForm.data,"dropThresholdOfRstDip",e)},expression:"ddosForm.data.dropThresholdOfRstDip"}})],1),t("a-form-model-item",{attrs:{label:"RST封锁时长(s)",prop:"blockingTimeOfRstSip",rules:1==o.ddosForm.data.rstFloodEnable&&""!=o.ddosForm.data.blockingThresholdOfRstSip&&null!=o.ddosForm.data.blockingThresholdOfRstSip?o.format5:o.format6}},[t("a-input",{staticStyle:{width:"100%"},attrs:{disabled:""==o.ddosForm.data.blockingThresholdOfRstSip||null==o.ddosForm.data.blockingThresholdOfRstSip,maxLength:10,placeholder:"输入范围[1-1800]"},model:{value:o.ddosForm.data.blockingTimeOfRstSip,callback:function(e){o.$set(o.ddosForm.data,"blockingTimeOfRstSip",e)},expression:"ddosForm.data.blockingTimeOfRstSip"}})],1),t("a-form-model-item",{attrs:{label:"RstFlood开关",prop:"rstFloodEnable"}},[t("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关"},on:{change:o.changeRstEnable},model:{value:o.ddosForm.data.rstFloodEnable,callback:function(e){o.$set(o.ddosForm.data,"rstFloodEnable",e)},expression:"ddosForm.data.rstFloodEnable"}})],1)],1)])])]),t("template",{slot:"footer"},[t("a-button",{attrs:{type:"primary"},on:{click:function(e){return o.clickSaveDdosPeizhi()}}},[o._v("保存及下发")]),t("a-button",{on:{click:function(e){return o.clickCancelDdosPeizhi()}}},[o._v("取消")])],1)],2)],1)},a=[],r=(t("b0c0"),t("ac1f"),t("1276"),t("a15b"),t("c2f2")),i=t("0618"),n=t("8cff"),s=function(){var o=this,e=o.$createElement,t=o._self._c||e;return o.form.init.show?t("div",[t("a-modal",{attrs:{closable:!0,title:o.form.init.title,width:o.form.init.width,"mask-closable":!1},model:{value:o.form.init.show,callback:function(e){o.$set(o.form.init,"show",e)},expression:"form.init.show"}},["delete"===o.form.name?t("div",[o._v("确定删除？")]):"dispatch"===o.form.name?t("div",[o._v("确定下发？")]):t("a-form-model",{ref:"form",attrs:{model:o.form.init.data,rules:o.form.init.rules,"label-col":{span:o.form.init.labelSpan||0},"wrapper-col":{span:o.form.init.wrapperSpan||24}}},[t("a-form-model-item",[t("table",{staticStyle:{width:"100%"}},[t("tr",[t("td",[o._v("端口扫描")]),t("td",[t("a-radio-group",{model:{value:o.form.init.data.scan1,callback:function(e){o.$set(o.form.init.data,"scan1",e)},expression:"form.init.data.scan1"}},[t("a-radio",{attrs:{value:1}},[o._v("启用")]),t("a-radio",{attrs:{value:2}},[o._v("禁用")])],1)],1)])])])],1),t("template",{slot:"footer"},[t("a-button",{attrs:{type:"primary",loading:o.form.init.confirmLoading},on:{click:function(e){return o.clickSave()}}},[o._v(" "+o._s("create"===o.form.name||"modify"===o.form.name?"保存及下发":"batchDispatch"===o.form.name?"下发":"确定")+" ")]),t("a-button",{on:{click:function(e){return o.clickCancel()}}},[o._v("取消")])],1)],2)],1):o._e()},l=[],c=t("2909"),p=t("b85c"),m=(t("d81d"),t("a9e3"),t("c8f0")),h=t("56cf"),f=t("40a7"),u={name:"BorderDeviceSecurityDialog",mixins:[r["a"]],components:{},filters:{},props:{},data:function(){return{locale:f["a"],deviceList:[],ifaceList:[{id:"",name:"请选择接口"}],deviceType:"",form:{modify:{title:"修改",width:700,request:h["e"],show:!0,confirmLoading:!1,data:{id:"",deviceType:"",scan1:"",scan:""},rules:{}},dispatch:{title:"下发",width:420,request:h["d"],show:!0,confirmLoading:!1,data:{id:""},rules:{}}}}},watch:{deviceList:function(){var o,e=Object(p["a"])(this.deviceList);try{for(e.s();!(o=e.n()).done;){var t=o.value;if(t.id===this.form.init.data.channelInfoId){this.deviceType=t.deviceType;break}}}catch(d){e.e(d)}finally{e.f()}}},created:function(){this.showDialog(this.state,this.params),"modify"!==this.state&&"batchDispatch"!==this.state||this.updateBorderDeviceList(),this.state},methods:{selectAll:function(){this.form.init.data.devices=this.deviceList.map((function(o){return o.id}))},turnNum:function(o){return o.map(Number)},deselectAll:function(){this.form.init.data.devices=[]},deviceIfaceList:function(o){var e=this;Object(h["f"])(o).then((function(o){e.ifaceList=Object(c["a"])(o.data)}))},beforeShowDialog:function(o,e){"modify"===o&&(e.data.scan1=e.data.scan?1:2)},onChange:function(o){this.form.init.data.checkType=o,this.form.init.data.workArea=this.form.init.data.checkType.join("")},beforeSave:function(o){"modify"===this.form.name&&(o.scan=1===o.scan1)},close:function(){this.form.init.show=!1},update:function(){var o=this;o.parent.update()},updateBorderDeviceList:function(){var o=this;Object(m["a"])().then((function(e){var t=e.data;o.deviceList=t}))}}},b=u,k=(t("ac66"),t("2877")),F=Object(k["a"])(b,s,l,!1,null,"2fca094c",null),S=F.exports,g=new n["a"](S),T=t("d9f9"),O=t("b775"),v=t("a00a"),y=[{title:"设备名称",dataIndex:"deviceName"},{title:"防护配置",children:[{title:"SYNflood限速",scopedSlots:{customRender:"synFloodEnable"}},{title:"UDPflood限速",scopedSlots:{customRender:"udpFloodEnable"}},{title:"ICMPflood限速",scopedSlots:{customRender:"icmpFloodEnable"}},{title:"ACKflood限速",scopedSlots:{customRender:"ackFloodEnable"}},{title:"RSTflood限速",scopedSlots:{customRender:"rstFloodEnable"}},{title:"状态",scopedSlots:{customRender:"ddosWorkState"}},{title:"操作",scopedSlots:{customRender:"operations2"}}]}],w={name:"securityMgr",components:{BFixedTable:i["a"]},mixins:[r["a"]],filters:{convertWorkState:T["H"]},props:{},data:function(){return{readOnly:!1,dialog:g,columns:y,loading:!1,spinning:!1,ddospeizhiVisible:!1,table:{data:[],total:0},format5:v["a"].format5,format6:v["a"].format6,ddosForm:{data:{id:"",deviceName:"",deviceType:"",checkType:"",workArea:"",ddos:!1,synCookie:!1,channelInfoId:"",blockingThresholdOfSynSip:"",dropThresholdOfSynDip:"",blockingTimeOfSynSip:"",blockingThresholdOfUdpSip:"",dropThresholdOfUdpDip:"",blockingTimeOfUdpSip:"",blockingThresholdOfIcmpSip:"",dropThresholdOfIcmpDip:"",blockingTimeOfIcmpSip:"",synFloodEnable:!1,udpFloodEnable:!1,icmpFloodEnable:!1,ackFloodEnable:!1,rstFloodEnable:!1,blockingThresholdOfAckSip:"",blockingTimeOfAckSip:"",dropThresholdOfAckDip:"",blockingThresholdOfRstSip:"",blockingTimeOfRstSip:"",dropThresholdOfRstDip:""},rules:{blockingThresholdOfUdpSip:v["a"].format4,dropThresholdOfUdpDip:v["a"].format4,blockingThresholdOfIcmpSip:v["a"].format4,dropThresholdOfIcmpDip:v["a"].format4,blockingThresholdOfSynSip:v["a"].format4,dropThresholdOfSynDip:v["a"].format4,blockingThresholdOfAckSip:v["a"].format4,blockingTimeOfAckSip:v["a"].format4,dropThresholdOfAckDip:v["a"].format4,blockingThresholdOfRstSip:v["a"].format4,blockingTimeOfRstSip:v["a"].format4,dropThresholdOfRstDip:v["a"].format4}}}},created:function(){this.readOnly=JSON.parse(localStorage.getItem("device-ddos"))||!1},computed:{},mounted:function(){this.detectDeviceType()},methods:{convertServiceStateHtml:T["z"],update:function(o,e){var t=this;this.page=o||this.page,this.pageSize=e||this.pageSize,this.loading=!0,Object(h["b"])(this.page,this.pageSize).then((function(o){var e=o.data;e&&(t.table.total=null==e.total?0:e.total,t.table.data=e.rows,t.loading=!1)})).catch((function(){t.loading=!1}))},ddosPeizhi:function(o){var e=this,t=o.id;Object(h["a"])(t).then((function(t){t.data&&(e.ddosForm.data=t.data,e.ddosForm.data.channelInfoId=o.id,e.ddosForm.data.deviceType=o.deviceType,e.ddosForm.data.deviceName=o.name,""!=e.ddosForm.data.workArea&&null!=e.ddosForm.data.workArea&&(e.ddosForm.data.checkType=e.ddosForm.data.workArea.split("")))})),e.ddospeizhiVisible=!0},clickCancelDdosPeizhi:function(){this.ddospeizhiVisible=!1,this.$refs["ddosForm"].clearValidate(),this.ddosForm.data={id:"",deviceName:"",deviceType:"",checkType:"",workArea:"",ddos:!1,synCookie:!1,channelInfoId:"",blockingThresholdOfSynSip:"",dropThresholdOfSynDip:"",blockingTimeOfSynSip:"",blockingThresholdOfUdpSip:"",dropThresholdOfUdpDip:"",blockingTimeOfUdpSip:"",blockingThresholdOfIcmpSip:"",dropThresholdOfIcmpDip:"",blockingTimeOfIcmpSip:"",synFloodEnable:!1,udpFloodEnable:!1,icmpFloodEnable:!1,ackFloodEnable:!1,rstFloodEnable:!1,blockingThresholdOfAckSip:"",blockingTimeOfAckSip:"",dropThresholdOfAckDip:"",blockingThresholdOfRstSip:"",blockingTimeOfRstSip:"",dropThresholdOfRstDip:""}},onChange:function(o){this.$forceUpdate(),this.ddosForm.data.checkType=o,this.ddosForm.data.workArea=this.ddosForm.data.checkType.join("")},changeDDos:function(o){this.ddosForm.data.synCookie=!1,1==o&&(this.ddosForm.data.synCookie=!0)},changeSynCookie:function(){this.$forceUpdate()},changeSynSip:function(){this.$refs["ddosForm"].clearValidate(),this.ddosForm.data.blockingTimeOfSynSip=""},changeUdpSip:function(){this.ddosForm.data.blockingTimeOfUdpSip="",this.$refs["ddosForm"].clearValidate()},changeIcmpSip:function(){this.ddosForm.data.blockingTimeOfIcmpSip="",this.$refs["ddosForm"].clearValidate()},changeAckSip:function(){this.ddosForm.data.blockingTimeOfAckSip="",this.$refs["ddosForm"].clearValidate()},changeAckEnable:function(){this.$refs["ddosForm"].clearValidate(),this.ddosForm.data.blockingThresholdOfAckSip="",this.ddosForm.data.blockingTimeOfAckSip="",this.ddosForm.data.dropThresholdOfAckDip=""},changeRstSip:function(){this.ddosForm.data.blockingTimeOfRstSip="",this.$refs["ddosForm"].clearValidate()},changeRstEnable:function(){this.$refs["ddosForm"].clearValidate(),this.ddosForm.data.blockingThresholdOfRstSip="",this.ddosForm.data.blockingTimeOfRstSip="",this.ddosForm.data.dropThresholdOfRstDip=""},clickSaveDdosPeizhi:function(){var o=this;o.$refs["ddosForm"].validate((function(e){if(e){var t=!0;1==o.ddosForm.data.synFloodEnable&&(""!==o.ddosForm.data.blockingThresholdOfSynSip&&null!==o.ddosForm.data.blockingThresholdOfSynSip&&void 0!==o.ddosForm.data.blockingThresholdOfSynSip||""!==o.ddosForm.data.dropThresholdOfSynDip&&null!==o.ddosForm.data.dropThresholdOfSynDip&&void 0!==o.ddosForm.data.dropThresholdOfSynDip||(o.$message.error("Syn源IP封锁阈值和UDP目的IP丢包阈值至少配置一项"),t=!1)),1==o.ddosForm.data.udpFloodEnable&&(""!==o.ddosForm.data.blockingThresholdOfUdpSip&&null!==o.ddosForm.data.blockingThresholdOfUdpSip&&void 0!==o.ddosForm.data.blockingThresholdOfUdpSip||""!==o.ddosForm.data.dropThresholdOfUdpDip&&null!==o.ddosForm.data.dropThresholdOfUdpDip&&void 0!==o.ddosForm.data.dropThresholdOfUdpDip||(o.$message.error("UDP源IP封锁阈值和UDP目的IP丢包阈值至少配置一项"),t=!1)),1==o.ddosForm.data.icmpFloodEnable&&(""!==o.ddosForm.data.blockingThresholdOfIcmpSip&&null!==o.ddosForm.data.blockingThresholdOfIcmpSip&&void 0!==o.ddosForm.data.blockingThresholdOfIcmpSip||""!==o.ddosForm.data.dropThresholdOfIcmpDip&&null!==o.ddosForm.data.dropThresholdOfIcmpDip&&void 0!==o.ddosForm.data.dropThresholdOfIcmpDip||(o.$message.error("icmp源IP封锁阈值和icmp目的IP丢包阈值至少配置一项"),t=!1)),1==o.ddosForm.data.ackFloodEnable&&(""!==o.ddosForm.data.blockingThresholdOfAckSip&&null!==o.ddosForm.data.blockingThresholdOfAckSip&&void 0!==o.ddosForm.data.blockingThresholdOfAckSip||""!==o.ddosForm.data.dropThresholdOfAckDip&&null!==o.ddosForm.data.dropThresholdOfAckDip&&void 0!==o.ddosForm.data.dropThresholdOfAckDip||(o.$message.error("ACK源IP封锁阈值和ACK目的IP丢包阈值至少配置一项"),t=!1)),1==o.ddosForm.data.rstFloodEnable&&(""!==o.ddosForm.data.blockingThresholdOfRstSip&&null!==o.ddosForm.data.blockingThresholdOfRstSip&&void 0!==o.ddosForm.data.blockingThresholdOfRstSip||""!==o.ddosForm.data.dropThresholdOfRstDip&&null!==o.ddosForm.data.dropThresholdOfRstDip&&void 0!==o.ddosForm.data.dropThresholdOfRstDip||(o.$message.error("icmp源IP封锁阈值和icmp目的IP丢包阈值至少配置一项"),t=!1)),t&&Object(O["b"])("protection/device-ddos/ddos-config",O["a"].PUT,o.ddosForm.data).then((function(e){"FAIL"==e.state?o.$message.error(e.msg):(o.$message.success("配置成功"),o.clickCancelDdosPeizhi(),o.update())}))}}))},changeSynEnable:function(){this.$refs["ddosForm"].clearValidate(),this.ddosForm.data.blockingThresholdOfSynSip="",this.ddosForm.data.dropThresholdOfSynDip="",this.ddosForm.data.blockingTimeOfSynSip=""},changeUdpEnable:function(){this.$refs["ddosForm"].clearValidate(),this.ddosForm.data.blockingThresholdOfUdpSip="",this.ddosForm.data.dropThresholdOfUdpDip="",this.ddosForm.data.blockingTimeOfUdpSip=""},changeIcmpEnable:function(){this.$refs["ddosForm"].clearValidate(),this.ddosForm.data.blockingThresholdOfIcmpSip="",this.ddosForm.data.dropThresholdOfIcmpDip="",this.ddosForm.data.blockingTimeOfIcmpSip=""},borderDeviceModify:function(o){this.dialog.open({state:"modify",parent:this,params:o})}},watch:{$route:function(o,e){var t=this;e.path!==o.path&&this.$nextTick((function(){t.dialog&&t.dialog.close()}))}},beforeDestroy:function(){this.dialog&&this.dialog.close()}},E=w,D=(t("b335"),t("39e6"),Object(k["a"])(E,d,a,!1,null,"128bd076",null));e["default"]=D.exports},da94:function(o,e,t){},fd8d:function(o,e,t){}}]);