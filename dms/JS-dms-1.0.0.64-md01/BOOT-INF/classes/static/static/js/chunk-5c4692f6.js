(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c4692f6"],{"0618":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{ref:"table",staticClass:"AStockOutDetailTable",attrs:{columns:t.columns,dataSource:t.data,rowKey:t.rowKey,bordered:t.bordered,loading:t.loading,size:t.size,"row-selection":t.rowSelection,pagination:{current:t.page,pageSize:t.pageSize,total:t.total,pageSizeOptions:t.pageSizeOptions,onChange:t.onPageChange,onShowSizeChange:t.onShowSizeChange,showSizeChanger:t.showSizeChanger,showQuickJumper:t.showQuickJumper,hideOnSinglePage:t.hideOnSinglePage,showTotal:t.showTotal,size:t.size,showLessItems:t.showLessItems},scroll:{y:t.tableHeight}},scopedSlots:t._u([{key:"number",fn:function(e,a,n){return t.showIndex?[t._v(" "+t._s(n+1)+" ")]:void 0}},t._l(Object.keys(t.$scopedSlots).filter((function(t){return"expandedRowRender"!==t})),(function(e){return{key:e,fn:function(a,n,i){return[t._t(e,null,null,{text:a,record:n,index:i})]}}})),{key:t.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(e,a,n,i){return[t._t(t.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:e,index:a,indent:n,expanded:i})]}}],null,!0)},[t._l(Object.keys(t.$slots),(function(e){return a("template",{slot:e},[t._t(e)],2)}))],2)],1)},i=[],r=(a("a9e3"),a("9b10")),o={name:"BFixedTable",mixins:[r["a"]],props:{columns:{type:Array,required:!0},pageSizeOptions:{type:Array,default:function(){return["10","20","50","100","200"]}},showIndex:{type:Boolean,default:!0},rowKey:String,tableHeight:{type:Number,default:550},beautyScroller:{type:Boolean,default:!0},data:{type:Array,default:function(){return[]}},total:{type:Number,default:0},bordered:{type:Boolean,default:!0},initPage:{type:Number,default:1},initPageSize:{type:Number,default:10},showOuterBorder:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showTotal:{type:Function,default:function(t){return"总共".concat(t,"条")}},showQuickJumper:{type:Boolean,default:!0},showSizeChanger:{type:Boolean,default:!0},hideOnSinglePage:{type:Boolean,default:!1},showLessItems:{type:Boolean,default:!1},size:{type:String,default:"default"},rootData:{type:Object,default:function(){}},rowSelection:{type:Object,default:function(){return null}}},data:function(){return{page:1,pageSize:10}},mounted:function(){this.fixedHeight(),this.updateData(),this.addIndex(),this.beautyScroller&&this.beautyScroll(),this.showOuterBorder&&this.setOutBorder(),this.page=this.initPage,this.pageSize=this.initPageSize},watch:{initPage:function(t){this.page!==t&&(this.page=t,this.updateData())},initPageSize:function(t){this.pageSize!==t&&(this.pageSize=t,this.updateData())},columns:function(){this.addIndex()},total:function(){this.fixedHeight()},tableHeight:function(){this.fixedHeight()}},methods:{addIndex:function(){this.showIndex&&this.columns.length>0&&"序号"!==this.columns[0].title&&this.columns.unshift({title:"序号",scopedSlots:{customRender:"number"},width:80})},fixedHeight:function(){var t=this,e=this.$refs.table.$el;this.total>0?this.modifyStyleByClass(e,"ant-table-body",{"min-height":"".concat(this.tableHeight,"px"),"max-height":"".concat(this.tableHeight,"px")}):(this.modifyStyleByClass(e,"ant-table-body",{"min-height":"0px","max-height":"".concat(this.tableHeight,"px")}),this.$nextTick((function(){t.modifyStyleByClass(e,"ant-table-placeholder",{"min-height":"".concat(t.tableHeight,"px"),"max-height":"".concat(t.tableHeight,"px")})})))},setOutBorder:function(){var t;null===(t=this.$refs.table.$el.classList)||void 0===t||t.add("ant-card-bordered")},beautyScroll:function(){var t=this.$refs.table.$el.querySelector(".ant-table-hide-scrollbar");t&&(t.classList.add("beauty-scroll"),t.style["margin-bottom"]="",t.style["padding-bottom"]="",t.style["min-width"]="");var e=this.$refs.table.$el.querySelector(".ant-table-body");null===e||void 0===e||e.classList.add("beauty-scroll")},onPageChange:function(t,e){this.page=t,this.pageSize=e,this.updateData()},onShowSizeChange:function(t,e){this.page=1,this.pageSize=e,this.updateData()},updateData:function(){this.$emit("change",{page:this.page,pageSize:this.pageSize,rootData:this.rootData})}}},s=o,d=(a("156c"),a("2877")),u=Object(d["a"])(s,n,i,!1,null,"eb2634aa",null);e["a"]=u.exports},1512:function(t,e,a){"use strict";a("60d5")},"156c":function(t,e,a){"use strict";a("1bbf")},"1bbf":function(t,e,a){},"60d5":function(t,e,a){},c520:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"title"},[t._v("查询条件")]),a("div",{ref:"search",staticClass:"content"},[a("span",[t._v("关键字")]),a("span",{staticClass:"inner"},[a("a-input",{staticClass:"i-width",attrs:{maxLength:64,placeholder:"请输入关键字"},on:{pressEnter:t.clickSearch},model:{value:t.search.search,callback:function(e){t.$set(t.search,"search",e)},expression:"search.search"}})],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){return t.clickSearch(1)}}},[t._v("查询")])],1),a("span",{staticClass:"outer"},[a("a-button",{staticClass:"button",on:{click:t.resetSearch}},[t._v("重置")])],1)])]),a("div",{staticClass:"body"},[a("div",{staticClass:"buttons"},[[t.readOnly?t._e():a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.createConfig}},[t._v("新建")]),a("a-button",{attrs:{type:"primary",icon:"sync"},on:{click:function(e){return t.clickSearch(1)}}},[t._v("刷新")])]],2),a("div",{staticClass:"title"},[t._v("查询结果")]),a("a-row",{staticClass:"table"},[a("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[a("b-fixed-table",{attrs:{columns:t.columns,rowKey:"id",data:t.table.data,total:t.table.total,"row-selection":t.rowSelection,"table-height":550,loading:t.loading,"init-page":t.page,size:"default"},on:{change:t.tableParamChanged},scopedSlots:t._u([{key:"mode",fn:function(e){var n=e.record;return[a("span",[t._v(t._s(t._f("convertTimeConfigType")(n.mode)))])]}},{key:"direction",fn:function(e){var n=e.record;return[a("span",[t._v(t._s(t._f("convertInsulateChannelDirection")(n.direction)))])]}},{key:"deleting",fn:function(e){var n=e.record;return[0==n.deleting?a("span",{staticStyle:{color:"#47b596"}},[t._v("正常")]):a("span",{staticClass:"oper red"},[t._v("删除中")])]}},{key:"operations",fn:function(e){var n=e.record;return[a("span",[a("span",{staticClass:"oper",on:{click:function(e){return t.viewConfig(n)}}},[t._v("查看详情")])]),t.readOnly?t._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper",on:{click:function(e){return t.modifyConfig(n)}}},[t._v("修改")])]),t.readOnly?t._e():a("span",{staticClass:"oper-margin"},[a("span",{staticClass:"oper red",on:{click:function(e){return t.deleteConfig(n.id)}}},[t._v("删除")])])]}}])})],1)],1)],1)])],1)},i=[],r=a("5530"),o=a("2f62"),s=a("c2f2"),d=a("0618"),u=a("8cff"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.form.init.show?a("div",[a("a-modal",{attrs:{closable:!0,title:t.form.init.title,width:t.form.init.width,"mask-closable":!1,footer:"view"===t.form.name?null:void 0},model:{value:t.form.init.show,callback:function(e){t.$set(t.form.init,"show",e)},expression:"form.init.show"}},["delete"===t.form.name?a("div",[t._v("确定删除？")]):a("a-form-model",{ref:"form",attrs:{model:t.form.init.data,rules:t.form.init.rules,"label-col":{span:t.form.init.labelSpan||6},"wrapper-col":{span:t.form.init.wrapperSpan||18}}},[void 0!==t.form.init.data.name?a("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[a("a-input",{attrs:{placeholder:"请输入名称",disabled:"create"!==t.form.name,maxLength:20},model:{value:t.form.init.data.name,callback:function(e){t.$set(t.form.init.data,"name",e)},expression:"form.init.data.name"}})],1):t._e(),void 0!==t.form.init.data.mode?a("a-form-model-item",{attrs:{label:"类型",prop:"mode"}},[a("a-select",{attrs:{disabled:"view"==t.form.name},on:{change:t.changeMode},model:{value:t.form.init.data.mode,callback:function(e){t.$set(t.form.init.data,"mode",e)},expression:"form.init.data.mode"}},[a("a-select-option",{attrs:{value:""}},[t._v("请选择类型")]),t._l(t.modeList1,(function(e,n){return[t.modeList.includes(e.value)?a("a-select-option",{key:n,attrs:{value:e.value}},[t._v(t._s(e.name))]):t._e()]}))],2)],1):t._e(),3==t.form.init.data.mode?a("a-form-model-item",{attrs:{label:"周期类型",prop:"type",rules:t.select}},[a("a-select",{attrs:{disabled:"view"==t.form.name},on:{change:t.changeType},model:{value:t.form.init.data.type,callback:function(e){t.$set(t.form.init.data,"type",e)},expression:"form.init.data.type"}},[a("a-select-option",{attrs:{value:1}},[t._v("每天")]),a("a-select-option",{attrs:{value:2}},[t._v("每周")]),a("a-select-option",{attrs:{value:3}},[t._v("每月")])],1)],1):t._e(),2==t.form.init.data.mode?a("a-form-model-item",{attrs:{label:"超时(分)",prop:"timeout",rules:t.format1}},[a("a-input",{staticClass:"dialog-input-height",staticStyle:{width:"100%"},attrs:{maxLength:10,disabled:"view"==t.form.name},model:{value:t.form.init.data.timeout,callback:function(e){t.$set(t.form.init.data,"timeout",e)},expression:"form.init.data.timeout"}})],1):t._e(),1==t.form.init.data.mode?a("a-form-model-item",{attrs:{label:"日期范围",prop:"dateRange"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{disabled:"view"==t.form.name,format:"YYYY-MM-DD",placeholder:["开始日期","结束日期"]},model:{value:t.form.init.data.dateRange,callback:function(e){t.$set(t.form.init.data,"dateRange",e)},expression:"form.init.data.dateRange"}})],1):t._e(),3==t.form.init.data.mode?a("a-form-model-item",{attrs:{label:"周期间隔/ms",prop:"timeout",rules:t.format}},[a("a-input",{staticClass:"dialog-input-height",staticStyle:{width:"100%"},attrs:{maxLength:10,disabled:"view"==t.form.name},model:{value:t.form.init.data.timeout,callback:function(e){t.$set(t.form.init.data,"timeout",e)},expression:"form.init.data.timeout"}})],1):t._e(),1===t.form.init.data.mode||3===t.form.init.data.mode&&2===t.form.init.data.type?a("a-form-model-item",{attrs:{label:"指定星期",prop:"weekdays",rules:3===t.form.init.data.mode&&2===t.form.init.data.type?t.select:null}},[a("a-checkbox-group",{model:{value:t.form.init.data.weekdays,callback:function(e){t.$set(t.form.init.data,"weekdays",e)},expression:"form.init.data.weekdays"}},[a("a-row",{attrs:{gutter:[0,10]}},[a("a-col",{attrs:{span:6}},[a("a-checkbox",{attrs:{disabled:"view"==t.form.name,value:1}},[t._v("星期一")])],1),a("a-col",{attrs:{span:6}},[a("a-checkbox",{attrs:{disabled:"view"==t.form.name,value:2}},[t._v("星期二")])],1),a("a-col",{attrs:{span:6}},[a("a-checkbox",{attrs:{disabled:"view"==t.form.name,value:3}},[t._v("星期三")])],1),a("a-col",{attrs:{span:6}},[a("a-checkbox",{attrs:{disabled:"view"==t.form.name,value:4}},[t._v("星期四")])],1),a("a-col",{attrs:{span:6}},[a("a-checkbox",{attrs:{disabled:"view"==t.form.name,value:5}},[t._v("星期五")])],1),a("a-col",{attrs:{span:6}},[a("a-checkbox",{attrs:{disabled:"view"==t.form.name,value:6}},[t._v("星期六")])],1),a("a-col",{attrs:{span:6}},[a("a-checkbox",{attrs:{disabled:"view"==t.form.name,value:7}},[t._v("星期天")])],1)],1)],1)],1):t._e(),3===t.form.init.data.mode&&3===t.form.init.data.type?a("a-form-model-item",{attrs:{label:"指定日期",prop:"weekdays",rules:t.select}},[a("a-select",{attrs:{mode:"multiple",maxTagCount:2},model:{value:t.form.init.data.weekdays,callback:function(e){t.$set(t.form.init.data,"weekdays",e)},expression:"form.init.data.weekdays"}},t._l(t.monthdaysList,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value,disabled:"view"==t.form.name}},[t._v(t._s(e.name))])})),1)],1):t._e(),1==t.form.init.data.mode||3==t.form.init.data.mode?a("a-form-model-item",{attrs:{label:"开始时间",prop:"gmtStart2"}},[a("a-time-picker",{staticStyle:{width:"100%"},attrs:{open:t.openTime,disabled:"view"==t.form.name,format:"HH:mm:ss",locale:t.localeTime,disabledHours:t.getDisabledHours1,disabledMinutes:t.getDisabledMinutes1,disabledSeconds:t.getDisabledSeconds1},on:{"update:open":function(e){t.openTime=e}},model:{value:t.form.init.data.gmtStart2,callback:function(e){t.$set(t.form.init.data,"gmtStart2",e)},expression:"form.init.data.gmtStart2"}},[a("a-button",{attrs:{slot:"addon",size:"small",type:"primary"},on:{click:t.handleClose},slot:"addon"},[t._v("确定")])],1)],1):t._e(),1===t.form.init.data.mode||3==t.form.init.data.mode?a("a-form-model-item",{attrs:{label:"结束时间",prop:"gmtEnd2",rules:1===t.form.init.data.mode?t.select:null}},[a("a-time-picker",{staticStyle:{width:"100%"},attrs:{open:t.openTime2,disabled:"view"==t.form.name,format:"HH:mm:ss",locale:t.localeTime,disabledHours:t.getDisabledHours,disabledMinutes:t.getDisabledMinutes,disabledSeconds:t.getDisabledSeconds},on:{"update:open":function(e){t.openTime2=e}},model:{value:t.form.init.data.gmtEnd2,callback:function(e){t.$set(t.form.init.data,"gmtEnd2",e)},expression:"form.init.data.gmtEnd2"}},[a("a-button",{attrs:{slot:"addon",size:"small",type:"primary"},on:{click:t.handleClose},slot:"addon"},[t._v("确定")])],1)],1):t._e()],1),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary",loading:t.form.init.confirmLoading},on:{click:function(e){return t.clickSave()}}},[t._v(t._s("create"===t.form.name||"modify"===t.form.name?"保存":"确定"))]),a("a-button",{on:{click:function(e){return t.clickCancel()}}},[t._v("取消")])],1)],2)],1):t._e()},c=[],m=(a("ac1f"),a("00b4"),a("b0c0"),a("d81d"),a("25eb"),a("a9e3"),a("1276"),a("d3b7"),a("25f0"),a("a00a")),f=a("1da1"),p=(a("96cf"),a("99af"),a("b775"));function h(t,e,a){return g.apply(this,arguments)}function g(){return g=Object(f["a"])(regeneratorRuntime.mark((function t(e,a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p["f"])("time-config/configs?offset=".concat((e-1)*a,"&limit=").concat(a).concat(n||""),p["a"].GET));case 1:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function v(t){return b.apply(this,arguments)}function b(){return b=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p["f"])("time-config/config",p["a"].POST,e));case 1:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function y(t){return S.apply(this,arguments)}function S(){return S=Object(f["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.id,t.abrupt("return",Object(p["f"])("time-config/config/".concat(a),p["a"].DELETE));case 2:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function w(t){return k.apply(this,arguments)}function k(){return k=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p["f"])("time-config/config",p["a"].PUT,e));case 1:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}var x=a("d7b0"),_=a("40a7"),T=a("87b8"),C=a("c1df"),E=a.n(C),O={name:"TimeDialog",components:{},mixins:[s["a"]],comments:{},filters:{},props:{},data:function(){var t=[{message:"请输入",trigger:"blur",required:!0},{message:"请输入整数，取值范围为[1-10080]",trigger:"blur",validator:function(t,e,a){var n=!1,i=function(t){return/^\d{1,5}$/.test(t)||(n=!0),n||(t=+t,(t<1||t>10080)&&(n=!0)),n};i(e),n?a(!0):a()}}];return{format:m["a"].format11,format1:t,locale:_["a"],localeTime:T["a"],select:m["a"].select,openTime:!1,openTime2:!1,monthdaysList:[{value:1,name:"1号"},{value:2,name:"2号"},{value:3,name:"3号"},{value:4,name:"4号"},{value:5,name:"5号"},{value:6,name:"6号"},{value:7,name:"7号"},{value:8,name:"8号"},{value:9,name:"9号"},{value:10,name:"10号"},{value:11,name:"11号"},{value:12,name:"12号"},{value:13,name:"13号"},{value:14,name:"14号"},{value:15,name:"15号"},{value:16,name:"16号"},{value:17,name:"17号"},{value:18,name:"18号"},{value:19,name:"19号"},{value:20,name:"20号"},{value:21,name:"21号"},{value:22,name:"22号"},{value:23,name:"23号"},{value:24,name:"24号"},{value:25,name:"25号"},{value:26,name:"26号"},{value:27,name:"27号"},{value:28,name:"28号"},{value:29,name:"29号"},{value:30,name:"30号"},{value:31,name:"31号"}],modeList:[],modeList1:[{value:1,name:"时间模式"},{value:2,name:"超时模式"},{value:3,name:"周期模式"}],form:{create:{title:"新建",width:450,request:v,show:!0,confirmLoading:!1,data:{id:"",name:"",mode:"",type:"",gmtStart:"",gmtStart2:"",gmtEnd:"",gmtEnd2:"",dateStart:"",dateEnd:"",dateRange:[],timeout:60,weekdays:[]},rules:{name:m["a"].name,mode:m["a"].select,gmtStart2:m["a"].select}},modify:{title:"修改",width:450,request:w,show:!0,confirmLoading:!1,data:{id:"",name:"",mode:"",type:"",gmtStart:"",gmtStart2:"",gmtEnd:"",gmtEnd2:"",dateStart:"",dateEnd:"",dateRange:[],timeout:"",weekdays:[]},rules:{mode:m["a"].select,gmtStart2:m["a"].select}},view:{title:"查看详情",width:450,request:"",show:!0,confirmLoading:!1,data:{id:"",name:"",mode:"",type:"",gmtStart:"",gmtStart2:"",gmtEnd:"",gmtEnd2:"",dateStart:"",dateEnd:"",dateRange:[],timeout:60,weekdays:[]},rules:{}},delete:{title:"删除",width:420,request:y,show:!0,confirmLoading:!1,data:{id:""},rules:{}}}}},created:function(){var t=this;"create"!=this.state&&"modify"!=this.state&&"view"!=this.state||Object(x["k"])().then((function(e){t.modeList=e.data.map((function(t){return Number.parseInt(t)}))})),this.showDialog(this.state,this.params)},methods:{moment:E.a,changeTime:function(t,e,a){"startTime"===a?this.startTime=e:this.endTime=e},getDisabledHours1:function(){for(var t=[],e=this.convertSecToHHmmss(this.form.init.data.gmtEnd2),a=e.split(":"),n=23;Number.parseInt(a[0])<n;n--)t.push(n);return t},getDisabledMinutes1:function(t){var e=this.convertSecToHHmmss(this.form.init.data.gmtEnd2),a=e.split(":"),n=[];if(t==Number.parseInt(a[0]))for(var i=59;Number.parseInt(a[1])<i;i--)n.push(i);return n},getDisabledSeconds1:function(t,e){var a=this.convertSecToHHmmss(this.form.init.data.gmtEnd2),n=a.split(":"),i=[];if(t==Number.parseInt(n[0])&&e==Number.parseInt(n[1]))for(var r=59;Number.parseInt(n[2])<=r;r--)i.push(r);return i},getDisabledHours:function(){for(var t=[],e=this.convertSecToHHmmss(this.form.init.data.gmtStart2),a=e.split(":"),n=0;n<Number.parseInt(a[0]);n++)t.push(n);return t},getDisabledMinutes:function(t){var e=this.convertSecToHHmmss(this.form.init.data.gmtStart2),a=e.split(":"),n=[];if(t==Number.parseInt(a[0]))for(var i=0;i<Number.parseInt(a[1]);i++)n.push(i);return n},getDisabledSeconds:function(t,e){var a=this.convertSecToHHmmss(this.form.init.data.gmtStart2),n=a.split(":"),i=[];if(t==Number.parseInt(n[0])&&e==Number.parseInt(n[1]))for(var r=0;r<=Number.parseInt(n[2]);r++)i.push(r);return i},beforeShowDialog:function(t,e){"modify"!==t&&"view"!==t||(1===this.form.init.data.mode?(e.data.gmtStart2=E()(this.params.gmtStart),this.startTime=this.timestampToTime(this.params.gmtStart),e.data.gmtEnd2=E()(this.params.gmtEnd),e.data.weekdays=this.toWeekDayArray(this.params.weekdays)):3===this.form.init.data.mode&&(e.data.gmtStart2=E()(this.params.gmtStart),this.startTime=this.timestampToTime(this.params.gmtStart),this.params.gmtEnd&&(e.data.gmtEnd2=E()(this.params.gmtEnd)),e.data.weekdays=this.toWeekDayArray(this.params.weekdays)))},toWeekDayArray:function(t){var e=t.split(",");return!t||t&&t.length<1?[]:e.map((function(t){return+t}))},handleClose:function(){this.openTime=!1,this.openTime2=!1},timestampToTime:function(t){var e=new Date(t),a=e.getHours()+":",n=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",i=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return a+n+i},beforeSave:function(t){if("modify"===this.form.name||"create"===this.form.name){if(2===this.form.init.data.mode&&""!=t.timeout&&null!=t.timeout&&void 0!=t.timeout&&(t.timeout>10080||t.timeout<1))return this.$message.error("超时范围[1-10080]"),1;if(3===this.form.init.data.mode&&""!=t.timeout&&null!=t.timeout&&void 0!=t.timeout&&(t.timeout>864e5||t.timeout<200))return this.$message.error("周期间隔范围[200-86400000]"),1}if("modify"===this.form.name){if(1===this.form.init.data.mode){if(t.gmtStart=t.gmtStart2.valueOf(),t.gmtEnd=t.gmtEnd2.valueOf(),t.gmtStart>t.gmtEnd)return this.$message.error("开始时间不能大于结束时间"),1;t.weekdays=t.weekdays.toString()}else if(3===this.form.init.data.mode){if(t.gmtStart=t.gmtStart2.valueOf(),t.gmtEnd2){if(t.gmtEnd=t.gmtEnd2.valueOf(),t.gmtStart>t.gmtEnd)return this.$message.error("开始时间不能大于结束时间"),1}else t.gmtEnd="";t.weekdays=t.weekdays.toString()}else delete t["weekdays"],delete t["endTime"],delete t["startTime"];delete t["endTime2"],delete t["startTime2"]}if("create"===this.form.name){if(1===this.form.init.data.mode)t.gmtStart=t.gmtStart2.valueOf(),t.gmtEnd=t.gmtEnd2.valueOf(),t.weekdays=t.weekdays.toString();else if(3===this.form.init.data.mode){if(t.gmtStart=t.gmtStart2.valueOf(),t.gmtEnd2&&(t.gmtEnd=t.gmtEnd2.valueOf(),t.gmtStart>t.gmtEnd))return this.$message.error("开始时间不能大于结束时间"),1;t.weekdays=t.weekdays.toString()}else delete t["weekdays"],delete t["endTime"],delete t["startTime"];delete t["endTime2"],delete t["startTime2"]}},close:function(){this.form.init.show=!1},update:function(){this.parent.update()},changeMode:function(t){if(this.form.init.data.dateRange=[],this.form.init.data.type="",1==t||3==t){this.form.init.data.timeout="";var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),this.form.init.data.gmtStart2=E()(e.valueOf());var a=new Date;a.setHours(23),a.setMinutes(59),a.setSeconds(59),this.form.init.data.gmtEnd2=E()(a.valueOf())}else 2==t&&(this.form.init.data.timeout=60,this.form.init.data.gmtStart2="",this.form.init.data.gmtEnd2="");3==t&&(this.form.init.data.timeout=200,this.form.init.data.type=1),this.form.init.data.weekdays=[],this.$refs["form"].clearValidate()},changeType:function(){this.form.init.data.timeout="";var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),this.form.init.data.gmtStart2=E()(t.valueOf());var e=new Date;e.setHours(23),e.setMinutes(59),e.setSeconds(59),this.form.init.data.gmtEnd2=E()(e.valueOf()),this.form.init.data.timeout=200,this.form.init.data.weekdays=[],this.$refs["form"].clearValidate()},convertSecToHHmmss:function(t){return E()(t).format("HH:mm:ss")}},watch:{"form.init.data.dateRange":function(t){Array.isArray(t)&&t[0]&&t[1]?(this.form.init.data.dateStart=t[0].valueOf(),this.form.init.data.dateEnd=t[1].valueOf()):(this.form.init.data.dateStart="",this.form.init.data.dateEnd="")},"form.init.data.dateStart":function(t){t&&this.form.init.data.dateEnd&&(this.form.init.data.dateRange=[this.form.init.data.dateStart?E()(this.form.init.data.dateStart):null,this.form.init.data.dateEnd?E()(this.form.init.data.dateEnd):null])},"form.init.data.dateEnd":function(t){t&&this.form.init.data.dateStart&&(this.form.init.data.dateRange=[this.form.init.data.dateStart?E()(this.form.init.data.dateStart):null,this.form.init.data.dateEnd?E()(this.form.init.data.dateEnd):null])}}},D=O,H=a("2877"),R=Object(H["a"])(D,l,c,!1,null,"227afc0a",null),$=R.exports,z=new u["a"]($),I=a("d9f9"),L=[{title:"名称",dataIndex:"name"},{title:"类型",ellipsis:!0,scopedSlots:{customRender:"mode"}},{title:"操作",scopedSlots:{customRender:"operations"}}],B={name:"timeStrategy",components:{BFixedTable:d["a"]},mixins:[s["a"]],comments:{},props:{},data:function(){return{readOnly:!1,deviceList:[],execResult:[],execInterval:null,dialog:z,columns:L,tableList:h,loading:!1,table:{data:[],total:0}}},filters:{convertTimeConfigType:I["D"],convertInsulateChannelDirection:I["p"]},created:function(){this.readOnly=JSON.parse(localStorage.getItem("time-config"))||!1},watch:{$route:function(t,e){var a=this;e.path!==t.path&&this.$nextTick((function(){a.dialog&&a.dialog.close()}))}},computed:Object(r["a"])({},Object(o["b"])("account",["user"])),mounted:function(){},methods:{createConfig:function(){this.dialog.open({state:"create",parent:this})},viewConfig:function(t){this.dialog.open({state:"view",parent:this,params:t})},modifyConfig:function(t){var e=this;e.$confirm({content:"如当前策略已与已下发的服务关联，保存后将自动下发，确定修改？",okText:"确认",cancelText:"取消",onOk:function(){e.dialog.open({state:"modify",parent:e,params:t})},onCancel:function(){}})},deleteConfig:function(t){this.dialog.open({state:"delete",parent:this,params:{id:t}})},update:function(t,e){var a=this;this.operations={selectedRowKeys:[],page:1,selectedRows:[],state:!0,loading:!1},this.page=t||this.page,this.pageSize=e||this.pageSize,this.loading=!0,this.tableList(this.page,this.pageSize,this.searchParams).then((function(t){var e=t.data;e&&(a.table.total=e.total,a.table.data=e.rows,a.loading=!1)})).catch((function(){a.loading=!1}))},beforeClickSearch:function(){this.table.data=[],this.table.total=0},afterClearSearchParams:function(){this.beforeClickSearch()}},destroyed:function(){},beforeDestroy:function(){this.dialog&&this.dialog.close()}},A=B,M=(a("1512"),Object(H["a"])(A,n,i,!1,null,"9ec049a6",null));e["default"]=M.exports},d9f9:function(t,e,a){"use strict";a.d(e,"w",(function(){return r})),a.d(e,"H",(function(){return o})),a.d(e,"I",(function(){return s})),a.d(e,"h",(function(){return d})),a.d(e,"B",(function(){return u})),a.d(e,"J",(function(){return l})),a.d(e,"l",(function(){return m})),a.d(e,"m",(function(){return p})),a.d(e,"a",(function(){return g})),a.d(e,"r",(function(){return v})),a.d(e,"G",(function(){return b})),a.d(e,"x",(function(){return y})),a.d(e,"s",(function(){return S})),a.d(e,"o",(function(){return w})),a.d(e,"C",(function(){return k})),a.d(e,"t",(function(){return x})),a.d(e,"F",(function(){return _})),a.d(e,"n",(function(){return T})),a.d(e,"i",(function(){return C})),a.d(e,"q",(function(){return O})),a.d(e,"y",(function(){return D})),a.d(e,"z",(function(){return H})),a.d(e,"D",(function(){return R})),a.d(e,"A",(function(){return $})),a.d(e,"g",(function(){return z})),a.d(e,"p",(function(){return L})),a.d(e,"j",(function(){return B})),a.d(e,"u",(function(){return N})),a.d(e,"E",(function(){return P})),a.d(e,"c",(function(){return q})),a.d(e,"b",(function(){return W})),a.d(e,"d",(function(){return Y})),a.d(e,"e",(function(){return J})),a.d(e,"v",(function(){return F})),a.d(e,"k",(function(){return K})),a.d(e,"f",(function(){return U}));a("99af"),a("d81d"),a("ac1f"),a("1276"),a("b680"),a("a9e3");var n=a("c1df"),i=a.n(n);function r(t){var e={1:"正常",2:"异常",3:"离线",4:"异常及离线"};return e[t]||"未知"}function o(t){var e={"-1":"未下发",1:"已下发",2:"未生效",3:"已生效",4:"已移除",5:"下发审批中",6:"下发审批不通过",7:"下发审批通过",8:"移除审批中",9:"移除审批不通过",10:"移除审批通过",11:"下发失败",12:"移除失败",13:"未审批",14:"申请下发撤回",15:"申请移除撤回"};return e[t]||"-"}function s(t){var e={true:"启用",false:"禁用"};return e[t]||"-"}function d(t){var e={1:"BASE64"};return e[t]||""}function u(t){var e={1:"浏览安全策略",2:"文件传输策略",3:"邮件策略",4:"定制应用策略",5:"内容审查策略",6:"流量控制策略",7:"网络安全策略",8:"域间标记策略",9:"SQL审查策略",10:"RTSP过滤",11:"SIP过滤",12:"应用安全标记",13:"文件名称过滤",14:"文件后缀名过滤",15:"文件类型过滤",16:"虚拟桌面协议过滤策略"};return e[t]||"-"}function l(t){var e={1:"#faa351",3:"#47b596",2:"#f05252"};return'<span style="color: '.concat(e[t]||"#000",';">').concat(o(t),"</span>")}function c(t){var e={false:"否",true:"是"};return e[t]||"-"}function m(t){var e={true:"#12a130",false:"#d42d33"};return'<span style="color: '.concat(e[t]||"#000",';cursor: pointer;">').concat(c(t),"</span>")}function f(t){var e={false:"禁用",true:"启用"};return e[t]||"-"}function p(t){var e={true:"#12a130",false:"#d42d33"};return'<span style="color: '.concat(e[t]||"#000",';cursor: pointer;">').concat(f(t),"</span>")}function h(t){var e={false:"未开启",true:"已开启"};return e[t]||"未开启"}function g(t){var e={true:"#12a130",false:"#d42d33"};return'<span style="color: '.concat(e[t]||"#d42d33",';cursor: pointer;">').concat(h(t),"</span>")}function v(t){var e={1:"限速",2:"限容"};return e[t]||"-"}function b(t){var e={2:"独享模式",1:"共享模式"};return e[t]||"-"}function y(t){var e={1:"信息级",2:"低危级",3:"中危级",4:"高危级",5:"严重级"};return e[t]||"-"}function S(t){var e={1:"转换",2:"透传",3:"去标"};return e[t]||"-"}function w(t){var e={1:"正在执行",2:"执行结束",3:"执行错误",4:"取消执行"};return e[t]||"-"}function k(t,e){return e=e||"YYYY-MM-DD HH:mm:ss",t?i()(t).format(e):"-"}function x(t){var e={1:"type1",2:"type2",3:"type3",4:"type4",5:"type5",6:"type6",7:"type7"};return e[t]||"-"}function _(t){var e={1:"机密性",2:"完整性"};return e[t]||"-"}function T(t){var e={1:"允许",2:"阻断"};return e[t]||"-"}function C(t){var e="";return t=t||[],t.map((function(a,n){e+=a+(t[n+1]?"; ":"")})),e}function E(t){var e={1:"UP",2:"DOWN"};return e[t]||"DOWN"}function O(t){var e={1:"#47b596"};return'<span style="color: '.concat(e[t]||"#f05252",';">').concat(E(t),"</span>")}function D(t){var e={true:"启用",false:"禁用"};return e[t]||"-"}function H(t){var e={true:"#12a130",false:"#d42d33"};return'<span style="color: '.concat(e[t]||"#000",';">').concat(D(t),"</span>")}function R(t){var e={1:"时间模式",2:"超时模式",3:"周期模式"};return e[t]||"-"}function $(t){var e={1:"URI",2:"邮件地址",3:"内容关键字",4:"邮件主题关键字"};return e[t]||"-"}function z(t){var e=t?t.split(","):[],a=[];return e&&e[0]&&e.map((function(t){a.push(I(t))})),M(a)}function I(t){var e={main:"主通道",display:"显示通道",inputs:"输入通道",cursor:"光标通道",playback:"播放通道",record:"录音通道",tunnel:"隧道通道",smartcard:"SMARTCARD通道",usbredir:"USB通道",port:"PORT通道",webdav:"WEBDAV通道"};return e[t]||"-"}function L(t){var e={1:"A->B",2:"B->A"};return e[t]||"-"}function B(t){var e={1:"数据业务",2:"管理业务"};return e[t]||"-"}function A(t){var e={1:"忽略大小写",2:"包含换行符",3:"多行锚定",4:"仅匹配模式",5:"逻辑组合"};return e[t]||"-"}function M(t){var e="";return t.map((function(a,n){e+=a+(t[n+1]?";":"")})),e}function N(t){var e=t?t.split(";"):[],a=[];return e&&e[0]&&e.map((function(t){a.push(A(t))})),M(a)}function P(t){var e=t?t.split(","):[],a=[];return e&&e[0]&&e.map((function(t){a.push(j(t))})),M(a)}function j(t){var e={Insert:"插入",Update:"更新",Delete:"删除"};return e[t]||"-"}function q(t){var e={1:"管控登录告警",2:"域间标记告警",3:"网络访问控制告警",4:"应用安全告警",5:"设备离线告警",6:"设备异常告警",7:"日志容量告警",8:"设备状态告警",9:"入侵检测告警",10:"认证告警",11:"基线核查告警",12:"文件过滤告警",13:"IP/MAC绑定告警",14:"DDoS攻击防护告警",15:"病毒防护告警",16:"WAF告警",17:"关键字过滤告警",18:"自定义协议检查告警",19:"虚拟桌面协议过滤告警",20:"数据加解密告警"};return e[t]||"-"}function W(t){var e={1:"全部",2:"邮件"};return e[t]||"-"}function Y(t){var e=t?t.split(";"):[],a=[];return e&&e[0]&&e.map((function(t){a.push(y(Number(t)))})),M(a)}function J(t){var e={1:"登录异常",2:"流量异常",3:"标记拒绝",4:"ACL命中",5:"网页访问拒绝",6:"文件传输拒绝",7:"邮件传输拒绝",8:"定制策略拒绝",9:"DDoS攻击防御",10:"CC攻击防御",11:"WAF防御"};return e[t]||"-"}function F(t){var e={1:"已通知",2:"未通知"};return e[t]||"-"}function K(t){var e={1:"已处理",2:"处理中",3:"未处理"};return e[t]||"-"}function U(t){var e={0:"轮询均衡模式",1:"主备模式",2:"HASH均衡模式",3:"广播模式",4:"动态链接模式",5:"发送负载均衡模式",6:"收发负载均衡模式"};return e[t]||"-"}}}]);