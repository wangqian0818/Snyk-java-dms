(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-669918db"],{"0055":function(e,t,a){},"17d3":function(e,t,a){},"1f35":function(e,t,a){"use strict";a("17d3")},"3cd2":function(e,t,a){},7387:function(e,t,a){e.exports=a.p+"static/img/login.png"},7527:function(e,t,a){"use strict";a("b62c")},"80c1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"bs-app"}},[a("div",{ref:"content",staticStyle:{"z-index":"999"},attrs:{id:"bs-container"}},[a("common-layout",{staticStyle:{width:"100%",height:"100%"}},[a("div",{staticClass:"login-bg"},[a("div",{staticClass:"login"},[a("div",{staticClass:"top"},[a("div",{staticClass:"header tc"},[a("svg",{attrs:{width:"450",height:"80"}},[a("defs",[a("linearGradient",{attrs:{id:"g34",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}},[a("stop",{attrs:{offset:"0%","stop-color":"#bbf9f8"}}),a("stop",{attrs:{offset:"50%","stop-color":"#8aebf1"}}),a("stop",{attrs:{offset:"51%","stop-color":"#57d9ee"}}),a("stop",{attrs:{offset:"100%","stop-color":"#288da2"}})],1)],1),a("text",{staticClass:"tc",staticStyle:{"letter-spacing":"4px","text-anchor":"middle"},attrs:{"font-size":"30",x:"50%",y:"38",fill:"url(#g34)"}},[e._v(e._s(e.primaryName||"-"))]),""!=e.subName?a("text",{staticClass:"tc",staticStyle:{"letter-spacing":"4px","text-anchor":"middle"},attrs:{"font-size":"24",x:"50%",y:"70",fill:"url(#g34)"}},[e._v(e._s(e.subName))]):e._e()])])]),a("div",{staticStyle:{"text-align":"center",color:"#fff","font-size":"24px","margin-bottom":"20px"}},[e._v("用户登录")]),a("a-form",{attrs:{form:e.form}},[a("a-form-item",{staticClass:"b-input"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入账户名",whitespace:!0},{validator:e.validator}]}],expression:"['name', {rules: [{ required: true, message: '请输入账户名', whitespace: true}, {validator: validator}]}]"}],staticClass:"font-color l-input",attrs:{autocomplete:"off",size:"large",placeholder:"请输入用户名"}},[a("a-icon",{staticStyle:{"font-size":"20px",color:"#a8c3d3"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",{staticClass:"b-input"},[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码",whitespace:!0},{validator:e.validator}]}],expression:"['password', {rules: [{ required: true, message: '请输入密码', whitespace: true}, {validator: validator}]}]"}],staticClass:"l-input",attrs:{size:"large",placeholder:"请输入密码",autocomplete:"off",type:"password",visibilityToggle:!0}},[a("a-icon",{staticStyle:{"font-size":"20px",color:"#a8c3d3"},attrs:{slot:"prefix",type:"lock",theme:"filled"},slot:"prefix"})],1)],1),e.asyncRoutes?a("a-form-item",[a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("a-form-item",{staticClass:"c-input"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:e.$t("user.verification-code.required")}],validateTrigger:"blur"}],expression:"['code', {rules: [{ required: true, message: $t('user.verification-code.required') }], validateTrigger: 'blur'}]"}],staticClass:"l-input",attrs:{size:"large",type:"text",placeholder:e.$t("user.login.code.placeholder")},on:{focus:e.kaptchaFocused}},[a("a-icon",{staticStyle:{"font-size":"20px",color:"#a8c3d3"},attrs:{slot:"prefix",type:"safety-certificate"},slot:"prefix"})],1)],1)],1),a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("img",{staticClass:"kaptcha c-input",attrs:{id:"kaptcha",src:"",alt:e.$t("user.login.code.placeholder")},on:{click:e.getKaptcha}})])],1)],1):e._e(),a("a-form-item",[a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:24}},[a("a-button",{staticClass:"enter",staticStyle:{width:"100%"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"},on:{click:e.onSubmit}},[e._v("登录")])],1)],1)],1)],1)],1)])])],1)])},r=[],o=a("1da1"),i=a("5530"),n=(a("96cf"),a("caad"),a("2532"),a("ac1f"),a("1276"),a("d3b7"),a("99af"),a("159b"),a("b64b"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("00b4"),a("e9c4"),a("bc3a")),c=a.n(n),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-layout"},[a("div",{staticClass:"content"},[e._t("default")],2),e.footerLinks.length>0?a("page-footer",{attrs:{"link-list":e.footerLinks,copyright:e.copyright}}):e._e()],1)},d=[],u=a("613e"),f=a("2f62"),m={name:"CommonLayout",components:{PageFooter:u["a"]},computed:Object(i["a"])({},Object(f["d"])("setting",["footerLinks","copyright"]))},p=m,g=(a("7527"),a("2877")),h=Object(g["a"])(p,l,d,!1,null,"039e8f06",null),b=h.exports,v=a("93d6"),w=a("d7b0"),y=a("89a5"),x=a("1748"),k=a.n(x),C=a("a78e"),S=a.n(C),O=a("ba79");function $(e){var t=document.documentElement.clientWidth,a=document.documentElement.clientHeight,s=document.getElementById("bs-container");if(s){var r=s.style,o=t/1920,i=a/1080,n=o>i?i:o,c=document.getElementById("bs-app");c&&(c.style.height=a+"px",c.style.width=t*n<t?t+"px":"");var l="center";t<=1920&&(l="left",r.marginLeft="".concat((t-s.clientWidth*n)/2,"px")),r.transformOrigin="".concat(l," top"),r.transform="scale(".concat(n,")");var d=document.getElementsByTagName("body")[0];d.style.background=e?"url(".concat(e,") center center no-repeat"):"#051526",d.style.backgroundSize="cover"}}function _(){var e=document.getElementsByTagName("body")[0];e.style.background="",e.style.backgroundSize="",window.addEventListener("resize",$)}var L=a("9b10"),T={mixins:[L["a"]],data:function(){return{style:{input:!0}}},mounted:function(){var e=this.$refs.content;this.style.input&&this.modifyStyleByClass(e,"ant-input",{backgroundColor:"transparent",border:"none",color:"#EBF1FF"}),this.modifyStyleByClass(e,"ant-calendar-picker-icon",{color:"#2A78A9",right:"-1px"}),this.modifyStyleByClass(e,"ant-calendar-range-picker-separator",{color:"#EBF1FF"}),this.modifyStyleByClass(e,"ant-select-selection--single",{background:"transparent",border:"1px solid rgb(45, 110, 160)",borderRadius:0,height:"28px"}),this.modifyStyleByClass(e,"ant-select-selection-selected-value",{color:"#d9d9d9"})}},E=a("b775"),N=a("0829"),j=a("322e"),F=a("8cff"),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.form.init.show?a("div",[a("a-modal",{attrs:{closable:!0,title:e.form.init.title,width:420,"mask-closable":!1},model:{value:e.form.init.show,callback:function(t){e.$set(e.form.init,"show",t)},expression:"form.init.show"}},["unlogin"===e.form.name||"unlock"===e.form.name||"delete"===e.form.name?a("div",[e._v(" "+e._s(e.form.init.msg)+" ")]):a("a-form-model",{ref:"form",attrs:{model:e.form.init.data,rules:e.form.init.rules,"label-col":{span:6},"wrapper-col":{span:16}}},[void 0!==e.form.init.data.name?a("a-form-model-item",{attrs:{label:"用户名称",prop:"name"}},[a("a-input",{staticClass:"dialog-input-height",attrs:{placeholder:"请输入名称",maxLength:20,disabled:"create"!==e.form.name},model:{value:e.form.init.data.name,callback:function(t){e.$set(e.form.init.data,"name",t)},expression:"form.init.data.name"}})],1):e._e(),void 0!==e.form.init.data.password?a("a-form-model-item",{attrs:{label:"密码",prop:"password"}},[a("a-input-password",{staticClass:"dialog-input-height",attrs:{maxLength:50,placeholder:"请输入密码"},model:{value:e.form.init.data.password,callback:function(t){e.$set(e.form.init.data,"password",t)},expression:"form.init.data.password"}})],1):e._e(),void 0!==e.form.init.data.passwordConfirmed?a("a-form-model-item",{attrs:{label:"确认密码",prop:"passwordConfirmed"}},[a("a-input-password",{staticClass:"dialog-input-height",attrs:{maxLength:50,placeholder:"请输入确认密码"},model:{value:e.form.init.data.passwordConfirmed,callback:function(t){e.$set(e.form.init.data,"passwordConfirmed",t)},expression:"form.init.data.passwordConfirmed"}})],1):e._e()],1),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickSave1()}}},[e._v(e._s(e.okText||e.form.init.okText))]),a("a-button",{on:{click:function(t){return e.clickCancel()}}},[e._v(e._s(e.cancelText||e.form.init.cancelText))])],1)],2)],1):e._e()},z=[],I=(a("b0c0"),a("a00a")),q=a("c2f2"),P={name:"UserDialog",mixins:[q["a"]],data:function(){var e=this;function t(){var t="密码格式不对，输入必须包含";return Object.keys(e.rule).forEach((function(a){"upper"==a&&1==e.rule[a]?t+="大写字母、":"lower"==a&&1==e.rule[a]?t+="小写字母、":"number"==a&&1==e.rule[a]?t+="数字、":"special"==a&&1==e.rule[a]?t+="特殊字符、":"pwdLength"==a&&(t=t+"长度范围：["+e.rule.pwdLength+"]")})),t}var a=[{message:"请输入密码",trigger:"blur",required:!0},{message:"不能只输入空格",trigger:"blur",whitespace:!0},{message:t,trigger:"blur",validator:function(t,a,s){var r=e.regex;r.test(a)?s():s(new Error(t.message))}}],s=[a,{message:"请输入密码",trigger:"blur",required:!0},{message:"两次密码输入不一致",trigger:"blur",validator:function(t,a,s){e.form.init.data.password!==a?s(!0):s()}}];return{regex:"",rule:{},state:"",params:"",parent:"",okText:"",cancelText:"",form:{create:{title:"用户注册",request:v["e"],show:!0,okText:"确定",cancelText:"取消",msg:"",data:{id:"",name:"",password:"",passwordConfirmed:"",jspPassword:""},rules:{name:I["a"].name,password:a,passwordConfirmed:s}}}}},created:function(){var e=this,t=JSON.parse(localStorage.getItem("regex"));e.regex=new RegExp(t),e.rule=JSON.parse(localStorage.getItem("rules")),this.showDialog(e.state,e.params)},methods:{beforeShowDialog:function(){},clickSave1:function(){var e=this,t=JSON.parse(JSON.stringify(this.form.init.data));Object.prototype.hasOwnProperty.call(t,"password")&&(t.jspPassword=t.password,t.passwordConfirmed=k.a.sm3(t.passwordConfirmed),t.password=k.a.sm3(t.password)),Object(v["e"])(t).then((function(t){t&&(e.$message.success("注册成功"),e.close())}))},close:function(){this.form.init.show=!1},update:function(){var e=this;e.parent.update()}}},B=P,U=(a("92ee"),Object(g["a"])(B,R,z,!1,null,"15ac5b06",null)),D=U.exports,J=new F["a"](D),K=[{title:"用户名",dataIndex:"name"},{title:"姓名",dataIndex:"nickName"},{title:"操作",scopedSlots:{customRender:"operations"}}],A={name:"Login",components:{AFormItem:j["a"],AInputPassword:N["a"],CommonLayout:b},mixins:[T],i18n:{messages:{CN:{"user.login.code.placeholder":"验证码","user.verification-code.required":"请输入验证码"}}},data:function(){var e=this;return{visible:!1,isclick:!0,baseUrl:O["b"],file:"",formData:"",style:{input:!1},logging:!1,error:"",form:this.$form.createForm(this),errMsgs:{},validator:function(t,a,s){s(e.errMsgs[t.field])},kaptchaLastUpdateTime:new Date,tableColumns:K,onlineSubRoleList:[],dialog:J}},mounted:function(){this.getPwdRules(),$(a("7387")),window.addEventListener("resize",$),this.modifyStyleByTagName(this.$refs.content,"input",{color:"rgb(122 138 154)"}),Object(E["f"])(),this.getKaptcha()},destroyed:function(){_()},computed:Object(i["a"])({systemName:function(){return this.$store.state.setting.systemName},primaryName:function(){var e=this.$store.state.setting.systemName,t="";if(0!=e.length)if(e.includes("-",0)){var a=e.split("-");t=a[0]}else t=e;return t},subName:function(){var e=this.$store.state.setting.systemName,t="";if(0!=e.length&&e.includes("-",0)){var a=e.split("-");t=a[1]}return t}},Object(f["d"])("setting",["asyncRoutes"])),created:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(f["c"])("account",["setUser","setMenus"])),{},{getKaptcha:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e&&e.preventDefault(),a.prev=1,a.next=4,fetch("".concat(t.baseUrl,"kaptcha?_=").concat((new Date).getTime()),{method:"GET",headers:{"Content-Type":"application/json"}});case 4:if(s=a.sent,s.ok){a.next=7;break}throw new Error("网络响应不是 OK");case 7:return a.next=9,s.json();case 9:r=a.sent,document.getElementById("kaptcha").src="data:image/png;base64,".concat(r.data),t.kaptchaLastUpdateTime=new Date,a.next=16;break;case 14:a.prev=14,a.t0=a["catch"](1);case 16:case"end":return a.stop()}}),a,null,[[1,14]])})))()},kaptchaFocused:function(e){var t=new Date;t-this.kaptchaLastUpdateTime>58e3&&this.getKaptcha(e)},onSubmit:function(e){var t=this,a=this;e.preventDefault(),a.isclick&&(a.isclick=!1,a.form.validateFields((function(e){if(!e){a.logging=!0;var s=a.form.getFieldValue("name"),r=a.form.getFieldValue("password"),o=a.form.getFieldValue("code")||"",i={name:s,password:k.a.sm3(r),code:o},n=new FormData;a.file&&n.append("file",a.file),Object.keys(i).forEach((function(e){n.append(e,i[e])}));var l="".concat(O["b"],"login");c()({method:"POST",url:l,data:n,transformRequest:[function(e){return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){if("SUCCESS"==e.state){var s=JSON.parse(localStorage.getItem("regex")),o=new RegExp(s);localStorage.setItem("isMatch",o.test(r)),a.afterLogin(e)}else{var i=e.msg;a.asyncRoutes&&t.getKaptcha(),a.logging=!1,i&&(-1!==i.indexOf("License")&&a.$confirm({content:i,onOk:function(){var e=a.$router.resolve({path:"/license",query:{}});window.open(e.href,"_blank")},okText:"立即更新License",cancelText:"关闭",onCancel:function(){}}),a.error=i)}})).catch((function(){a.logging=!1,a.$message({type:"error",message:"网络请求失败"})}))}})),setTimeout((function(){a.isclick=!0}),1e3))},afterLogin:function(e){this.logging=!1,"SUCCESS"==e.state?(this.$store.state.setting.asyncRoutes||S.a.set(O["c"],""),this.getUserInfo()):this.$message.error("登录失败")},getUserInfo:function(){var e=this;Object(v["c"])().then((function(t){var a=t.data,s=a.user,r=a.menus,o=a.loginUser,i=a.config;if(e.setUser(s),e.setMenus(r),localStorage.setItem("config",JSON.stringify(i)),Object(y["d"])(r),null!=o&&o.length>0)e.visible=!0,e.onlineSubRoleList=o;else{e.visible=!1;var n=e.getFirstPagePath();n&&(e.$router.push(n),e.$message.success("登录成功",3))}})).catch((function(e){}))},getFirstPagePath:function(){var e=function e(t){return t.children&&0!==t.children.length?e(t.children[0]):t.fullPath},t=function(e,t){var a=null;return e.forEach((function(e){e.fullPath===t&&(a=e)})),a},a=t(this.$router.options.routes,"/"),s=t(this.$router.options.routes,O["a"]);if(a||s)return e(a||s);this.$message.error("没有进入系统权限")},handleClick:function(){this.dialog.open({state:"create",parent:this})},handleChange:function(e){var t=e.target.files;t&&0!==t.length&&(this.file=t[0])},getPwdRules:function(){Object(w["b"])().then((function(e){var t=e.data;if(localStorage.setItem("rules",t.pwdRules),t.pwdRules){var a=JSON.parse(t.pwdRules),s=a.pwdLength[0],r=a.pwdLength[1],o="^";Object.keys(a).forEach((function(e){"upper"==e&&1==a[e]?o+="(?=.*[A-Z])":"lower"==e&&1==a[e]?o+="(?=.*[a-z])":"number"==e&&1==a[e]?o+="(?=.*\\d)":"special"==e&&1==a[e]?o+="(?=.*[!@~#$?%^&*(){}_+=|:;\\\"'<>,./-])":"pwdLength"==e&&(o+="[^\\u4e00-\\u9fa5]{".concat(s,",").concat(r,"}$"))})),localStorage.setItem("regex",JSON.stringify(o))}}))}})},M=A,V=(a("1f35"),a("ab9b"),Object(g["a"])(M,s,r,!1,null,"4bf489c3",null)),G=V.exports;t["default"]=G},"92ee":function(e,t,a){"use strict";a("3cd2")},ab9b:function(e,t,a){"use strict";a("0055")},b62c:function(e,t,a){}}]);